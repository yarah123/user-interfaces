{"version":3,"file":"apps_concierge_src_app_week-view_week-view_module_ts.js","mappings":"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","sources":["./apps/concierge/src/app/week-view/week-view-day.component.ts","./apps/concierge/src/app/week-view/week-view-event.component.ts","./apps/concierge/src/app/week-view/week-view-timeline.component.ts","./apps/concierge/src/app/week-view/week-view-topbar.component.ts","./apps/concierge/src/app/week-view/week-view.component.ts","./apps/concierge/src/app/week-view/week-view.module.ts"],"sourcesContent":["import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { timePeriodsIntersect } from '@placeos/common';\nimport { addDays, endOfDay, startOfWeek } from 'date-fns';\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { EventsStateService } from '../day-view/events-state.service';\n\n@Component({\n    selector: 'week-view-day',\n    template: `\n        <header\n            class=\"flex items-center justify-center border-b border-base-200 bg-base-300 w-full py-3 text-white\"\n        >\n            {{ date | async | date: 'EEE, MMM d, y' }}\n        </header>\n        <div class=\"flex-1 h-1/2 overflow-auto w-full\">\n            <ng-container *ngIf=\"(events | async)?.length; else empty_state\">\n                <week-view-event\n                    *ngFor=\"let event of events | async\"\n                    [event]=\"event\"\n                ></week-view-event>\n            </ng-container>\n        </div>\n        <ng-template #empty_state>\n            <p class=\"text-center p-2\">No events</p>\n        </ng-template>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                height: 100%;\n            }\n        `,\n    ],\n})\nexport class WeekViewDayComponent implements OnChanges {\n    @Input() public index: number;\n\n    private _index = new BehaviorSubject<number>(0);\n\n    public readonly date = this._state.date.pipe(\n        map((date) => addDays(startOfWeek(date), this.index).valueOf())\n    );\n\n    public readonly events = combineLatest([\n        this._state.filtered,\n        this._state.date,\n        this._index,\n    ]).pipe(\n        map(([events, date, index]) => {\n            const start = addDays(startOfWeek(date), index).valueOf();\n            const end = endOfDay(start).valueOf();\n            return events.filter((bkn) =>\n                timePeriodsIntersect(\n                    start,\n                    end,\n                    bkn.date,\n                    bkn.date + bkn.duration * 60 * 1000\n                )\n            );\n        })\n    );\n\n    constructor(private _state: EventsStateService) {}\n\n    public ngOnChanges(changes: SimpleChanges) {\n        if (changes.index) {\n            this._index.next(this.index);\n        }\n    }\n}\n","import { Component, Input } from '@angular/core';\n\nimport { CalendarEvent } from '@placeos/events';\nimport { EventsStateService } from '../day-view/events-state.service';\nimport { SettingsService } from '@placeos/common';\n\n@Component({\n    selector: 'week-view-event',\n    template: `\n        <div\n            content\n            matRipple\n            *ngIf=\"event\"\n            (click)=\"view(event)\"\n            [class]=\"\n                'm-2 p-2 bg-base-100 shadow rounded border-2 text-black text-left font-normal ' +\n                (event?.state === 'done' ? 'done' : event?.type)\n            \"\n        >\n            <div class=\"text-base\">{{ event?.title }}</div>\n            <div class=\"text-sm\">{{ event?.date | date: time_format }}</div>\n            <div class=\"text-sm\">\n                {{ event?.attendees.length }} Attendee{{\n                    event?.attendees.length === 1 ? '' : 's'\n                }}\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            button {\n                background: none !important;\n                border: none !important;\n            }\n\n            [content] {\n                width: calc(100% - 1rem);\n            }\n\n            .done {\n                opacity: 0.5;\n            }\n\n            .done:hover {\n                opacity: 1;\n            }\n\n            .cancelled {\n                border-color: #626262;\n            }\n\n            .external {\n                border-color: #d85be0;\n            }\n\n            .internal {\n                border-color: #00a4c7;\n            }\n        `,\n    ],\n})\nexport class WeekViewEventComponent {\n    @Input() public event: CalendarEvent;\n\n    public readonly view = (e) => this._state.setEvent(e);\n\n    public get time_format() {\n        return this._settings.time_format;\n    }\n\n    constructor(\n        private _state: EventsStateService,\n        private _settings: SettingsService\n    ) {}\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { EventsStateService } from '../day-view/events-state.service';\n\n@Component({\n    selector: 'week-view-timeline',\n    template: `\n        <div class=\"flex divide-x border-base-200 h-full\">\n            <ng-container *ngFor=\"let i of weekdays\">\n                <ng-container\n                    *ngIf=\"\n                        (i !== 0 && i !== 6) || (options | async).show_weekends\n                    \"\n                >\n                    <week-view-day\n                        class=\"h-full flex-1\"\n                        [index]=\"i\"\n                    ></week-view-day>\n                </ng-container>\n            </ng-container>\n        </div>\n        <mat-progress-bar\n            *ngIf=\"loading | async\"\n            mode=\"indeterminate\"\n        ></mat-progress-bar>\n        <view-event-details\n            *ngIf=\"event | async\"\n            [event]=\"event | async\"\n        ></view-event-details>\n    `,\n    styles: [\n        `\n            :host {\n                position: relative;\n                height: 100%;\n                width: 100%;\n                overflow: hidden;\n            }\n        `,\n    ],\n})\nexport class WeekViewTimelineComponent implements OnInit, OnDestroy {\n    public readonly weekdays = [0, 1, 2, 3, 4, 5, 6];\n    public readonly options = this._state.options;\n    public readonly event = this._state.event;\n    public readonly loading = this._state.loading;\n\n    constructor(private _state: EventsStateService) {}\n\n    public ngOnInit(): void {\n        this._state.startPolling('week');\n    }\n\n    public ngOnDestroy() {\n        this._state.stopPolling();\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { first } from 'rxjs/operators';\n\nimport { AsyncHandler } from '@placeos/common';\nimport { OrganisationService } from '@placeos/organisation';\n\nimport { EventsStateService } from '../day-view/events-state.service';\n\n@Component({\n    selector: 'week-view-topbar',\n    template: `\n        <button btn matRipple new class=\"w-12 xl:w-auto\" (click)=\"newBooking()\">\n            <div class=\"flex items-center\">\n                <app-icon class=\"mr-2\">add</app-icon>\n                <div class=\"hidden xl:block\">New Booking</div>\n            </div>\n        </button>\n        <mat-form-field appearance=\"outline\">\n            <mat-select\n                multiple\n                [(ngModel)]=\"zones\"\n                (ngModelChange)=\"updateZones($event)\"\n                placeholder=\"All Levels\"\n            >\n                <mat-option\n                    *ngFor=\"let level of levels | async\"\n                    [value]=\"level.id\"\n                >\n                    {{ level.display_name || level.name }}\n                </mat-option>\n            </mat-select>\n        </mat-form-field>\n        <mat-slide-toggle\n            class=\"m-2\"\n            [ngModel]=\"(options | async)?.show_weekends\"\n            (ngModelChange)=\"setWeekends($event)\"\n            ><div class=\"text-xs\">Show weekends</div></mat-slide-toggle\n        >\n        <div class=\"flex-1 w-0\"></div>\n        <!-- <searchbar class=\"mr-2\"></searchbar> -->\n        <date-options (dateChange)=\"setDate($event)\"></date-options>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                align-items: center;\n                background-color: var(--b1);\n                height: 5em;\n                padding: 0 1em;\n            }\n\n            button {\n                min-width: 0;\n                padding: 0 0.85rem;\n            }\n\n            mat-form-field {\n                height: 3.25em;\n                width: 8em;\n                margin-left: 1em;\n            }\n        `,\n    ],\n})\nexport class WeekViewTopbarComponent extends AsyncHandler implements OnInit {\n    /** List of selected levels */\n    public zones: string[] = [];\n    /** List of levels for the active building */\n    public readonly levels = this._org.active_levels;\n    /** Options set for week view */\n    public readonly options = this._state.options;\n    /** Set filtered date */\n    public readonly setDate = (d) => this._state.setDate(d);\n    /** Set filtered date */\n    public readonly setWeekends = (d) =>\n        this._state.setUIOptions({ show_weekends: d });\n    /**  */\n    public readonly newBooking = (d?) => this._state.newBooking(d);\n    /** List of levels for the active building */\n    public readonly updateZones = (z) => {\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: { zone_ids: z.join(',') },\n        });\n        this._state.setZones(z);\n    };\n\n    constructor(\n        private _state: EventsStateService,\n        private _org: OrganisationService,\n        private _route: ActivatedRoute,\n        private _router: Router\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe((params) => {\n                if (params.has('zone_ids')) {\n                    const zones = params.get('zone_ids').split(',');\n                    if (zones.length) {\n                        const level = this._org.levelWithID(zones);\n                        this.zones = zones;\n                        if (!level) return;\n                        this._org.building = this._org.buildings.find(\n                            (bld) => bld.id === level.parent_id\n                        );\n                    }\n                }\n            })\n        );\n        this.subscription(\n            'levels',\n            this._org.active_levels.subscribe((levels) => {\n                this.zones = this.zones.filter((zone) =>\n                    levels.find((lvl) => lvl.id === zone)\n                );\n                if (!this.zones.length && levels.length) {\n                    this.zones.push(levels[0].id);\n                }\n                this.updateZones(this.zones);\n            })\n        );\n    }\n}\n","import { Component } from '@angular/core';\n\n@Component({\n    selector: '[app-weekview]',\n    template: `\n        <sidebar></sidebar>\n        <main class=\"relative overflow-hidden\">\n            <week-view-topbar></week-view-topbar>\n            <week-view-timeline></week-view-timeline>\n        </main>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                height: 100%;\n                width: 100%;\n                background: var(--b1);\n            }\n\n            sidebar {\n                height: 100%;\n            }\n\n            main {\n                display: flex;\n                flex-direction: column;\n                flex: 1;\n                min-width: 50%;\n                height: 100%;\n            }\n        `,\n    ],\n})\nexport class WeekViewComponent {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Route } from '@angular/router';\n\nimport { UIModule } from '../ui/ui.module';\n\nimport { SharedSpacesModule } from '@placeos/spaces';\nimport { SharedUsersModule } from '@placeos/users';\n\nimport { WeekViewComponent } from './week-view.component';\nimport { WeekViewTopbarComponent } from './week-view-topbar.component';\nimport { WeekViewTimelineComponent } from './week-view-timeline.component';\nimport { WeekViewDayComponent } from './week-view-day.component';\nimport { WeekViewEventComponent } from './week-view-event.component';\n\nconst ROUTES: Route[] = [\n    { path: '', component: WeekViewComponent },\n    { path: 'new', component: WeekViewComponent },\n];\n\n@NgModule({\n    declarations: [\n        WeekViewComponent,\n        WeekViewTopbarComponent,\n        WeekViewTimelineComponent,\n        WeekViewDayComponent,\n        WeekViewEventComponent,\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        UIModule,\n        SharedSpacesModule,\n        SharedUsersModule,\n        RouterModule.forChild(ROUTES),\n    ],\n})\nexport class WeekViewModule {}\n"],"names":["SimpleChanges","timePeriodsIntersect","addDays","endOfDay","startOfWeek","BehaviorSubject","combineLatest","map","EventsStateService","i0","ɵɵelement","ɵɵproperty","event_r4","ɵɵelementContainerStart","ɵɵtemplate","WeekViewDayComponent_ng_container_5_week_view_event_1_Template","ɵɵelementContainerEnd","ɵɵadvance","ɵɵpipeBind1","ctx_r0","events","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","WeekViewDayComponent","constructor","_state","_index","date","pipe","index","valueOf","filtered","start","end","filter","bkn","duration","ngOnChanges","changes","next","_","ɵɵdirectiveInject","i1","_2","selectors","inputs","features","ɵɵNgOnChangesFeature","decls","vars","consts","template","WeekViewDayComponent_Template","rf","ctx","WeekViewDayComponent_ng_container_5_Template","WeekViewDayComponent_ng_template_7_Template","ɵɵtemplateRefExtractor","ɵɵtextInterpolate1","ɵɵpipeBind2","tmp_1_0","length","_r2","CalendarEvent","SettingsService","ɵɵlistener","WeekViewEventComponent_div_0_Template_div_click_0_listener","ɵɵrestoreView","ctx_r1","ɵɵnextContext","ɵɵresetView","view","event","ɵɵclassMap","state","type","ɵɵtextInterpolate","title","time_format","ɵɵtextInterpolate2","attendees","WeekViewEventComponent","_settings","e","setEvent","i2","WeekViewEventComponent_Template","WeekViewEventComponent_div_0_Template","i_r3","WeekViewTimelineComponent_ng_container_1_ng_container_1_Template","options","show_weekends","ctx_r2","WeekViewTimelineComponent","weekdays","loading","ngOnInit","startPolling","ngOnDestroy","stopPolling","WeekViewTimelineComponent_Template","WeekViewTimelineComponent_ng_container_1_Template","WeekViewTimelineComponent_mat_progress_bar_2_Template","WeekViewTimelineComponent_view_event_details_4_Template","ActivatedRoute","Router","first","AsyncHandler","OrganisationService","level_r1","id","display_name","name","WeekViewTopbarComponent","_org","_route","_router","zones","levels","active_levels","setDate","d","setWeekends","setUIOptions","newBooking","updateZones","z","navigate","relativeTo","queryParams","zone_ids","join","setZones","_this","_asyncToGenerator","initialised","toPromise","subscription","queryParamMap","subscribe","params","has","get","split","level","levelWithID","building","buildings","find","bld","parent_id","zone","lvl","push","i3","ɵɵInheritDefinitionFeature","WeekViewTopbarComponent_Template","WeekViewTopbarComponent_Template_button_click_0_listener","WeekViewTopbarComponent_Template_mat_select_ngModelChange_7_listener","$event","WeekViewTopbarComponent_mat_option_8_Template","WeekViewTopbarComponent_Template_mat_slide_toggle_ngModelChange_10_listener","WeekViewTopbarComponent_Template_date_options_dateChange_15_listener","tmp_2_0","WeekViewComponent","attrs","_c0","WeekViewComponent_Template","CommonModule","FormsModule","RouterModule","UIModule","SharedSpacesModule","SharedUsersModule","ROUTES","path","component","WeekViewModule","_3","forChild","declarations","imports"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}