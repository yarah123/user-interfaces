{"version":3,"file":"apps_visitor-kiosk_src_app_explore_module_ts.js","mappings":"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","sources":["./apps/map-kiosk/src/app/accessibility-controls.component.ts","./apps/map-kiosk/src/app/explore-level-select.component.ts","./apps/map-kiosk/src/app/explore.component.ts","./apps/visitor-kiosk/src/app/explore.module.ts","./libs/explore/src/index.ts","./libs/explore/src/lib/explore-desks.service.ts","./libs/explore/src/lib/explore-device-info.component.ts","./libs/explore/src/lib/explore-lockers.service.ts","./libs/explore/src/lib/explore-map-control.component.ts","./libs/explore/src/lib/explore-map-view.component.ts","./libs/explore/src/lib/explore-parking-info.component.ts","./libs/explore/src/lib/explore-parking.service.ts","./libs/explore/src/lib/explore-search.component.ts","./libs/explore/src/lib/explore-search.service.ts","./libs/explore/src/lib/explore-sensor-info.component.ts","./libs/explore/src/lib/explore-zones.service.ts","./libs/explore/src/lib/explore-zoom-control.component.ts","./libs/explore/src/lib/explore.module.ts","./libs/explore/src/lib/explore.ts","./libs/explore/src/lib/set-datetime-modal.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { AsyncHandler, SettingsService } from '@placeos/common';\n\n@Component({\n    selector: 'accessibility-controls',\n    template: `\n        <button\n            matRipple\n            class=\"flex items-center justify-between hover:bg-base-200 w-full p-2 rounded\"\n            (click)=\"setDarkMode(!dark_mode)\"\n        >\n            <div>Dark Mode</div>\n            <mat-slide-toggle\n                [ngModel]=\"dark_mode\"\n                (ngModelChange)=\"setDarkMode($event)\"\n            ></mat-slide-toggle>\n        </button>\n        <button\n            matRipple\n            class=\"flex items-center justify-between hover:bg-base-200 w-full p-2 rounded\"\n            (click)=\"applySetting('accessible', !accessible)\"\n        >\n            <div>Text Size</div>\n            <mat-slide-toggle\n                [ngModel]=\"accessible\"\n                (ngModelChange)=\"applySetting('accessible', $event)\"\n            ></mat-slide-toggle>\n        </button>\n        <div class=\"flex items-center pl-2 space-x-4\" *ngIf=\"accessible\">\n            <div class=\"text-sm\">A</div>\n            <mat-slider\n                class=\"flex-1 w-px min-w-0 text-[16px]\"\n                [min]=\"10\"\n                [max]=\"24\"\n                [step]=\"2\"\n            >\n                <input\n                    matSliderThumb\n                    class=\"text-[16px]\"\n                    [ngModel]=\"font_size\"\n                    (ngModelChange)=\"applySetting('font_size', $event)\"\n                />\n            </mat-slider>\n            <div class=\"text-2xl\">A</div>\n            <div\n                class=\"text-base py-1 px-2 rounded bg-base-300 text-base-content my-2\"\n            >\n                {{ font_size }}px\n            </div>\n        </div>\n    `,\n    styles: [``],\n})\nexport class AccessibilityControlsComponent extends AsyncHandler {\n    constructor(private _settings: SettingsService) {\n        super();\n    }\n\n    public get dark_mode() {\n        return this._settings.get('theme') === 'dark';\n    }\n\n    public get can_change_dark_mode() {\n        return !!this._settings.get('app.general.dark_mode');\n    }\n\n    public get accessible() {\n        return !!this._settings.get('accessible');\n    }\n\n    public get font_size() {\n        return this._settings.get('font_size') || 16;\n    }\n\n    public readonly applySetting = (n, v) =>\n        this.timeout(\n            'apply_setting',\n            () => this._settings.saveUserSetting(n, v),\n            1000\n        );\n\n    public setDarkMode(state: boolean) {\n        this.timeout(\n            'dark_mode',\n            () => {\n                const theme = this._settings.get('theme');\n                if (state && theme !== 'dark') this._settings.setTheme('dark');\n                else if (!state && theme === 'dark')\n                    this._settings.setTheme('light');\n            },\n            100\n        );\n    }\n}\n","import { Component } from '@angular/core';\nimport { ExploreStateService } from '@placeos/explore';\nimport { OrganisationService } from '@placeos/organisation';\nimport { first, take } from 'rxjs/operators';\n\n@Component({\n    selector: 'explore-level-select',\n    template: `\n        <div\n            class=\"m-2 rounded overflow-hidden bg-base-100 shadow border border-solid border-base-300\"\n        >\n            <button\n                *ngFor=\"let lvl of levels | async\"\n                class=\"flex flex-col items-center justify-center h-16 w-16 p-2 border-none\"\n                [class.active]=\"lvl.id === (level | async)?.id\"\n                (click)=\"setLevel(lvl)\"\n                matRipple\n            >\n                <div class=\"text-2xl\">{{ lvl.number }}</div>\n                <p class=\"text-sm whitespace-nowrap m-0\">\n                    {{ lvl.display_name || lvl.name }}\n                </p>\n            </button>\n        </div>\n    `,\n    styles: [\n        `\n            .active {\n                background: var(--s) !important;\n                color: #fff !important;\n            }\n\n            button:not(:first-child) {\n                border-top: 1px solid var(--b3) !important;\n            }\n        `,\n    ],\n})\nexport class ExploreLevelSelectComponent {\n    public readonly levels = this._org.active_levels;\n    public readonly level = this._state.level;\n\n    public readonly setLevel = (lvl) => this._state.setLevel(lvl.id);\n\n    constructor(\n        private _org: OrganisationService,\n        private _state: ExploreStateService\n    ) {}\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        const levels = await this._org.active_levels.pipe(take(1)).toPromise();\n    }\n}\n","import { Component, HostListener, OnInit } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n    ANIMATION_SHOW_CONTRACT_EXPAND,\n    AsyncHandler,\n    flatten,\n    log,\n    MapsPeopleService,\n    notifyError,\n    SettingsService,\n    unique,\n} from '@placeos/common';\nimport {\n    MapPinComponent,\n    MapRadiusComponent,\n    VirtualKeyboardComponent,\n} from '@placeos/components';\nimport {\n    ExploreDesksService,\n    ExploreParkingService,\n    ExploreSpacesService,\n    ExploreStateService,\n    ExploreZonesService,\n} from '@placeos/explore';\nimport { OrganisationService } from '@placeos/organisation';\nimport { SpacesService } from '@placeos/spaces';\nimport { Point } from '@placeos/svg-viewer';\nimport { getModule } from '@placeos/ts-client';\nimport { MapLocation, showStaff, User } from '@placeos/users';\nimport { startOfMinute } from 'date-fns';\nimport { SpacePipe } from 'libs/spaces/src/lib/space.pipe';\nimport { combineLatest } from 'rxjs';\nimport { first, map, take, tap } from 'rxjs/operators';\n\n@Component({\n    selector: '[app-explore]',\n    template: `\n        <div\n            topbar\n            class=\"relative flex items-center justify-between px-4 py-2 border-b border-base-300 bg-base-100 text-base-content\"\n        >\n            <a matRipple routerLink=\"/\" class=\"text-2xl rounded p-2\">\n                Place<span class=\"text-primary\">OS</span>\n            </a>\n            <div\n                class=\"absolute top-1/2 -translate-y-1/2 right-2 flex items-center\"\n            >\n                <explore-search *ngIf=\"can_search\"></explore-search>\n                <button\n                    icon\n                    matRipple\n                    customTooltip\n                    [content]=\"accessibility_controls\"\n                    class=\"bg-base-200 flex sm:hidden\"\n                >\n                    <app-icon>accessible</app-icon>\n                </button>\n                <ng-template #accessibility_controls>\n                    <div class=\"bg-base-100 rounded p-2 w-[18rem]\">\n                        <accessibility-controls></accessibility-controls>\n                    </div>\n                </ng-template>\n            </div>\n        </div>\n        <ng-container *ngIf=\"(levels | async)?.length || legend.length\">\n            <div\n                options\n                class=\"flex sm:hidden items-center bg-base-content text-base-100 p-2 space-x-2\"\n            >\n                <ng-container *ngIf=\"(levels | async)?.length\">\n                    <button\n                        btn\n                        matRipple\n                        class=\"clear text-base-100\"\n                        [matMenuTriggerFor]=\"levelMenu\"\n                    >\n                        <div class=\"flex-1 text-left font-medium\">Level</div>\n                        <app-icon class=\"text-2xl\"\n                            >keyboard_arrow_down</app-icon\n                        >\n                    </button>\n                    <mat-menu #levelMenu=\"matMenu\">\n                        <button\n                            mat-menu-item\n                            *ngFor=\"let lvl of levels | async\"\n                            (click)=\"setLevel(lvl)\"\n                        >\n                            {{ lvl.display_name || lvl.name }}\n                        </button>\n                    </mat-menu>\n                </ng-container>\n                <ng-container *ngIf=\"legend.length\">\n                    <button\n                        btn\n                        matRipple\n                        class=\"clear text-base-100\"\n                        [matMenuTriggerFor]=\"legendMenu\"\n                    >\n                        <div class=\"flex-1 text-left font-medium\">Legend</div>\n                        <app-icon class=\"text-2xl\"\n                            >keyboard_arrow_down</app-icon\n                        >\n                    </button>\n                    <mat-menu #legendMenu=\"matMenu\">\n                        <div\n                            class=\"flex items-center py-2 px-4 rounded hover:bg-base-200 w-full space-x-4\"\n                            *ngFor=\"let value of legend\"\n                        >\n                            <div\n                                class=\"h-3 w-3 rounded-full\"\n                                [style.background-color]=\"value.color\"\n                            ></div>\n                            <div class=\"text-left opacity-60\">\n                                {{ value.name }}\n                            </div>\n                        </div>\n                    </mat-menu>\n                </ng-container>\n            </div>\n        </ng-container>\n        <div class=\"flex flex-1 h-1/2\">\n            <div\n                sidebar\n                class=\"w-[20rem] hidden sm:block bg-base-100 text-base-content border-r border-base-300 px-2 py-4\"\n            >\n                <ng-container *ngIf=\"(levels | async)?.length\">\n                    <button\n                        btn\n                        matRipple\n                        class=\"flex items clear w-full space-x-4 hover:bg-base-200\"\n                        (click)=\"show_levels = !show_levels\"\n                    >\n                        <app-icon class=\"text-2xl\">corporate_fare</app-icon>\n                        <div class=\"flex-1 text-left font-medium\">Level</div>\n                        <app-icon class=\"text-2xl\">{{\n                            show_levels\n                                ? 'keyboard_arrow_up'\n                                : 'keyboard_arrow_down'\n                        }}</app-icon>\n                    </button>\n                    <div class=\"px-8\" [@show]=\"show_levels ? 'show' : 'hide'\">\n                        <div class=\"py-4 space-y-2\">\n                            <button\n                                *ngFor=\"let lvl of levels | async\"\n                                btn\n                                matRipple\n                                class=\"clear hover:bg-base-200 hover:opacity-100 w-full\"\n                                [class.opacity-30]=\"\n                                    lvl.id !== (level | async)?.id\n                                \"\n                                (click)=\"setLevel(lvl)\"\n                            >\n                                <div class=\"text-left w-full\">\n                                    {{ lvl.display_name || lvl.name }}\n                                </div>\n                            </button>\n                        </div>\n                    </div>\n                    <hr class=\"w-[calc(100%-4rem)] mx-auto\" />\n                </ng-container>\n                <ng-container *ngIf=\"legend.length\">\n                    <button\n                        btn\n                        matRipple\n                        class=\"flex items clear w-full space-x-4 hover:bg-base-200\"\n                        (click)=\"show_legend = !show_legend\"\n                    >\n                        <app-icon class=\"text-2xl\">place</app-icon>\n                        <div class=\"flex-1 text-left font-medium\">Legend</div>\n                        <app-icon class=\"text-2xl\">{{\n                            show_legend\n                                ? 'keyboard_arrow_up'\n                                : 'keyboard_arrow_down'\n                        }}</app-icon>\n                    </button>\n                    <div class=\"px-8\" [@show]=\"show_legend ? 'show' : 'hide'\">\n                        <div class=\"py-4 space-y-2\">\n                            <div\n                                class=\"flex items-center py-2 px-4 rounded hover:bg-base-200 w-full space-x-4\"\n                                *ngFor=\"let value of legend\"\n                            >\n                                <div\n                                    class=\"h-3 w-3 rounded-full\"\n                                    [style.background-color]=\"value.color\"\n                                ></div>\n                                <div class=\"text-left opacity-60\">\n                                    {{ value.name }}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <hr class=\"w-[calc(100%-4rem)] mx-auto\" />\n                </ng-container>\n                <button\n                    btn\n                    matRipple\n                    class=\"flex items clear w-full space-x-4 hover:bg-base-200\"\n                    (click)=\"show_accessibility = !show_accessibility\"\n                >\n                    <app-icon class=\"text-2xl\">accessible</app-icon>\n                    <div class=\"flex-1 text-left font-medium\">\n                        Accessibility\n                    </div>\n                    <app-icon class=\"text-2xl\">{{\n                        show_accessibility\n                            ? 'keyboard_arrow_up'\n                            : 'keyboard_arrow_down'\n                    }}</app-icon>\n                </button>\n                <div\n                    class=\"px-8\"\n                    [@show]=\"show_accessibility ? 'show' : 'hide'\"\n                >\n                    <div class=\" py-4 space-y-2\">\n                        <accessibility-controls></accessibility-controls>\n                    </div>\n                </div>\n                <hr class=\"w-[calc(100%-4rem)] mx-auto\" />\n            </div>\n            <div class=\"relative flex-1 h-full\">\n                <interactive-map\n                    [src]=\"url | async\"\n                    [zoom]=\"(positions | async)?.zoom\"\n                    [center]=\"(positions | async)?.center\"\n                    (zoomChange)=\"updateZoom($event)\"\n                    (centerChange)=\"updateCenter($event)\"\n                    [styles]=\"styles | async\"\n                    [features]=\"features | async\"\n                    [actions]=\"actions | async\"\n                    [labels]=\"labels | async\"\n                    [options]=\"{ controls: true }\"\n                    [focus]=\"locate\"\n                ></interactive-map>\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                position: absolute;\n                display: flex;\n                flex-direction: column;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background-color: var(--b2);\n            }\n\n            hr {\n                margin-top: 0.5rem !important;\n                margin-bottom: 0.5rem !important;\n            }\n        `,\n    ],\n    providers: [\n        ExploreSpacesService,\n        ExploreDesksService,\n        ExploreZonesService,\n        ExploreParkingService,\n        SpacePipe,\n    ],\n    animations: [ANIMATION_SHOW_CONTRACT_EXPAND],\n})\nexport class ExploreComponent extends AsyncHandler implements OnInit {\n    /** Number of seconds after a user action to reset the kiosk state */\n    public reset_delay = 180;\n    public show_levels: boolean = true;\n    public show_legend: boolean = false;\n    public show_accessibility: boolean = false;\n    public legend = [\n        { id: 'free', name: 'Space Available', color: '#43a047' },\n        { id: 'busy', name: 'Space In Use', color: '#e53935' },\n        { id: 'pending', name: 'Space Pending', color: '#ffb300' },\n        { id: 'not-bookable', name: 'Space Not-bookable', color: '#ccc' },\n    ];\n    public readonly levels = combineLatest([\n        this._org.active_region,\n        this._org.active_building,\n    ]).pipe(\n        map(([region, building]) => {\n            return (\n                (this._settings.get('app.use_region')\n                    ? flatten(\n                          this._org.buildings\n                              .filter((bld) => region.id === bld.parent_id)\n                              .map((bld) =>\n                                  this._org.levelsForBuilding(bld).map((_) => ({\n                                      ..._,\n                                      display_name: `${bld.display_name} - ${_.display_name}`,\n                                  }))\n                              )\n                      )\n                    : this._org.levelsForBuilding(building)) || []\n            );\n        }),\n        tap((l) => console.log('Levels:', l))\n    );\n    public readonly level = this._state.level;\n\n    /** Application logo to display */\n    public get logo() {\n        return this._settings.get('theme') === 'dark'\n            ? this._settings.get('app.logo_dark')\n            : this._settings.get('app.logo_light');\n    }\n\n    public get time() {\n        return startOfMinute(Date.now());\n    }\n\n    public get hide_zones() {\n        return this._settings.get('app.hide_zones');\n    }\n    /** Observable for the active map */\n    public readonly url = this._state.map_url;\n    /** Observable for the active map */\n    public readonly styles = this._state.map_styles;\n    /** Observable for the active map */\n    public readonly positions = this._state.map_positions;\n    /** Observable for the active map */\n    public readonly features = this._state.map_features;\n    /** Observable for the active map */\n    public readonly actions = this._state.map_actions;\n    /** Observable for the labels map */\n    public readonly labels = this._state.map_labels;\n    /** Observable for the active map */\n    public readonly options = this._state.options;\n\n    public locate = '';\n\n    @HostListener('window:mousedown') public onMouse = () =>\n        this.timeout('reset', () => this.resetKiosk(), this.reset_delay * 1000);\n    @HostListener('window:touchstart') public onTouch = () =>\n        this.timeout('reset', () => this.resetKiosk(), this.reset_delay * 1000);\n\n    public readonly setOptions = (o) => this._state.setOptions(o);\n    public readonly setLevel = (lvl) => this._state.setLevel(lvl.id);\n\n    public updateZoom(zoom: number) {\n        this._state.setPositions(zoom, this._state.positions.center);\n    }\n\n    public updateCenter(center: Point) {\n        this._state.setPositions(this._state.positions.zoom, center);\n    }\n\n    public async toggleZones(enabled: boolean) {\n        const options = await this.options.pipe(take(1)).toPromise();\n        const disable = !enabled\n            ? unique([...(options.disable || []), 'zones', 'devices'])\n            : options.disable.filter((_) => _ !== 'zones' && _ !== 'devices') ||\n              [];\n        this.setOptions({ disable });\n    }\n\n    public get can_search() {\n        return !!this._settings.get('app.explore.search_enabled');\n    }\n\n    public readonly use_mapsindoors$ = this._maps.available$;\n\n    constructor(\n        private _state: ExploreStateService,\n        private _s: ExploreSpacesService,\n        private _desks: ExploreDesksService,\n        private _zones: ExploreZonesService,\n        private _parking: ExploreParkingService,\n        private _settings: SettingsService,\n        private _org: OrganisationService,\n        private _spaces: SpacesService,\n        private _dialog: MatDialog,\n        private _route: ActivatedRoute,\n        private _router: Router,\n        private _space_pipe: SpacePipe,\n        private _maps: MapsPeopleService\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        if (\n            location.hash.includes('public=true') ||\n            location.search.includes('public=true')\n        ) {\n            this._state.setOptions({ is_public: true });\n        }\n        await this._spaces.initialised.pipe(first((_) => _)).toPromise();\n        this._desks.setOptions({ custom: true });\n        this.reset_delay =\n            this._settings.get('app.inactivity_timeout_secs') || 180;\n        this.resetKiosk(false);\n        VirtualKeyboardComponent.enabled =\n            localStorage.getItem('OSK.enabled') === 'true';\n        this.subscription(\n            'level',\n            this._state.level.subscribe(() =>\n                this.timeout('update_location', () => {\n                    this._state.setFeatures('_located', []);\n                })\n            )\n        );\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe(async (params) => {\n                if (params.has('level')) {\n                    log('Explore', 'Level changed to:', params.get('level'));\n                    this._state.setLevel(params.get('level'));\n                    const level = this._org.levelWithID([params.get('level')]);\n                    if (!level) return;\n                    const bld = this._org.buildings.find(\n                        (_) => level.parent_id === _.id\n                    );\n                    if (!bld) return;\n                    this._org.building = bld;\n                }\n                this._state.setFeatures('_located', []);\n                if (params.has('space')) {\n                    log('Explore', 'Focusing on space:', params.get('space'));\n                    this.locateSpace(params.get('space'));\n                } else if (params.has('user')) {\n                    log('Explore', 'Focusing on user:', params.get('user'));\n                    let user = this._settings.value('last_search');\n                    if (!user || params.get('user') !== user.email) {\n                        user = null;\n                        user = await showStaff(params.get('user')).toPromise();\n                    }\n                    if (!user)\n                        return notifyError(\n                            `Unable to user details for ${params.get('user')}`\n                        );\n                    this.locateUser(\n                        user instanceof Array ? user[0] : user\n                    ).catch((_) => {\n                        notifyError(`Unable to locate ${params.get('user')}`);\n                        this._router.navigate([], {\n                            relativeTo: this._route,\n                            queryParams: {},\n                        });\n                    });\n                } else if (params.has('feature')) {\n                    log(\n                        'Explore',\n                        'Focusing on feature:',\n                        params.get('feature')\n                    );\n                    this.timeout('update_location', () => {\n                        this._state.setFeatures('_located', [\n                            {\n                                location: params.get('feature'),\n                                content: MapPinComponent,\n                                data: {},\n                            },\n                        ]);\n                    });\n                } else if (params.has('locate')) {\n                    log(\n                        'Explore',\n                        'Focusing on location:',\n                        params.get('locate')\n                    );\n                    this.locate = params.get('locate');\n                    this.timeout('update_location', () => {\n                        this._state.setFeatures('_located', [\n                            {\n                                location: params.get('locate'),\n                                content: MapPinComponent,\n                                data: {},\n                            },\n                        ]);\n                    });\n                } else {\n                    this.timeout('update_location', () => {\n                        this._state.setFeatures('_located', []);\n                    });\n                }\n            })\n        );\n    }\n\n    private async locateSpace(id: string) {\n        const space = await this._space_pipe.transform(id);\n        if (!space) return;\n        this._state.setLevel(this._org.levelWithID(space.zones)?.id);\n        const feature: any = {\n            location: space.map_id,\n            content: MapPinComponent,\n            data: {\n                message: `${space.display_name || space.name} is here`,\n            },\n        };\n        this.timeout('update_location', () =>\n            this._state.setFeatures('_located', [feature])\n        );\n    }\n\n    private async locateUser(user: User) {\n        let locate_details: any = this._org.binding('location_services');\n        if (!locate_details) return;\n        if (typeof locate_details === 'string') {\n            locate_details = {\n                system_id: locate_details,\n                module: 'LocationServices',\n            };\n        }\n        const mod = getModule(locate_details.system_id, locate_details.module);\n        const locations: MapLocation[] = (\n            await mod.execute('locate_user', [\n                user.email,\n                user.username || user.id,\n            ])\n        ).map((i) => new MapLocation(i));\n        locations.sort(\n            (a, b) =>\n                locate_details.priority.indexOf(a.type) -\n                locate_details.priority.indexOf(b.type)\n        );\n        if (!locations?.length) {\n            throw 'No locations for the given user';\n        }\n        this._state.setLevel(this._org.levelWithID([locations[0]?.level])?.id);\n        const pos: any = locations[0].position;\n        const { coordinates_from } = locations[0];\n        const feature: any = {\n            location:\n                locations[0].type === 'wireless'\n                    ? {\n                          x: coordinates_from?.includes('right')\n                              ? 1 - pos.x\n                              : pos.x,\n                          y: coordinates_from?.includes('bottom')\n                              ? 1 - pos.y\n                              : pos.y,\n                      }\n                    : pos,\n            content:\n                locations[0].type === 'wireless'\n                    ? MapRadiusComponent\n                    : MapPinComponent,\n            z_index: 99,\n            data: {\n                message: `${user.name} is here`,\n                radius: locations[0].variance,\n                last_seen: locations[0].last_seen,\n            },\n        };\n        this.timeout('update_location', () => {\n            this._state.setFeatures('_located', [feature]);\n        });\n    }\n\n    public resetKiosk(navigate = true) {\n        if ((document.activeElement as any)?.blur)\n            (document.activeElement as any)?.blur();\n        const level = localStorage.getItem('KIOSK.level');\n        this._state.setPositions(1, { x: 0.5, y: 0.5 });\n        if (level) this._state.setLevel(level);\n        this._dialog.closeAll();\n        if (navigate) this._router.navigate(['/']);\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule, Route } from '@angular/router';\nimport { FormsModule } from '@angular/forms';\n\nimport { ComponentsModule } from '@placeos/components';\nimport { SharedExploreModule } from '@placeos/explore';\nimport { SharedSpacesModule } from '@placeos/spaces';\n\nimport { SharedComponentsModule } from './components/shared-components.module';\n\nimport { ExploreComponent } from 'apps/map-kiosk/src/app/explore.component';\nimport { ExploreLevelSelectComponent } from 'apps/map-kiosk/src/app/explore-level-select.component';\nimport { AccessibilityControlsComponent } from 'apps/map-kiosk/src/app/accessibility-controls.component';\n\nconst ROUTES: Route[] = [\n    { path: '', component: ExploreComponent },\n    { path: ':search_type', component: ExploreComponent },\n];\n\n@NgModule({\n    declarations: [\n        ExploreComponent,\n        ExploreLevelSelectComponent,\n        AccessibilityControlsComponent,\n    ],\n    imports: [\n        CommonModule,\n        RouterModule.forChild(ROUTES),\n        ComponentsModule,\n        SharedSpacesModule,\n        SharedComponentsModule,\n        FormsModule,\n        SharedExploreModule,\n    ],\n})\nexport class AppExploreModule {}\n","export * from './lib/explore.module';\nexport * from './lib/explore';\nexport * from './lib/explore-lockers.service';\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { getModule, showMetadata } from '@placeos/ts-client';\nimport { addDays, endOfDay, getUnixTime, startOfDay } from 'date-fns';\nimport { BehaviorSubject, combineLatest, Observable, of } from 'rxjs';\nimport {\n    catchError,\n    debounceTime,\n    filter,\n    first,\n    map,\n    shareReplay,\n    switchMap,\n    take,\n    tap,\n} from 'rxjs/operators';\n\nimport { BookingFormService } from 'libs/bookings/src/lib/booking-form.service';\nimport {\n    AsyncHandler,\n    BookingRuleset,\n    currentUser,\n    notifyError,\n    notifySuccess,\n    rulesForResource,\n    SettingsService,\n} from '@placeos/common';\nimport { OrganisationService } from 'libs/organisation/src/lib/organisation.service';\nimport { Desk } from 'libs/organisation/src/lib/desk.class';\nimport { StaffUser } from 'libs/users/src/lib/user.class';\n\nimport { SetDatetimeModalComponent } from 'libs/explore/src/lib/set-datetime-modal.component';\nimport { ExploreDeskInfoComponent } from './explore-desk-info.component';\nimport { ExploreDeviceInfoComponent } from './explore-device-info.component';\nimport { DEFAULT_COLOURS } from './explore-spaces.service';\nimport { ExploreStateService } from './explore-state.service';\nimport { queryBookings } from 'libs/bookings/src/lib/bookings.fn';\n\nexport interface DeskOptions {\n    enable_booking?: boolean;\n    date?: number;\n    all_day?: boolean;\n    zones?: string[];\n    host?: StaffUser;\n    custom?: boolean;\n    use_api?: boolean;\n}\nexport interface DesksStats {\n    free: number;\n    occupied: number;\n    total: number;\n}\n\n@Injectable()\nexport class ExploreDesksService extends AsyncHandler implements OnDestroy {\n    private _in_use = new BehaviorSubject<string[]>([]);\n    private _options = new BehaviorSubject<DeskOptions>({});\n    private _presence = new BehaviorSubject<string[]>([]);\n    private _signs_of_life = new BehaviorSubject<string[]>([]);\n    private _statuses: Record<string, string> = {};\n    private _users: Record<string, string> = {};\n    private _departments: Record<string, string> = {};\n\n    private _checked_in = new BehaviorSubject<string[]>([]);\n\n    public readonly booking_rules: Observable<BookingRuleset[]> =\n        this._org.active_building.pipe(\n            filter((bld) => !!bld),\n            switchMap((bld) =>\n                showMetadata(bld.id, `desk_booking_rules`).pipe(\n                    catchError(() => of({ details: [] }))\n                )\n            ),\n            map((_) => (_?.details instanceof Array ? _.details : [])),\n            shareReplay(1)\n        );\n\n    public readonly desk_list = this._state.level.pipe(\n        debounceTime(50),\n        switchMap((lvl) =>\n            showMetadata(lvl.id, 'desks').pipe(\n                catchError(() => of({ details: [] })),\n                map((i) =>\n                    (i?.details instanceof Array ? i.details : []).map(\n                        (j: Record<string, any>) =>\n                            new Desk({ ...j, zone: lvl as any })\n                    )\n                )\n            )\n        ),\n        catchError((e) => []),\n        shareReplay(1)\n    );\n\n    private _bind = combineLatest([\n        this._state.level,\n        this._state.options,\n    ]).pipe(\n        debounceTime(300),\n        filter(([_, { is_public }]) => !!_ && !is_public),\n        map(([lvl]) => {\n            this._statuses = {};\n            const system_id = this._org.binding('area_management');\n            if (!system_id) return;\n            let binding = getModule(system_id, 'AreaManagement')?.binding(\n                lvl.id\n            );\n            if (!binding) return;\n            this.subscription(\n                `lvl-in_use`,\n                binding\n                    .listen()\n                    .subscribe((d) =>\n                        this.processBindingChange(d || {}, system_id)\n                    )\n            );\n            this.subscription('lvl-in_use_bind', binding.bind());\n        })\n    );\n\n    private _booking_list = combineLatest([\n        this._options,\n        this._state.level,\n    ]).pipe(\n        filter(\n            ([_, lvl]) =>\n                (_.use_api || _.date > endOfDay(Date.now()).valueOf()) && !!lvl\n        ),\n        switchMap(([_, level]) => {\n            return queryBookings({\n                type: 'desk',\n                period_start: getUnixTime(startOfDay(_.date || Date.now())),\n                period_end: getUnixTime(endOfDay(_.date || Date.now())),\n                zones: level.id,\n            });\n        }),\n        debounceTime(200),\n        tap((bookings) => {\n            this._in_use.next(bookings.map((_) => _.asset_id));\n            this._checked_in.next(\n                bookings.filter((_) => _.checked_in).map((_) => _.asset_id)\n            );\n        }),\n        shareReplay(1)\n    );\n\n    private _state_change = combineLatest([\n        this.desk_list,\n        this._in_use,\n        this._presence,\n        this._checked_in,\n        this._signs_of_life,\n        this.booking_rules,\n        this._options,\n    ]).pipe(\n        debounceTime(50),\n        map(\n            async ([\n                desks,\n                in_use,\n                presence,\n                checked_in,\n                signs,\n                restrictions,\n            ]) => {\n                this._statuses = {};\n                const level = await this._state.level.pipe(take(1)).toPromise();\n                for (const { id, bookable } of desks) {\n                    const is_used = in_use.some((i) => id === i);\n                    const has_presence = presence.some((i) => id === i);\n                    const has_signs = signs.some((i) => id === i);\n                    const is_checked_in =\n                        checked_in.some((i) => id === i) ||\n                        (is_used &&\n                            this._settings.get(`app.desk.auto_checkin`));\n                    const is_restricted = rulesForResource(\n                        {\n                            date: Date.now(),\n                            duration: 60,\n                            host: currentUser(),\n                            resource: {\n                                id,\n                                zones: [level.parent_id, level.id],\n                            },\n                        },\n                        restrictions\n                    )?.hidden;\n                    this._statuses[id] =\n                        bookable && !is_restricted\n                            ? !is_used && !has_presence && !is_checked_in\n                                ? has_signs\n                                    ? 'signs-of-life'\n                                    : 'free'\n                                : !has_presence && !is_checked_in\n                                ? 'pending'\n                                : 'busy'\n                            : 'not-bookable';\n                }\n                this.processDesks(desks);\n            }\n        )\n    );\n\n    constructor(\n        private _state: ExploreStateService,\n        private _org: OrganisationService,\n        private _settings: SettingsService,\n        private _bookings: BookingFormService,\n        private _dialog: MatDialog\n    ) {\n        super();\n        this.init();\n    }\n\n    public async init() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        this.setOptions({\n            enable_booking:\n                this._settings.get('app.desks.enable_maps') !== false,\n        });\n        this.subscription('bookings', this._booking_list.subscribe());\n        this.subscription('bind', this._bind.subscribe());\n        this.subscription('booking_rules', this.booking_rules.subscribe());\n        this.subscription('changes', this._state_change.subscribe());\n        this.subscription(\n            'desks',\n            this.desk_list.subscribe((desks) => this.processDesks(desks))\n        );\n    }\n\n    public setOptions(options: DeskOptions) {\n        this._options.next({ ...this._options.getValue(), ...options });\n    }\n\n    public processBindingChange(\n        { value }: { value: any[] },\n        system_id: string\n    ) {\n        const devices = (value || []).filter(\n            (v) => !['desk', 'booking'].includes(v.location)\n        );\n        const desks = (value || []).filter(\n            (v) =>\n                v.location === 'desk' ||\n                (v.location === 'booking' && v.type === 'desk')\n        );\n        const date = this._options.getValue().date || Date.now();\n        if (\n            date <= endOfDay(Date.now()).valueOf() &&\n            !this._options.getValue().use_api\n        ) {\n            this._in_use.next(\n                desks\n                    .filter((v) => v.location === 'booking')\n                    .map((v) => v.map_id || v.asset_id)\n            );\n            this._checked_in.next(\n                desks\n                    .filter((v) => v.location === 'booking' && v.checked_in)\n                    .map((v) => v.map_id || v.asset_id)\n            );\n            this._presence.next(\n                desks\n                    .filter((v) => v.at_location)\n                    .map((v) => v.map_id || v.asset_id)\n            );\n            this._signs_of_life.next(\n                desks\n                    .filter((v) => v.signs_of_life)\n                    .map((v) => v.map_id || v.asset_id)\n            );\n        }\n        const departments = this._settings.get('app.department_map') || {};\n        for (const desk of desks) {\n            this._users[desk.map_id || desk.asset_id] = desk.staff_name;\n            this._departments[desk.map_id || desk.asset_id] =\n                departments[desk.department] || '';\n        }\n        this.processDevices(devices, system_id);\n        this.timeout('update', () => this.updateStatus(), 100);\n    }\n\n    private updateStatus() {\n        const style_map = {};\n        const colours = this._settings.get('app.explore.colors') || {};\n        for (const desk_id in this._statuses) {\n            if (!this._statuses[desk_id]) continue;\n            style_map[`#${desk_id}`] = {\n                fill:\n                    colours[`desk-${this._statuses[desk_id]}`] ||\n                    colours[`${this._statuses[desk_id]}`] ||\n                    DEFAULT_COLOURS[`${this._statuses[desk_id]}`],\n            };\n        }\n        this._state.setStyles('desks', style_map);\n    }\n\n    private processDevices(devices: Record<string, any>[], system_id: string) {\n        const list = [];\n        for (const device of devices) {\n            const x = device.x / device.map_width;\n            const y = device.y / device.map_height;\n            list.push({\n                track_id: `device:hover:${x},${y}`,\n                location: {\n                    x: device.coordinates_from?.includes('right') ? 1 - x : x,\n                    y: device.coordinates_from?.includes('bottom') ? 1 - y : y,\n                },\n                content: ExploreDeviceInfoComponent,\n                z_index: 20,\n                data: { ...device, system: system_id },\n            });\n        }\n        this._state.setFeatures('devices', list);\n    }\n\n    private processDesks(desks: Desk[]) {\n        const list = [];\n        const actions = [];\n        const options = this._options.getValue();\n        for (const desk of desks) {\n            list.push({\n                track_id: `desk:hover:${desk.map_id || desk.id}`,\n                location: desk.id,\n                content: ExploreDeskInfoComponent,\n                full_size: true,\n                no_scale: true,\n                data: {\n                    id: desk.map_id || desk.id,\n                    map_id: desk.name,\n                    name: desk.name || desk.map_id,\n                    user: this._users[desk.map_id] || desk.staff_name,\n                    status: this._statuses[desk.map_id],\n                    department: this._departments[desk.map_id] || '',\n                },\n                z_index: 20,\n            });\n            if (!desk.bookable) continue;\n            let can_book = true;\n            const book_fn = async () => {\n                if (!can_book) return;\n                if (this._statuses[desk.id] !== 'free') {\n                    return notifyError(\n                        `${desk.name || 'Desk'} is unavailable at this time.`\n                    );\n                }\n                if (\n                    desk.groups?.length &&\n                    !desk.groups.find((_) => currentUser().groups.includes(_))\n                ) {\n                    return notifyError(\n                        `You are not allowed to book ${desk.name}.`\n                    );\n                }\n                this._bookings.newForm();\n                this._bookings.setOptions({ type: 'desk' });\n                if (options.date) {\n                    this._bookings.form.patchValue({\n                        date: options.date,\n                    });\n                    this._bookings.form.patchValue({\n                        all_day: !!options.all_day,\n                    });\n                }\n                let { date, duration, user } = await this._setBookingTime(\n                    this._bookings.form.value.date,\n                    this._bookings.form.value.duration,\n                    this._options.getValue()?.custom ?? false,\n                    desk as any\n                );\n                user = user || options.host || currentUser();\n                const user_email = user?.email;\n                this._bookings.form.patchValue({\n                    resources: [desk],\n                    asset_id: desk.id,\n                    asset_name: desk.name,\n                    date,\n                    duration: options.all_day ? 12 * 60 : duration,\n                    map_id: desk?.map_id || desk?.id,\n                    description: desk.name,\n                    user,\n                    user_email,\n                    booking_type: 'desk',\n                    zones: desk.zone\n                        ? [desk.zone?.parent_id, desk.zone?.id]\n                        : [],\n                });\n                await this._bookings.confirmPost().catch((e) => {\n                    console.log(e);\n                    notifyError(\n                        `Failed to book desk ${desk.name || desk.id}. ${\n                            e.message || e.error || e\n                        }`\n                    );\n                    throw e;\n                });\n                this._users[desk.map_id] = (\n                    options.host || currentUser()\n                )?.name;\n                notifySuccess(\n                    `Successfully booked desk ${desk.name || desk.id}`\n                );\n            };\n            ['mousedown', 'touchstart'].forEach((event) =>\n                actions.push({\n                    id: desk.id,\n                    action: event,\n                    priority: 10,\n                    callback: () => {\n                        can_book = true;\n                        this.timeout('booking', () => (can_book = false));\n                    },\n                })\n            );\n            ['mouseup', 'touchend'].forEach((event) =>\n                actions.push({\n                    id: desk.id,\n                    action: event,\n                    priority: 10,\n                    callback: book_fn,\n                })\n            );\n        }\n        this._state.setActions(\n            'desks',\n            this._options.getValue().enable_booking ? actions : []\n        );\n        this._state.setFeatures('desks', list);\n        this.timeout('update', () => this.updateStatus(), 100);\n    }\n\n    private async _setBookingTime(\n        date: number,\n        duration: number,\n        host: boolean = false,\n        resource: Desk = null\n    ) {\n        let user = null;\n        if (!!this._settings.get('app.desks.allow_time_changes')) {\n            const until = endOfDay(\n                addDays(\n                    Date.now(),\n                    this._settings.get('app.desks.available_period') || 90\n                )\n            );\n            const ref = this._dialog.open(SetDatetimeModalComponent, {\n                data: { date, duration, until, host, resource },\n            });\n            const details = await ref.afterClosed().toPromise();\n            if (!details) throw 'User cancelled';\n            date = details.date;\n            duration = details.duration;\n            user = details.user;\n        }\n        return { date, duration, user };\n    }\n}\n","import { Component, ElementRef, Inject, OnInit } from '@angular/core';\nimport { getModule } from '@placeos/ts-client';\nimport { differenceInMinutes, formatDistanceToNow } from 'date-fns';\nimport { Observable } from 'rxjs';\n\nimport { AsyncHandler, SettingsService } from '@placeos/common';\nimport { MAP_FEATURE_DATA } from 'libs/components/src/lib/interactive-map.component';\n\nexport interface DeviceInfoData {\n    mac: string;\n    variance: number;\n    last_seen: number;\n    system: string;\n    manufacturer?: string;\n    os?: string;\n    ssid?: string;\n    user?: any;\n    bg_color?: string;\n    zoom$?: Observable<number>;\n}\n\nconst EMPTY = [];\n\n@Component({\n    selector: '[explore-device-info]',\n    template: `\n        <div\n            name=\"radius\"\n            class=\"radius absolute center bg-info bg-opacity-25 border-8 border-dashed border-blue-600 rounded-full\"\n            [style]=\"'height: ' + diameter + '%; width: ' + diameter + '%;'\"\n        ></div>\n        <div\n            shadow\n            class=\"absolute center bg-neutral h-8 w-8 rounded-full\"\n        ></div>\n        <div\n            name=\"dot\"\n            #dot\n            class=\"h-3 w-3 absolute center rounded-full shadow border-2 border-white\"\n            [style.background-color]=\"bg_color\"\n        ></div>\n        <div\n            customTooltip\n            [content]=\"device_tooltip\"\n            [backdrop]=\"false\"\n            [xPosition]=\"x_pos\"\n            [yPosition]=\"y_pos\"\n            [hover]=\"true\"\n            (mouseenter)=\"loadUser()\"\n            class=\"absolute inset-0 pointer-events-auto\"\n        ></div>\n\n        <ng-template #device_tooltip>\n            <div\n                name=\"device-info\"\n                class=\"w-64 rounded bg-base-100 p-4 top-0 left-0 shadow pointer-events-none mx-2\"\n                (mouseleave)=\"close()\"\n            >\n                <div class=\"arrow\"></div>\n                <div class=\"details\">\n                    <p\n                        class=\"break-words\"\n                        *ngIf=\"mac && !hide_fields.includes('mac')\"\n                    >\n                        <label i18n>MAC:</label> {{ mac }}\n                    </p>\n                    <p><label i18n>Accuracy:</label> {{ variance }}m</p>\n                    <p><label i18n>Last Seen:</label> {{ last_seen }}</p>\n                    <p\n                        type\n                        *ngIf=\"\n                            manufacturer &&\n                            !hide_fields.includes('manufacturer')\n                        \"\n                    >\n                        <label i18n>Manufacturer:</label> {{ manufacturer }}\n                    </p>\n                    <p os *ngIf=\"os && !hide_fields.includes('os')\">\n                        <label i18n>OS:</label> {{ os }}\n                    </p>\n                    <p ssid *ngIf=\"ssid && !hide_fields.includes('ssid')\">\n                        <label i18n>SSID:</label> {{ ssid }}\n                    </p>\n                    <p\n                        username\n                        *ngIf=\"username && !hide_fields.includes('username')\"\n                    >\n                        <label i18n>Username:</label>\n                        {{ user?.name || user?.username || username }}\n                    </p>\n                    <p user *ngIf=\"user && !hide_fields.includes('user')\">\n                        <label i18n>Type:</label> {{ user.type }}\n                    </p>\n                </div>\n            </div>\n        </ng-template>\n    `,\n    styles: [\n        `\n            :host {\n                pointer-events: auto;\n            }\n\n            :host > [name='dot'] {\n                background-color: #616161;\n            }\n\n            :host:hover > [name='radius'] {\n                opacity: 1;\n            }\n\n            [name='radius'] {\n                opacity: 0;\n                transition: opacity 200ms;\n                pointer-events: none;\n            }\n        `,\n    ],\n})\nexport class ExploreDeviceInfoComponent extends AsyncHandler implements OnInit {\n    /** Name of the user associated with the mac address */\n    public username = '';\n    /** User details associated with device */\n    public readonly user = this._details.user;\n    /** Mac Address of the device */\n    public readonly mac = this._details.mac;\n    /** Mac Address of the device */\n    public readonly manufacturer = this._details.manufacturer;\n    /** Mac Address of the device */\n    public readonly os = this._details.os;\n    /** Mac Address of the device */\n    public readonly ssid = this._details.ssid;\n    /** Accuracy of the location data */\n    public readonly variance = this._details.variance?.toFixed(2);\n    /** Background color for the dot */\n    public readonly bg_color = this._details.bg_color || this.distance_color;\n\n    public zoom = 1;\n\n    public get hide_fields() {\n        return this._settings.get('app.explore.hide_device_fields') || EMPTY;\n    }\n\n    /** Time of the last update */\n    public get last_seen() {\n        return formatDistanceToNow((this._details.last_seen || 0) * 1000, {\n            addSuffix: true,\n        });\n    }\n\n    public y_pos: 'top' | 'bottom';\n\n    public x_pos: 'end' | 'start';\n    /** Diameter of the radius circle */\n    public get diameter() {\n        return this._details.variance * 100 * this.zoom;\n    }\n\n    public get distance() {\n        return Math.abs(\n            differenceInMinutes(\n                (this._details.last_seen || 0) * 1000,\n                new Date()\n            )\n        );\n    }\n\n    public get distance_color() {\n        return this.distance < 10\n            ? '#43a047'\n            : this.distance < 20\n            ? '#ffb300'\n            : '#e53935';\n    }\n\n    constructor(\n        @Inject(MAP_FEATURE_DATA) private _details: DeviceInfoData,\n        private _settings: SettingsService,\n        private _element: ElementRef<HTMLElement>\n    ) {\n        super();\n    }\n\n    public ngOnInit(tries: number = 0) {\n        if (tries > 10) return;\n        setTimeout(() => {\n            const parent =\n                this._element.nativeElement.parentElement?.parentElement;\n            if (!parent) return this.ngOnInit(++tries);\n            const position = {\n                y: parseInt(parent.style.top, 10) / 100,\n                x: parseInt(parent.style.left, 10) / 100,\n            };\n            this.y_pos = position.y >= 0.5 ? 'bottom' : 'top';\n            this.x_pos = position.x >= 0.5 ? 'end' : 'start';\n            this.subscription(\n                'zoom',\n                this._details.zoom$.subscribe((_) => (this.zoom = _))\n            );\n        }, 200);\n    }\n\n    public async loadUser() {\n        if (this.username) return;\n        const mod = getModule(this._details.system, 'LocationServices');\n        if (!mod) return;\n        this.username = 'Loading...';\n        const details = await mod\n            .execute('check_ownership_of', [this.mac])\n            .catch((_) => null);\n        this.username =\n            details && details.assigned_to ? details.assigned_to : '';\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { LockersService } from 'libs/bookings/src/lib/lockers.service';\nimport { ExploreStateService } from './explore-state.service';\nimport { AsyncHandler, SettingsService, unique } from '@placeos/common';\nimport { filter, map } from 'rxjs/operators';\nimport { BehaviorSubject, combineLatest, of } from 'rxjs';\nimport { getModule } from '@placeos/ts-client';\nimport { OrganisationService } from '@placeos/organisation';\nimport { ExploreLockerBankInfoComponent } from './explore-locker-bank-info.component';\nimport { DEFAULT_COLOURS } from './explore-spaces.service';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ExploreLockersService extends AsyncHandler {\n    private _status = new BehaviorSubject([]);\n    public readonly lockers$ = this._lockers.filtered_lockers$;\n    public readonly status = combineLatest([\n        this._explore.level,\n        this._explore.options,\n        this._org.active_building,\n    ]).pipe(\n        map(([lvl, { is_public }]) => {\n            if (!lvl || is_public) return [];\n            const sys_id = this._org.binding('area_management');\n            if (!sys_id) return of({});\n            let binding = getModule(sys_id, 'AreaManagement').binding(lvl.id);\n            this.subscription(\n                `lvl-in_use`,\n                binding\n                    .listen()\n                    .subscribe((data) =>\n                        this._status.next(\n                            data?.value?.filter(\n                                (_) => _.location === 'locker'\n                            ) || []\n                        )\n                    )\n            );\n            this.subscription('lvl-in_use_bind', binding.bind());\n        })\n    );\n\n    public readonly locker_status = combineLatest([\n        this._explore.level,\n        this._lockers.lockers_banks$,\n        this.lockers$,\n        this._status,\n    ]).pipe(\n        map(([lvl, locker_banks, lockers, status]) => {\n            if (!lvl) return [];\n            const features = [];\n            const map_status = {};\n            const colours = this._settings.get('app.explore.colors') || {};\n            const banks = unique(\n                locker_banks\n                    .filter((_) => _.level_id === lvl.id)\n                    .map((_) => _.id)\n            );\n            for (const bank of banks) {\n                const bank_lockers = lockers.filter((_) => _.bank_id === bank);\n                let in_use_count = 0;\n                for (const locker of bank_lockers) {\n                    const in_use = status.find(\n                        (_) => _.locker_id === locker.id && _.allocated\n                    );\n                    in_use_count += in_use ? 1 : 0;\n                }\n                const bank_info = locker_banks.find((_) => _.id === bank);\n                features.push({\n                    location: bank_info.map_id,\n                    content: ExploreLockerBankInfoComponent,\n                    full_size: true,\n                    no_scale: true,\n                    z_index: 20,\n                    data: {\n                        bank: bank_info,\n                        lockers,\n                        in_use_count,\n                        locker_count: bank_lockers.length,\n                        system: this._org.binding('area_management'),\n                    },\n                });\n                const in_use_percent = in_use_count / bank_lockers.length;\n                const value =\n                    in_use_percent > 0.8\n                        ? 'busy'\n                        : in_use_percent > 0.3\n                        ? 'pending'\n                        : 'free';\n                map_status[`#${bank_info.map_id}`] = {\n                    fill:\n                        colours[`lockers-${value}`] ||\n                        colours[`${value}`] ||\n                        DEFAULT_COLOURS[`${value}`],\n                };\n            }\n            this._explore.setStyles('lockers', map_status);\n            this._explore.setFeatures('lockers', features);\n        })\n    );\n\n    constructor(\n        private _lockers: LockersService,\n        private _explore: ExploreStateService,\n        private _org: OrganisationService,\n        private _settings: SettingsService\n    ) {\n        super();\n        this.subscription(\n            'level',\n            this._explore.level\n                .pipe(filter((_) => !!_))\n                .subscribe((level) => this._lockers.setLevel(level.id))\n        );\n        this.subscription('status', this.status.subscribe());\n        this.subscription('locker_status', this.locker_status.subscribe());\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AsyncHandler } from '@placeos/common';\nimport { first, map } from 'rxjs/operators';\n\nimport { OrganisationService } from 'libs/organisation/src/lib/organisation.service';\nimport { ExploreStateService } from './explore-state.service';\n\n@Component({\n    selector: 'explore-map-controls',\n    template: `\n        <div class=\"flex space-x-2 w-full\">\n            <mat-form-field\n                overlay\n                buildings\n                class=\"flex-1 min-w-[10.5rem] no-subscript\"\n                has-bld=\"true\"\n                *ngIf=\"(buildings | async)?.length > 1\"\n                appearance=\"outline\"\n            >\n                <mat-select\n                    placeholder=\"Select Building...\"\n                    i18n-placeholder\n                    [ngModel]=\"building | async\"\n                    (ngModelChange)=\"setBuilding($event)\"\n                >\n                    <mat-option\n                        *ngFor=\"let bld of buildings | async\"\n                        [value]=\"bld\"\n                    >\n                        {{ bld.display_name || bld.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field\n                overlay\n                levels\n                class=\"flex-1 min-w-[10.25rem] no-subscript\"\n                [attr.has-bld]=\"(buildings | async)?.length > 1\"\n                *ngIf=\"(levels | async)?.length\"\n                appearance=\"outline\"\n            >\n                <mat-select\n                    placeholder=\"Select Level...\"\n                    i18n-placeholder\n                    [ngModel]=\"level | async\"\n                    (ngModelChange)=\"setLevel($event)\"\n                >\n                    <mat-option\n                        *ngFor=\"let lvl of levels | async\"\n                        [value]=\"lvl\"\n                    >\n                        {{ lvl.display_name || lvl.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n        </div>\n    `,\n    styles: [\n        `\n            mat-form-field[has-bld='true'] {\n                max-width: calc(50vw - 2.5rem);\n            }\n\n            :host[full] mat-form-field {\n                max-width: calc(50% - 2.5rem);\n            }\n        `,\n    ],\n})\nexport class ExploreMapControlComponent extends AsyncHandler implements OnInit {\n    /** List of available buildings */\n    public readonly buildings = this._org.active_buildings;\n    /** Currently active building */\n    public readonly building = this._org.active_building;\n    /** List of availabel levels */\n    public readonly levels = this._org.active_levels;\n    /** Currently active level */\n    public readonly level = this._state.level;\n    /** Set the currently active level */\n    public readonly setLevel = (lvl) => {\n        this._state.setFeatures('_located', []);\n        this.timeout(\n            'set_level',\n            () =>\n                this._router.navigate([], {\n                    relativeTo: this._route,\n                    queryParams: { zone: lvl.id },\n                }),\n            201\n        );\n    };\n    /** Set the currenly active building */\n    public readonly setBuilding = (bld) => (this._org.building = bld);\n\n    constructor(\n        private _org: OrganisationService,\n        private _state: ExploreStateService,\n        private _router: Router,\n        private _route: ActivatedRoute\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe((params) =>\n                params.has('zone')\n                    ? this._state.setLevel(params.get('zone'))\n                    : ''\n            )\n        );\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { getModule } from '@placeos/ts-client';\nimport { Point } from '@placeos/svg-viewer';\nimport { first, take } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\nimport {\n    AsyncHandler,\n    notifyError,\n    SettingsService,\n    unique,\n} from '@placeos/common';\nimport { MapLocation, showStaff, User } from '@placeos/users';\n\nimport { SpacesService } from 'libs/spaces/src/lib/spaces.service';\nimport { MapPinComponent } from 'libs/components/src/lib/map-pin.component';\nimport { MapRadiusComponent } from 'libs/components/src/lib/map-radius.component';\nimport { OrganisationService } from 'libs/organisation/src/lib/organisation.service';\nimport { SpacePipe } from 'libs/spaces/src/lib/space.pipe';\nimport { ExploreStateService } from './explore-state.service';\nimport { ExploreSpacesService } from './explore-spaces.service';\nimport { ExploreZonesService } from './explore-zones.service';\nimport { ExploreDesksService } from './explore-desks.service';\nimport { ExploreParkingService } from './explore-parking.service';\nimport { ExploreLockersService } from './explore-lockers.service';\nimport { MapsPeopleService } from 'libs/common/src/lib/mapspeople.service';\n\nconst EMPTY = [];\n\n@Component({\n    selector: 'explore-map-view',\n    template: `\n        <interactive-map\n            [src]=\"url | async\"\n            [styles]=\"styles | async\"\n            [features]=\"features | async\"\n            [actions]=\"actions | async\"\n            [labels]=\"labels | async\"\n            [focus]=\"locate\"\n            [options]=\"{ controls: true }\"\n        ></interactive-map>\n        <div\n            *ngIf=\"!(use_mapsindoors$ | async)\"\n            controls\n            class=\"absolute top-2 left-2 max-w-[calc(100vw-1rem)] bg-base-100 border border-base-200 rounded p-2 space-y-2 overflow-hidden\"\n        >\n            <explore-map-controls></explore-map-controls>\n            <div class=\"flex items-center space-x-2\" *ngIf=\"!hide_zones\">\n                <mat-slide-toggle\n                    name=\"zones\"\n                    class=\"ml-2\"\n                    [ngModel]=\"!(options | async)?.disable?.includes('zones')\"\n                    (ngModelChange)=\"toggleZones($event)\"\n                ></mat-slide-toggle>\n                <label for=\"zones\" class=\"mb-0\" i18n>Zones</label>\n            </div>\n        </div>\n        <div\n            legend\n            *ngIf=\"show_legend && legend.length\"\n            class=\"absolute bottom-2 left-2 p-2 rounded bg-base-100 border border-base-200\"\n        >\n            <h3 class=\"mb-2 font-medium\" i18n>Legend</h3>\n            <div\n                class=\"flex items-center space-x-2\"\n                *ngFor=\"let pair of legend\"\n            >\n                <div\n                    class=\"w-3 h-3 rounded-full border border-base-200\"\n                    [style.background-color]=\"pair[1]\"\n                ></div>\n                <div class=\"text-sm\">{{ pair[0] }}</div>\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                height: 100%;\n                width: 100%;\n            }\n\n            [zones] {\n                top: 3.5rem;\n            }\n        `,\n    ],\n    providers: [\n        ExploreDesksService,\n        ExploreSpacesService,\n        ExploreZonesService,\n        ExploreParkingService,\n        ExploreLockersService,\n        SpacePipe,\n    ],\n})\nexport class ExploreMapViewComponent extends AsyncHandler implements OnInit {\n    /** Observable for the active map */\n    public readonly url = this._state.map_url;\n    /** Observable for the active map */\n    public readonly styles = this._state.map_styles;\n    /** Observable for the active map */\n    public readonly positions = this._state.map_positions;\n    /** Observable for the active map */\n    public readonly features = this._state.map_features;\n    /** Observable for the active map */\n    public readonly actions = this._state.map_actions;\n    /** Observable for the labels map */\n    public readonly labels = this._state.map_labels;\n    /** Observable for the active map */\n    public readonly options = this._state.options;\n    /** Observable for user messages */\n    public readonly message = this._state.message;\n\n    public readonly setOptions = (o) => this._state.setOptions(o);\n\n    public locate = '';\n\n    public async toggleZones(enabled: boolean) {\n        const options = await this.options.pipe(take(1)).toPromise();\n        const disable = !enabled\n            ? unique([...(options.disable || []), 'zones', 'devices'])\n            : options.disable?.filter(\n                  (_) => _ !== 'zones' && _ !== 'devices'\n              ) || [];\n        this.setOptions({ disable });\n    }\n\n    public get show_legend() {\n        return !!this._settings.get('app.explore.show_legend');\n    }\n\n    public get hide_zones() {\n        return !!this._settings.get('app.explore.hide_zones');\n    }\n\n    public get legend(): [string, string][] {\n        return this._settings.get('app.explore.legend') || EMPTY;\n    }\n\n    public readonly use_mapsindoors$: Observable<boolean> =\n        this._maps.available$;\n\n    constructor(\n        private _state: ExploreStateService,\n        private _s: ExploreSpacesService,\n        private _desks: ExploreDesksService,\n        private _zones: ExploreZonesService,\n        private _parking: ExploreParkingService,\n        private _lockers: ExploreLockersService,\n        private _route: ActivatedRoute,\n        private _router: Router,\n        private _spaces: SpacesService,\n        private _org: OrganisationService,\n        private _settings: SettingsService,\n        private _space_pipe: SpacePipe,\n        private _maps: MapsPeopleService\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        this._state.reset();\n        await this._spaces.initialised.pipe(first((_) => _)).toPromise();\n        this.toggleZones(false);\n        this.subscription('parking_poll', this._parking.startPolling());\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe(async (params) => {\n                if (params.has('level') || params.has('zone')) {\n                    this._state.setLevel(\n                        params.get('level') || params.get('zone')\n                    );\n                }\n                this._state.setFeatures('_located', []);\n                if (params.has('space')) {\n                    this.locateSpace(params.get('space'));\n                } else if (params.has('user')) {\n                    let user = this._settings.value('last_search');\n                    if (!user || params.get('user') !== user.email) {\n                        user = null;\n                        user = await showStaff(params.get('user')).toPromise();\n                    }\n                    if (!user)\n                        return notifyError(\n                            `Unable to user details for ${params.get('user')}`\n                        );\n                    this.locateUser(\n                        user instanceof Array ? user[0] : user\n                    ).catch((_) => {\n                        notifyError(`Unable to locate ${params.get('user')}`);\n                        this._router.navigate([], {\n                            relativeTo: this._route,\n                            queryParams: {},\n                        });\n                    });\n                } else if (params.has('locate')) {\n                    this._locateFeature(\n                        params.get('locate'),\n                        params.get('name')\n                    );\n                } else {\n                    this.timeout('update_location', () => {\n                        this._state.setFeatures('_located', []);\n                    });\n                }\n            })\n        );\n    }\n\n    public updateZoom(zoom: number) {\n        this._state.setPositions(zoom, this._state.positions.center);\n    }\n\n    public updateCenter(center: Point) {\n        this._state.setPositions(this._state.positions.zoom, center);\n    }\n\n    private _locateFeature(id: string, name = '') {\n        const has_coordinates = id.includes(',');\n        const parts = id.split(',');\n        const feature: any = {\n            track_id: `locate-${id}`,\n            location: has_coordinates\n                ? { x: parseFloat(parts[0]), y: parseFloat(parts[1]) }\n                : id,\n            content: MapPinComponent,\n            z_index: 99,\n            data: { message: name },\n        };\n        this.locate = id;\n        this.timeout('update_location', () =>\n            this._state.setFeatures('_located', [feature])\n        );\n    }\n\n    private async locateSpace(id: string) {\n        const space = await this._space_pipe.transform(id);\n        if (!space) return notifyError('Unable to load space details.');\n        this._state.setLevel(this._org.levelWithID(space.zones)?.id);\n        const feature: any = {\n            track_id: `locate-${space.id}`,\n            location: space.map_id,\n            content: MapPinComponent,\n            z_index: 99,\n            data: {\n                message: `${space.display_name || space.name} is here`,\n            },\n        };\n        this.timeout('update_location', () =>\n            this._state.setFeatures('_located', [feature])\n        );\n    }\n\n    private async locateUser(user: User) {\n        let locate_details: any = this._org.binding('location_services');\n        if (!locate_details)\n            throw 'Location services is not setup for this application.';\n        if (typeof locate_details === 'string') {\n            locate_details = {\n                system_id: locate_details,\n                module: 'LocationServices',\n                priority: [],\n            };\n        }\n        const mod = getModule(locate_details.system_id, locate_details.module);\n        const locations: MapLocation[] = (\n            await mod.execute('locate_user', [\n                user.email,\n                user.username || user.id,\n            ])\n        ).map((i) => new MapLocation(i));\n        locations.sort(\n            (a, b) =>\n                locate_details.priority.indexOf(a.type) -\n                locate_details.priority.indexOf(b.type)\n        );\n        if (!locations?.length) {\n            throw 'No locations for the given user';\n        }\n        this._state.setLevel(this._org.levelWithID([locations[0]?.level])?.id);\n        const pos: any = locations[0].position;\n        const { coordinates_from } = locations[0];\n        const feature: any = {\n            track_id: `locate-${user.id}`,\n            location:\n                locations[0].type === 'wireless'\n                    ? {\n                          x: coordinates_from?.includes('right')\n                              ? 1 - pos.x\n                              : pos.x,\n                          y: coordinates_from?.includes('bottom')\n                              ? 1 - pos.y\n                              : pos.y,\n                      }\n                    : pos,\n            content:\n                locations[0].type === 'wireless'\n                    ? MapRadiusComponent\n                    : MapPinComponent,\n            z_index: 99,\n            data: {\n                message: `${user.name} is here`,\n                radius: locations[0].variance,\n                last_seen: locations[0].last_seen,\n            },\n        };\n        this.timeout('update_location', () => {\n            this._state.setFeatures('_located', [feature]);\n        });\n    }\n}\n","import { Component, ElementRef, Inject } from '@angular/core';\nimport { SettingsService } from '@placeos/common';\nimport { MAP_FEATURE_DATA } from '@placeos/components';\nimport { ParkingSpace } from 'libs/bookings/src/lib/parking.service';\nimport { User } from 'libs/users/src/lib/user.class';\n\ninterface ParkingSpaceExtended extends ParkingSpace {\n    user: string;\n    status: string;\n    plate_number: string;\n}\n\n@Component({\n    selector: 'explore-parking-info',\n    template: `\n        <div\n            class=\"absolute bg-base-300 p-2 rounded-lg !rounded-tl-none shadow top-1/2 left-1/2 text-left\"\n            [class.!bg-error]=\"status === 'busy'\"\n            [class.!text-error-content]=\"status === 'busy'\"\n            [class.!bg-warning]=\"status === 'reserved'\"\n            [class.!text-warning-content]=\"status === 'reserved'\"\n            [class.!bg-success]=\"status === 'free'\"\n            [class.!text-success-content]=\"status === 'free'\"\n        >\n            <div class=\"absolute top-0.5 left-0.5 triangle\"></div>\n            <div class=\"flex space-x-2\">\n                <div class=\"flex flex-col leading-tight min-w-24 pl-1\">\n                    <div class=\"whitespace-nowrap\">{{ name }}</div>\n                    <div class=\"capitalize text-sm font-medium\">\n                        {{ status }}\n                    </div>\n                </div>\n                <div\n                    class=\"flex flex-col relative h-full px-2 rounded bg-base-100 text-base-content shadow leading-tight\"\n                    *ngIf=\"is_concierge && plate_number\"\n                >\n                    <div\n                        class=\"text-[0.625rem] w-full text-center pt-1 whitespace-nowrap font-medium\"\n                    >\n                        Plate Number\n                    </div>\n                    <div class=\"font-mono pb-1 w-full text-center\">\n                        {{ plate_number || 'ABC3' }}\n                    </div>\n                </div>\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            .triangle {\n                width: 0px;\n                height: 0px;\n                border-style: solid;\n                border-width: 0.5rem 0.5rem 0 0;\n                border-color: currentColor transparent transparent transparent;\n                transform: rotate(0deg);\n            }\n        `,\n    ],\n})\nexport class ExploreParkingInfoComponent {\n    public readonly status =\n        this._data.assigned_to === this._data.user\n            ? 'reserved'\n            : this._data.status;\n    public readonly user = this._data.user;\n    public readonly name = this._data.name;\n    public readonly map_id = this._data.map_id;\n    public readonly plate_number = this._data.plate_number;\n\n    public get is_concierge() {\n        return this._settings.app_name.toLowerCase().includes('concierge');\n    }\n\n    constructor(\n        @Inject(MAP_FEATURE_DATA) private _data: ParkingSpaceExtended,\n        private _element: ElementRef<HTMLDivElement>,\n        private _settings: SettingsService\n    ) {}\n}\n","import { Injectable } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport {\n    AsyncHandler,\n    currentUser,\n    flatten,\n    notifyError,\n    notifySuccess,\n    SettingsService,\n} from '@placeos/common';\nimport { StaffUser } from '@placeos/users';\nimport { PlaceZone, showMetadata } from '@placeos/ts-client';\nimport {\n    addDays,\n    endOfDay,\n    endOfMinute,\n    getUnixTime,\n    isSameDay,\n    startOfDay,\n    startOfMinute,\n} from 'date-fns';\nimport { BehaviorSubject, combineLatest, forkJoin, Observable, of } from 'rxjs';\nimport { map, shareReplay, switchMap, take } from 'rxjs/operators';\n\nimport { OrganisationService } from 'libs/organisation/src/lib/organisation.service';\nimport { queryBookings } from 'libs/bookings/src/lib/bookings.fn';\nimport { ExploreStateService } from './explore-state.service';\nimport { DEFAULT_COLOURS } from './explore-spaces.service';\nimport { BookingFormService } from 'libs/bookings/src/lib/booking-form.service';\nimport { SetDatetimeModalComponent } from './set-datetime-modal.component';\nimport { ExploreParkingInfoComponent } from './explore-parking-info.component';\nimport { ParkingService } from 'libs/bookings/src/lib/parking.service';\n\nexport interface ParkingSpace {\n    id: string;\n    map_id: string;\n    name: string;\n    notes: string;\n    assigned_to: string;\n    zone_id?: string;\n    zone?: PlaceZone;\n    groups?: string[];\n}\n\nexport interface ParkingOptions {\n    enable_booking?: boolean;\n    date?: number;\n    all_day?: boolean;\n    zones?: string[];\n    host?: StaffUser;\n    custom?: boolean;\n    use_api?: boolean;\n    user?: string;\n}\n\n@Injectable()\nexport class ExploreParkingService extends AsyncHandler {\n    private _options = new BehaviorSubject<ParkingOptions>({});\n    private _poll = new BehaviorSubject<number>(0);\n\n    public readonly options = this._options.asObservable();\n    public on_book: (ParkingSpace) => void = null;\n\n    /** List of available parking levels for the active building */\n    public readonly levels = this._org.active_levels.pipe(\n        map((l) => l.filter((_) => _.tags.includes('parking')))\n    );\n\n    /** List of current bookings for the current building */\n    public readonly events = combineLatest([\n        this._org.active_building,\n        this._options,\n        this._poll,\n        this._state.options,\n    ]).pipe(\n        switchMap(([bld, _, __, { is_public }]) =>\n            is_public\n                ? of([])\n                : queryBookings({\n                      period_start: getUnixTime(\n                          startOfMinute(_.date || Date.now())\n                      ),\n                      period_end: getUnixTime(\n                          endOfMinute(_.date || Date.now())\n                      ),\n                      type: 'parking',\n                      zones: bld?.id,\n                  })\n        ),\n        shareReplay(1)\n    );\n    /** Any event that the selected user has for the current date */\n    public readonly user_events = combineLatest([this._options]).pipe(\n        switchMap(([_]) =>\n            queryBookings({\n                period_start: getUnixTime(startOfDay(_.date || Date.now())),\n                period_end: getUnixTime(endOfDay(_.date || Date.now())),\n                type: 'parking',\n                email: _?.user || currentUser()?.email,\n            })\n        ),\n        shareReplay(1)\n    );\n\n    /** List of parking spaces for the active building */\n    public readonly spaces: Observable<ParkingSpace[]> = this.levels.pipe(\n        switchMap((_) =>\n            forkJoin(\n                _.map((l) =>\n                    showMetadata(l.id, 'parking-spaces').pipe(\n                        map((d) =>\n                            (d.details instanceof Array ? d.details : []).map(\n                                (s) => ({ ...s, zone_id: l.id })\n                            )\n                        )\n                    )\n                )\n            )\n        ),\n        map((_) => flatten(_)),\n        shareReplay(1)\n    );\n\n    public readonly active_spaces = combineLatest([\n        this.spaces,\n        this._state.level,\n    ]).pipe(\n        map(([spaces, level]) => spaces.filter((_) => _.zone_id === level.id))\n    );\n\n    private _users: Record<string, string> = {};\n    private _plate_numbers: Record<string, string> = {};\n\n    /** Available parking spaces for the current level and date */\n    public readonly available_spaces = combineLatest([\n        this.events,\n        this.active_spaces,\n        this._parking.users,\n    ]).pipe(\n        map(([events, spaces, users]) => {\n            const available = spaces.filter((_) => {\n                const event = events.find((e) => e.asset_id === _.id);\n                const assigned = `${\n                    event?.user_email || _.assigned_to || ''\n                }`.toLowerCase();\n                const user = users.find(\n                    (u) => u.email.toLowerCase() === assigned.toLowerCase()\n                );\n                this._users[_.id] = assigned;\n                this._plate_numbers[_.id] = user?.plate_number || undefined;\n                return !assigned;\n            });\n            this._updateParkingSpaces(spaces, available);\n            return available;\n        })\n    );\n\n    constructor(\n        private _org: OrganisationService,\n        private _state: ExploreStateService,\n        private _settings: SettingsService,\n        private _bookings: BookingFormService,\n        private _parking: ParkingService,\n        private _dialog: MatDialog\n    ) {\n        super();\n        this.subscription('spaces', this.available_spaces.subscribe());\n        this.setOptions({\n            enable_booking:\n                this._settings.get('app.parking.enable_maps') !== false,\n        });\n    }\n\n    public startPolling() {\n        this.interval('poll', () => this._poll.next(Date.now()), 10 * 1000);\n        this._poll.next(Date.now());\n        return () => this.stopPolling();\n    }\n\n    public stopPolling() {\n        this.clearInterval('poll');\n    }\n\n    public setOptions(options: Partial<ParkingOptions>) {\n        this._options.next({ ...this._options.getValue(), ...options });\n    }\n\n    private async _updateParkingSpaces(\n        spaces: ParkingSpace[],\n        available: ParkingSpace[]\n    ) {\n        const styles = {};\n        const features = [];\n        const actions = [];\n        const colours = this._settings.get('app.explore.colors') || {};\n        const options = this._options.getValue();\n        const assigned_space = await this._parking.assigned_space\n            .pipe(take(1))\n            .toPromise();\n        const deny_parking_access = await this._parking.deny_parking_access\n            .pipe(take(1))\n            .toPromise();\n        const booked_space = await this._parking.booked_space\n            .pipe(take(1))\n            .toPromise();\n        for (const space of spaces) {\n            const can_book = !!available.find((_) => _.id === space.id);\n            const status = can_book ? 'free' : 'busy';\n            styles[`#${space.map_id}`] = {\n                fill:\n                    colours[`parking-${status}`] ||\n                    colours[`${status}`] ||\n                    DEFAULT_COLOURS[`${status}`],\n                opacity: 0.6,\n            };\n            features.push({\n                location: `${space.map_id}`,\n                content: ExploreParkingInfoComponent,\n                z_index: 20,\n                hover: true,\n                data: {\n                    ...space,\n                    user: this._users[space.id],\n                    plate_number: this._plate_numbers[space.id],\n                    status,\n                },\n            });\n            if (!can_book) continue;\n            const book_fn = async () => {\n                if (this.on_book) return this.on_book(space);\n                if (deny_parking_access) {\n                    return notifyError(\n                        `Your user account has been denied parking access to ${\n                            space.zone?.display_name || space.zone?.name\n                        }.`\n                    );\n                }\n                if (assigned_space) {\n                    return notifyError(\n                        `You are already assigned to parking space \"${\n                            space.name || space.id\n                        }\".`\n                    );\n                }\n                if (booked_space?.find((_) => _.id === space.id)) {\n                    return notifyError(\n                        `You already have a parking space booked for the selected time.`\n                    );\n                }\n                if (status !== 'free') {\n                    return notifyError(\n                        `${\n                            space.name || 'Parking Space'\n                        } is unavailable at this time.`\n                    );\n                }\n                if (\n                    space.groups?.length &&\n                    !space.groups.find((_) => currentUser().groups.includes(_))\n                ) {\n                    return notifyError(\n                        `You are not allowed to book ${space.name}.`\n                    );\n                }\n                this._bookings.newForm();\n                this._bookings.setOptions({ type: 'parking' });\n                if (options.date) {\n                    this._bookings.form.patchValue({\n                        date: options.date,\n                    });\n                    this._bookings.form.patchValue({\n                        all_day: !!options.all_day,\n                    });\n                }\n                let { date, duration, user } = await this._setBookingTime(\n                    this._bookings.form.value.date,\n                    this._bookings.form.value.duration,\n                    this._options.getValue()?.custom ?? false,\n                    space as any\n                );\n                user = user || options.host || currentUser();\n                const user_email = user?.email;\n                const lvl = this._state.active_level;\n                this._bookings.form.patchValue({\n                    resources: [space],\n                    asset_id: space.id,\n                    asset_name: space.name,\n                    date,\n                    duration: options.all_day ? 12 * 60 : duration,\n                    map_id: space?.map_id || space?.id,\n                    description: space.name,\n                    user,\n                    user_email,\n                    booking_type: 'parking',\n                    zones: space.zone\n                        ? [space.zone?.parent_id, space.zone?.id]\n                        : [lvl.parent_id, lvl.id],\n                });\n                await this._bookings.confirmPost().catch((e) => {\n                    if (e === 'User cancelled') throw e;\n                    notifyError(\n                        `Failed to book parking space ${\n                            space.name || space.id\n                        }. ${e.message || e.error || e}`\n                    );\n                    throw e;\n                });\n                notifySuccess(\n                    `Successfully booked parking space ${\n                        space.name || space.id\n                    }`\n                );\n            };\n            actions.push({\n                id: space?.map_id || space?.id,\n                action: 'click',\n                priority: 10,\n                callback: book_fn,\n            });\n        }\n        this._state.setActions(\n            'parking',\n            options.enable_booking ? actions : []\n        );\n        this._state.setStyles('parking', styles);\n        this._state.setFeatures('parking', features);\n    }\n\n    private async _setBookingTime(\n        date: number,\n        duration: number,\n        host: boolean = false,\n        resource: any = null\n    ) {\n        let user = null;\n        if (!!this._settings.get('app.parking.allow_time_changes')) {\n            const until = endOfDay(\n                addDays(\n                    Date.now(),\n                    this._settings.get('app.parking.available_period') || 90\n                )\n            );\n            const ref = this._dialog.open(SetDatetimeModalComponent, {\n                data: { date, duration, until, host, resource },\n            });\n            const details = await ref.afterClosed().toPromise();\n            if (!details) throw 'User cancelled';\n            date = details.date;\n            duration = details.duration;\n            user = details.user;\n        }\n        return { date, duration, user };\n    }\n}\n","import { Component, ElementRef, HostListener, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AsyncHandler } from '@placeos/common';\n\nimport { ExploreSearchService, SearchResult } from './explore-search.service';\nimport { OrganisationService } from '@placeos/organisation';\n\n@Component({\n    selector: 'explore-search',\n    template: `\n        <button\n            #button\n            icon\n            matRipple\n            class=\"bg-base-200 m-2\"\n            (window:resize)=\"checkButtonPosition()\"\n            (click)=\"show ? closeSearch($event) : showSearch()\"\n        >\n            <app-icon>{{ show || search_str ? 'close' : 'search' }}</app-icon>\n        </button>\n        <div\n            role=\"search\"\n            tabindex=\"0\"\n            matRipple\n            class=\"absolute top-1/2 -translate-y-1/2 bg-base-100 flex items-center z-10 overflow-hidden outline-none px-4 max-w-[calc(100vw-7rem)]\"\n            [class.right-0]=\"right_size\"\n            [class.-translate-x-14]=\"right_size\"\n            [class.left-0]=\"!right_size\"\n            [class.translate-x-14]=\"!right_size\"\n            [class.show]=\"show || search_str\"\n            (click)=\"focusInput()\"\n            matAutocompleteOrigin\n            #origin=\"matAutocompleteOrigin\"\n        >\n            <input\n                #input\n                keyboard\n                class=\"flex-1 text-base border-none outline-none\"\n                [(ngModel)]=\"search_str\"\n                (ngModelChange)=\"setItem($event)\"\n                placeholder=\"Search for...\"\n                i18n-placeholder\n                (blur)=\"show = !!search_str\"\n                [matAutocomplete]=\"auto\"\n                [matAutocompleteConnectedTo]=\"origin\"\n            />\n            <mat-spinner\n                *ngIf=\"loading | async\"\n                class=\"mr-2\"\n                [diameter]=\"32\"\n            ></mat-spinner>\n        </div>\n        <mat-autocomplete #auto=\"matAutocomplete\">\n            <ng-container\n                *ngIf=\"(loading | async) !== true && (show || search_str)\"\n            >\n                <mat-option\n                    *ngIf=\"!(results | async)?.length\"\n                    class=\"pointer-events-none\"\n                    i18n\n                >\n                    No matches found\n                </mat-option>\n                <mat-option\n                    *ngFor=\"let option of results | async | slice: 0:5\"\n                    [value]=\"option\"\n                >\n                    <div\n                        class=\"flex items-center leading-tight w-[22rem] max-w-[calc(100vw-2rem)]\"\n                    >\n                        <div class=\"flex-1 w-1/2 overflow-hidden\">\n                            <div class=\"truncate w-full\">{{ option.name }}</div>\n                            <div class=\"text-xs\">{{ option.description }}</div>\n                        </div>\n                        <div\n                            class=\"text-xs font-bold p-2 capitalize text-white bg-base-300 rounded\"\n                        >\n                            {{ option.type }}\n                        </div>\n                    </div>\n                </mat-option>\n            </ng-container>\n        </mat-autocomplete>\n    `,\n    styles: [\n        `\n            :host {\n                z-index: 99;\n                position: relative;\n            }\n\n            [role='search'] {\n                height: 3rem;\n                width: 0;\n                border-radius: 1.5rem;\n                border: 1px solid var(--b3);\n                transition: width 200ms opacity 200ms;\n                opacity: 0;\n                pointer-events: none;\n            }\n\n            [role='search'].show {\n                width: 24rem;\n                opacity: 1;\n                pointer-events: auto;\n            }\n        `,\n    ],\n})\nexport class ExploreSearchComponent extends AsyncHandler {\n    public show = false;\n    public search_str = '';\n    public right_size = false;\n    public readonly results = this._search.search_results;\n    public readonly loading = this._search.loading;\n    public readonly setFilter = (s) => this._search.setFilter(s);\n    public readonly setItem = (i) =>\n        i instanceof Object ? this.select(i) : this.setFilter(i);\n\n    @ViewChild('input') private _input_el: ElementRef<HTMLInputElement>;\n    @ViewChild('button', { static: true })\n    private _button_el: ElementRef<HTMLButtonElement>;\n\n    @HostListener('document:click', ['$event'])\n    public checkClick(event) {\n        if (!this._el?.nativeElement?.contains(event.target)) {\n            this.show = false;\n            this._input_el?.nativeElement?.blur();\n        }\n    }\n\n    @HostListener('document:touchstart', ['$event']) public onTouch = (e) =>\n        this.checkClick(e);\n\n    constructor(\n        private _el: ElementRef<HTMLElement>,\n        private _search: ExploreSearchService,\n        private _router: Router,\n        private _route: ActivatedRoute\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.checkButtonPosition();\n    }\n\n    public focusInput() {\n        if (this._input_el?.nativeElement) {\n            this.timeout(\n                'focus',\n                () => this._input_el.nativeElement.focus(),\n                300\n            );\n        }\n    }\n\n    public showSearch() {\n        this.show = true;\n        this.focusInput();\n    }\n\n    public closeSearch(e?: any) {\n        this.show = false;\n        this.search_str = '';\n        this.setFilter('');\n        if (this._input_el?.nativeElement) {\n            this._input_el.nativeElement.focus();\n            this._input_el.nativeElement.blur();\n        }\n    }\n\n    public select(item: SearchResult) {\n        this.search_str = item.name;\n        const query: any = {};\n        const type =\n            item.type === 'space'\n                ? 'space'\n                : item.type === 'feature'\n                ? 'feature'\n                : 'user';\n        query[type] = item.id;\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: query,\n        });\n    }\n\n    public checkButtonPosition() {\n        const window_width = window.innerWidth;\n        const button_rect =\n            this._button_el.nativeElement.getBoundingClientRect();\n        const x_center = button_rect.left + button_rect.width / 2;\n        this.right_size = x_center > window_width / 2;\n    }\n}\n","import { Injectable } from '@angular/core';\nimport {\n    PlaceZoneMetadata,\n    authority,\n    listChildMetadata,\n    querySystems,\n    queryUsers,\n    showMetadata,\n} from '@placeos/ts-client';\nimport { MapsPeopleService, SettingsService, flatten } from '@placeos/common';\nimport { BehaviorSubject, combineLatest, Observable, of } from 'rxjs';\nimport {\n    catchError,\n    debounceTime,\n    filter,\n    first,\n    map,\n    shareReplay,\n    switchMap,\n    tap,\n} from 'rxjs/operators';\n\nimport { Space } from 'libs/spaces/src/lib/space.class';\nimport { StaffUser, User } from 'libs/users/src/lib/user.class';\nimport { searchStaff } from 'libs/users/src/lib/staff.fn';\nimport { OrganisationService } from 'libs/organisation/src/lib/organisation.service';\nimport { moduleFromMetadata } from '@placeos/organisation';\n\nexport interface SearchResult {\n    /** Unique ID of the result item */\n    id: string;\n    /** Type of the item being displayed */\n    type: 'space' | 'user' | 'contact' | 'feature';\n    /** Main display string for the item */\n    name: string;\n    /** Secondary display string for the item. e.g. email, location, coordinates */\n    description: string;\n    /** Whether custom user */\n    is_role?: boolean;\n}\n\ndeclare let mapsindoors: any;\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ExploreSearchService {\n    /** Current search results for staff users */\n    private _emergency_contacts = new BehaviorSubject<User[]>([]);\n    /** Filter string for results */\n    private _filter = new BehaviorSubject<string>('');\n    /** Whether results are being loaded */\n    private _loading = new BehaviorSubject<boolean>(false);\n\n    public readonly emergency_contacts =\n        this._emergency_contacts.asObservable();\n\n    private _role_assigned_contacts = this._org.active_building.pipe(\n        filter((bld) => !!bld),\n        switchMap((bld) => showMetadata(bld.id, 'emergency_contacts')),\n        map(({ details }) => (details as any)?.contacts || []),\n        shareReplay(1)\n    );\n\n    private _user_search: Observable<StaffUser[]> = this._filter.pipe(\n        debounceTime(400),\n        tap(() => this._loading.next(true)),\n        switchMap((q) =>\n            q?.length > 2\n                ? (this.search_fn(q) as any as Observable<StaffUser[]>).pipe(\n                      catchError(() => of([] as StaffUser[]))\n                  )\n                : of([] as StaffUser[])\n        ),\n        shareReplay(1)\n    );\n\n    private _space_search: Observable<Space[]> = this._filter.pipe(\n        debounceTime(400),\n        tap(() => this._loading.next(true)),\n        switchMap((q) =>\n            q?.length > 2\n                ? querySystems({ q, zone_id: this._org.organisation.id }).pipe(\n                      map(({ data }) =>\n                          data\n                              .filter((_) => _.map_id)\n                              .map(\n                                  (_) =>\n                                      new Space({\n                                          ..._,\n                                          level: this._org.levelWithID(\n                                              _.zones as any\n                                          ),\n                                      } as any)\n                              )\n                      )\n                  )\n                : of([])\n        ),\n        catchError(() => [])\n    );\n\n    private _maps_people_search: Observable<SearchResult[]> = combineLatest([\n        this._maps_people.available$,\n        this._filter,\n        this._org.active_building,\n    ]).pipe(\n        debounceTime(1000),\n        switchMap(([available, q]) =>\n            available && q.length > 2\n                ? mapsindoors?.services.LocationsService.getLocations({ q })\n                : of([])\n        ),\n        map((list: any[]) => {\n            return list.map(\n                (_) =>\n                    ({\n                        id:\n                            _.properties?.externalId ||\n                            _.properties?.roomId ||\n                            _.roomId ||\n                            _.id,\n                        map_id:\n                            _.properties?.externalId ||\n                            _.properties?.roomId ||\n                            _.roomId ||\n                            '',\n                        type: 'feature',\n                        name: _.properties?.name || '',\n                        description: `${_.properties?.roomId} , Level ${_.properties?.floorName}`,\n                    } as SearchResult)\n            );\n        }),\n        shareReplay(1)\n    );\n\n    private _points_of_interest: Observable<SearchResult[]> =\n        this._org.active_building.pipe(\n            filter((bld) => !!bld),\n            switchMap(() =>\n                listChildMetadata(this._org.building.id, {\n                    name: 'maps_features',\n                }).pipe(catchError(() => of({ details: [] })))\n            ),\n            map((data: PlaceZoneMetadata[]) => {\n                const list = [];\n                for (const item of data) {\n                    const metadata = item.metadata.points_of_interest;\n                    if (!metadata) continue;\n                    for (const poi of metadata.details as any[]) {\n                        list.push({\n                            id: poi.id,\n                            type: 'feature',\n                            name: poi.name,\n                            description: '',\n                            zone: item.zone,\n                        });\n                    }\n                }\n                return list;\n            })\n        );\n\n    public readonly search_results: Observable<SearchResult[]> = combineLatest([\n        this._filter,\n        this._space_search,\n        this._user_search,\n        this._emergency_contacts,\n        this._role_assigned_contacts,\n        this._points_of_interest,\n        this._maps_people_search,\n    ]).pipe(\n        map(\n            ([\n                filter,\n                spaces,\n                users,\n                contacts,\n                roled_contacts,\n                features,\n                mapspeople_items,\n            ]) => {\n                const search = filter.toLowerCase();\n                const results = [\n                    ...mapspeople_items,\n                    ...spaces\n                        .filter(\n                            (_) =>\n                                _.email.toLowerCase().includes(search) ||\n                                _.name.toLowerCase().includes(search) ||\n                                _.display_name.toLowerCase().includes(search)\n                        )\n                        .map((s) => ({\n                            id: s.id,\n                            type: 'space',\n                            name: s.display_name || s.name,\n                            description: `Capacity: ${s.capacity} `,\n                        })),\n                    ...flatten(\n                        roled_contacts.map((u) =>\n                            (u as any).roles.map(\n                                (role) =>\n                                    ({\n                                        id: u.email,\n                                        type: role || 'contact',\n                                        is_role: true,\n                                        name: u.name,\n                                        description: u.email,\n                                    } as any)\n                            )\n                        )\n                    ).filter(\n                        (_) =>\n                            _.name.toLowerCase().includes(search) ||\n                            _.description.toLowerCase().includes(search) ||\n                            _.type.toLowerCase().includes(search)\n                    ),\n                    ...contacts\n                        .map(\n                            (u) =>\n                                ({\n                                    id: u.email,\n                                    type: (u as any).type || 'contact',\n                                    is_role: true,\n                                    name: u.name,\n                                    description: u.email,\n                                } as any)\n                        )\n                        .filter(\n                            (_) =>\n                                _.name.toLowerCase().includes(search) ||\n                                _.description.toLowerCase().includes(search) ||\n                                _.type.toLowerCase().includes(search)\n                        ),\n                    ...users.map((u) => ({\n                        id: u.email,\n                        type: 'user',\n                        name: u.name,\n                        description: u.email,\n                    })),\n                    ...features\n                        .filter((_) => _.name.toLowerCase().includes(search))\n                        .map((s) => ({\n                            id: s.id,\n                            type: 'feature',\n                            name: s.name,\n                            description: '',\n                            zone: (s as any).zone?.id,\n                        })),\n                ];\n                results.sort((a, b) => a.name.localeCompare(b.name));\n                return results;\n            }\n        ),\n        tap(() => this._loading.next(false)),\n        shareReplay(1)\n    );\n    /** Obverable for whether results are being loaded */\n    public readonly loading = this._loading.asObservable();\n    /** Function used to query for users */\n    public search_fn = (q: string) =>\n        this._settings.get('app.basic_user_search')\n            ? queryUsers({ q, authority_id: authority()?.id }).pipe(\n                  map((_) => _.data)\n              )\n            : searchStaff(q);\n\n    constructor(\n        private _org: OrganisationService,\n        private _settings: SettingsService,\n        private _maps_people: MapsPeopleService\n    ) {\n        this.search_results.subscribe();\n        this.init();\n    }\n\n    public async init() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        const mod = moduleFromMetadata(\n            this._org.binding('location_services'),\n            'LocationServices'\n        );\n        if (mod) {\n            const binding = mod.binding('emergency_contacts');\n            binding.listen().subscribe((contacts_map) => {\n                const list = [];\n                for (const type in contacts_map) {\n                    for (const user of contacts_map[type]) {\n                        list.push({ ...user, type });\n                    }\n                }\n                this._emergency_contacts.next(list);\n            });\n            binding.bind();\n        }\n    }\n\n    public setFilter(str: string) {\n        this._filter.next(str);\n    }\n}\n","import { Component, Inject } from '@angular/core';\nimport { AsyncHandler } from '@placeos/common';\nimport { MAP_FEATURE_DATA } from '@placeos/components';\n\nexport interface SensorInfoData {\n    id: string;\n    temp: number;\n    humidity: number;\n}\n\nlet shown_id = '';\n\n@Component({\n    selector: 'explore-sensor-info',\n    template: `\n        <button\n            icon\n            matRipple\n            customTooltip\n            [content]=\"stats\"\n            yPosition=\"center\"\n            xPosition=\"center\"\n            class=\"absolute top-1/2 left-1/2 w-7 h-7 min-w-0 -translate-x-1/2 -translate-y-1/2 bg-base-100 shadow pointer-events-auto\"\n        >\n            <app-icon> visibility </app-icon>\n        </button>\n        <ng-template #stats>\n            <div\n                class=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-base-100 rounded-lg border border-base-200 p-2 text-xl\"\n            >\n                <div\n                    class=\"flex items-center space-x-2 whitespace-nowrap pr-2\"\n                    *ngIf=\"temp\"\n                >\n                    <app-icon>thermostat</app-icon>\n                    <div class=\"\">{{ temp }}˚F</div>\n                </div>\n                <div\n                    class=\"flex items-center space-x-2 whitespace-nowrap pr-2\"\n                    *ngIf=\"humidity\"\n                >\n                    <app-icon>opacity</app-icon>\n                    <div class=\"\">{{ humidity }}%</div>\n                </div>\n                <div\n                    *ngIf=\"temp > 82\"\n                    class=\"absolute top-0 right-0 rounded-full translate-x-1/2 -translate-y-1/2 bg-base-100 border border-base-200\"\n                >\n                    <app-icon class=\"text-error text-xl\">error</app-icon>\n                </div>\n            </div>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class ExploreSensorInfoComponent extends AsyncHandler {\n    public readonly temp = this._details.temp || 0;\n    public readonly humidity = this._details.humidity || 0;\n\n    public get show() {\n        return shown_id === this._details.id;\n    }\n\n    public set show(value: boolean) {\n        this.timeout('show', () => (shown_id = value ? this._details.id : ''));\n    }\n\n    constructor(@Inject(MAP_FEATURE_DATA) private _details: SensorInfoData) {\n        super();\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { getModule, showMetadata } from '@placeos/ts-client';\nimport { Point, ViewerFeature } from '@placeos/svg-viewer';\nimport { debounceTime, filter, first, map } from 'rxjs/operators';\n\nimport { AsyncHandler, HashMap, SettingsService } from '@placeos/common';\nimport { OrganisationService } from 'libs/organisation/src/lib/organisation.service';\n\nimport { ExploreStateService } from './explore-state.service';\nimport { DEFAULT_COLOURS } from './explore-spaces.service';\nimport { ExploreSensorInfoComponent } from './explore-sensor-info.component';\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport {\n    MapCanvasComponent,\n    Polygon,\n} from 'libs/components/src/lib/map-canvas.component';\n\nexport interface ZoneData {\n    /** ID of the zone */\n    map_id?: string;\n    /** ID of the zone */\n    area_id: string;\n    /** Max occupancy allowed in zone */\n    capacity: number;\n    /** Number of devices in the zone */\n    count: number;\n    /** Key in the ZoneData to use for people count */\n    area_count_key: string;\n    /** Average temperature from the sensors in the zone */\n    temperature: number;\n    /** Average humidity from the sensors in the zone */\n    humidity: number;\n    people_count: number;\n    people_count_sum: number;\n    queue_size: number;\n    counter: number;\n    at_location?: number;\n}\n\n@Injectable()\nexport class ExploreZonesService extends AsyncHandler {\n    private _area_list: string[] = [];\n    private _statuses: HashMap<string> = {};\n    private _count_key: HashMap<string> = {};\n    private _location: HashMap<Point> = {};\n    private _label_location: HashMap<Point> = {};\n    private _capacity: HashMap<number> = {};\n    private _draw: HashMap<boolean> = {};\n    private _points: HashMap<[number, number][]> = {};\n    private _features: ViewerFeature[] = [];\n    private _polygons$ = new BehaviorSubject<Polygon[]>([]);\n\n    private _bind = combineLatest([\n        this._org.active_building,\n        this._state.level,\n        this._state.options,\n    ]).pipe(\n        filter(([bld, lvl, { is_public }]) => !!bld && !!lvl && !is_public),\n        map(([_, lvl]) => {\n            this._statuses = {};\n            let system_id: any = this._org.binding('area_management');\n            if (!system_id) return;\n            const bind_areas = getModule(system_id, 'AreaManagement').binding(\n                `${lvl.id}:areas`\n            );\n            const bind_zone = getModule(system_id, 'AreaManagement').binding(\n                `${lvl.id}`\n            );\n            const zones = combineLatest([\n                bind_areas.listen(),\n                bind_zone.listen(),\n            ]).pipe(\n                debounceTime(100),\n                map(([a, z]) => [\n                    ...(a?.value || []),\n                    ...(z?.value || []).filter((_) => _.location === 'area'),\n                ])\n            );\n            this.subscription(\n                `zones-status`,\n                zones.subscribe((l) => this.parseData(l))\n            );\n            this.subscription('binding', bind_areas.bind());\n            this.subscription('zone-binding', bind_zone.bind());\n        })\n    );\n\n    constructor(\n        private _state: ExploreStateService,\n        private _org: OrganisationService,\n        private _settings: SettingsService\n    ) {\n        super();\n        this.init();\n    }\n\n    public async init() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        const zone_metadata = await Promise.all(\n            this._org.levels.map((bld) =>\n                showMetadata(bld.id, 'map_regions').toPromise()\n            )\n        );\n        this._area_list = [];\n        for (const zone of zone_metadata) {\n            const areas = (zone?.details as any)?.areas;\n            if (!areas) continue;\n            for (const area of areas) {\n                const {\n                    capacity,\n                    hide_label,\n                    label_location,\n                    draw_polygon,\n                    area_count_key,\n                } = area.properties || {};\n                const { coordinates } = area.geometry || {};\n                this._capacity[area.id] = capacity || 100;\n                this._count_key[area.id] = area_count_key || '';\n                this._location[area.id] = coordinates?.length\n                    ? getCenterPoint(coordinates)\n                    : null;\n                this._label_location[area.id] =\n                    hide_label === false\n                        ? label_location || this._location[area.id]\n                        : null;\n                this._draw[area.id] =\n                    !!draw_polygon ||\n                    this._settings.get('app.explore.use_zone_polygons');\n                this._points[area.id] = coordinates || [];\n                this._area_list.push(area.map_id || area.id);\n            }\n        }\n        this._state.setFeatures('zones-canvas', [\n            {\n                track_id: 'zones-canvas',\n                location: { x: 0.5, y: 0.5 },\n                content: MapCanvasComponent,\n                data: {\n                    polygons$: this._polygons$,\n                    draw_points: false,\n                    draw_labels: false,\n                },\n            },\n        ]);\n        this.updateStatus();\n        this.subscription('bind', this._bind.subscribe());\n    }\n\n    public parseData(value: ZoneData[] = []) {\n        const labels = [];\n        const features = [];\n\n        for (const zone of value) {\n            const id = zone.map_id || zone.area_id;\n            // if (!this._area_list.includes(id)) continue;\n            const capacity = zone.capacity || this._capacity[id] || 100;\n            const count =\n                zone[\n                    this._count_key[id] ||\n                        this._settings.get('app.explore.area_count_key') ||\n                        'count'\n                ] || 0;\n            const filled = count / capacity;\n            this._statuses[id] = zone.at_location\n                ? 'busy'\n                : filled < 0.4\n                ? 'free'\n                : filled < 0.75\n                ? 'pending'\n                : 'busy';\n            if (!this._location[id]) continue;\n            let content = '';\n            if (zone.count) {\n                content += `${zone.count || 0} User Device${\n                    zone.count === 1 ? '' : 's'\n                }\\n`;\n            }\n            if (zone.temperature)\n                content += `Temperature: ${zone.temperature} ˚C\\n`;\n            if (zone.people_count > 0)\n                content += `${zone.people_count_sum} ${\n                    zone.people_count_sum === 1 ? 'Person' : 'People'\n                }\\n`;\n            if (zone.humidity) content += `Humidity: ${zone.humidity}%\\n`;\n            if (zone.queue_size) content += `Queue Size: ${zone.queue_size}%\\n`;\n            if (zone.counter) content += `Count: ${zone.counter}\\n`;\n            if (\n                this._label_location[id] &&\n                !this._settings.get('app.explore.show_zone_labels')\n            ) {\n                labels.push({\n                    location: this._label_location[id],\n                    content,\n                    z_index: 100,\n                });\n            }\n            if (\n                this._settings.get('app.explore.show_zone_sensor_info') &&\n                (zone.temperature || zone.humidity)\n            ) {\n                features.push({\n                    track_id: `sensors:${id}`,\n                    location: this._location[id],\n                    content: ExploreSensorInfoComponent,\n                    data: {\n                        id,\n                        temp: zone.temperature || 10,\n                        humidity: zone.humidity || 10,\n                    },\n                    z_index: 98,\n                });\n            }\n        }\n        this._features = features;\n        this._state.setLabels('zones', labels);\n        this.updateStatus();\n    }\n\n    private updateStatus() {\n        const style_map = {};\n        const features = [];\n        const colours = this._settings.get('app.explore.colors') || {};\n        const polygons = [];\n        for (const zone_id in this._statuses) {\n            const colour =\n                colours[`zone-${this._statuses[zone_id]}`] ||\n                colours[`${this._statuses[zone_id]}`] ||\n                DEFAULT_COLOURS[`${this._statuses[zone_id]}`];\n            if (this._draw[zone_id]) {\n                polygons.push({\n                    name: zone_id,\n                    points: this._points[zone_id],\n                    color: colour,\n                } as Polygon);\n            } else {\n                style_map[`#${zone_id}`] = {\n                    fill: colour,\n                    opacity: 0.6,\n                };\n            }\n        }\n        this._polygons$.next(polygons);\n        this._state.setFeatures('zones', [...features, ...this._features]);\n        this._state.setStyles('zones-styles', style_map);\n    }\n}\n\nfunction getCenterPoint(points: [number, number][]) {\n    const diff: HashMap<number> = (points || []).reduce(\n        (m, [x, y]) => ({\n            x_min: x < m.x_min ? x : m.x_min,\n            x_max: x > m.x_max ? x : m.x_max,\n            y_min: y < m.y_min ? y : m.y_min,\n            y_max: y > m.y_max ? y : m.y_max,\n        }),\n        {\n            x_min: 100,\n            x_max: -100,\n            y_min: 100,\n            y_max: -100,\n        }\n    );\n    return {\n        x: diff.x_min + (diff.x_max - diff.x_min) / 2,\n        y: diff.y_min + (diff.y_max - diff.y_min) / 2,\n    };\n}\n","import { Component } from '@angular/core';\nimport { ExploreStateService } from './explore-state.service';\n\n@Component({\n    selector: `explore-zoom-controls`,\n    template: `\n        <button\n            z-in\n            icon\n            matRipple\n            class=\"bg-base-100\"\n            (click)=\"zoomIn()\"\n            matTooltip=\"Zoom In\"\n            i18n-matTooltip\n        >\n            <app-icon>add</app-icon>\n        </button>\n        <button\n            z-out\n            icon\n            matRipple\n            class=\"bg-base-100\"\n            (click)=\"zoomOut()\"\n            matTooltip=\"Zoom Out\"\n            i18n-matTooltip\n        >\n            <app-icon>remove</app-icon>\n        </button>\n        <button\n            reset\n            icon\n            matRipple\n            class=\"bg-base-100\"\n            (click)=\"reset()\"\n            matTooltip=\"Reset Zoom & Center\"\n            i18n-matTooltip\n        >\n            <app-icon>autorenew</app-icon>\n        </button>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n            }\n\n            button {\n                border: 1px solid #9998;\n                border-radius: 0;\n            }\n\n            button:first-child {\n                border-radius: 0.25rem 0.25rem 0 0;\n                border-bottom: none;\n            }\n\n            button:last-child {\n                border-radius: 0 0 0.25rem 0.25rem;\n                border-top: none;\n            }\n        `,\n    ],\n})\nexport class ExploreZoomControlComponent {\n    public readonly zoomIn = () =>\n        this._state.setPositions(\n            Math.min(10, this._state.positions.zoom * 1.2),\n            this._state.positions.center\n        );\n    public readonly zoomOut = () =>\n        this._state.setPositions(\n            Math.max(1, this._state.positions.zoom * (1 / 1.2)),\n            this._state.positions.center\n        );\n    public readonly reset = () =>\n        this._state.setPositions(1, { x: 0.5, y: 0.5 });\n\n    constructor(private _state: ExploreStateService) {}\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule, Type } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { ComponentsModule } from '@placeos/components';\n\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\nimport { OverlayModule } from '@angular/cdk/overlay';\nimport { PortalModule } from '@angular/cdk/portal';\n\nimport { FormFieldsModule } from 'libs/form-fields/src/lib/form-fields.module';\nimport { SharedBookingsModule } from 'libs/bookings/src/lib/bookings.module';\n\nimport { ExploreMapControlComponent } from './explore-map-control.component';\nimport { ExploreMapViewComponent } from './explore-map-view.component';\nimport { ExploreSearchComponent } from './explore-search.component';\nimport { ExploreSpaceInfoComponent } from './explore-space-info.component';\nimport { ExploreZoomControlComponent } from './explore-zoom-control.component';\nimport { ExploreDeviceInfoComponent } from './explore-device-info.component';\nimport { ExploreBookingModalComponent } from './explore-booking-modal.component';\nimport { ExploreDeskInfoComponent } from './explore-desk-info.component';\nimport { SetDatetimeModalComponent } from './set-datetime-modal.component';\nimport { ExploreBookQrComponent } from './explore-book-qr.component';\nimport { ExploreSensorInfoComponent } from './explore-sensor-info.component';\nimport { ExploreLockerBankInfoComponent } from './explore-locker-bank-info.component';\nimport { ExploreLockerBankModalComponent } from './explore-locker-bank-modal.component';\nimport { ExploreParkingInfoComponent } from './explore-parking-info.component';\n\nconst COMPONENTS: Type<any>[] = [\n    ExploreMapControlComponent,\n    ExploreMapViewComponent,\n    ExploreSearchComponent,\n    ExploreSpaceInfoComponent,\n    ExploreDeviceInfoComponent,\n    ExploreDeskInfoComponent,\n    ExploreZoomControlComponent,\n    ExploreBookingModalComponent,\n    SetDatetimeModalComponent,\n    ExploreBookQrComponent,\n    ExploreSensorInfoComponent,\n    ExploreLockerBankInfoComponent,\n    ExploreLockerBankModalComponent,\n    ExploreParkingInfoComponent,\n];\n\n@NgModule({\n    declarations: [...COMPONENTS],\n    imports: [\n        CommonModule,\n        ComponentsModule,\n        FormsModule,\n        ReactiveFormsModule,\n        MatSlideToggleModule,\n        OverlayModule,\n        PortalModule,\n        FormFieldsModule,\n        SharedBookingsModule,\n    ],\n    exports: [...COMPONENTS],\n})\nexport class SharedExploreModule {}\n","\nexport * from './explore-desks.service';\nexport * from './explore-map-control.component';\nexport * from './explore-map-view.component';\nexport * from './explore-search.component';\nexport * from './explore-search.service';\nexport * from './explore-space-info.component';\nexport * from './explore-spaces.service';\nexport * from './explore-state.service';\nexport * from './explore-zones.service';\nexport * from './explore-zoom-control.component';\nexport * from './explore-parking.service';\nexport * from './explore.module';\n","import { Component, Inject } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { SettingsService } from '@placeos/common';\nimport { BookingAsset } from 'libs/bookings/src/lib/booking-form.service';\nimport { User } from 'libs/users/src/lib/user.class';\n\n@Component({\n    selector: 'set-datetime-modal',\n    template: `\n        <header classs=\"flex items-center justify-between\">\n            <h2>Set date and time</h2>\n            <button icon mat-dialog-close>\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main\n            *ngIf=\"form\"\n            [formGroup]=\"form\"\n            class=\"w-[24rem] max-w-[85vw] pt-4\"\n        >\n            <div\n                *ngIf=\"resource\"\n                class=\"flex flex-col sm:flex-row space-x-0 sm:space-x-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto\"\n            >\n                <div class=\"flex flex-col flex-1 w-full sm:w-1/4 mb-2\">\n                    <label>Resource:</label>\n                    <div\n                        class=\"px-4 py-3 border border-base-200 rounded w-full mb-4\"\n                    >\n                        {{\n                            resource.name ||\n                                resource.map_id ||\n                                'Unknown Resource'\n                        }}\n                    </div>\n                </div>\n            </div>\n            <div\n                *ngIf=\"host\"\n                class=\"flex flex-col sm:flex-row space-x-0 sm:space-x-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto\"\n            >\n                <div class=\"flex flex-col flex-1 w-full sm:w-1/4\">\n                    <label>Host</label>\n                    <a-user-search-field\n                        formControlName=\"user\"\n                        class=\"mb-4\"\n                    ></a-user-search-field>\n                </div>\n            </div>\n            <div\n                class=\"flex flex-col sm:flex-row space-x-0 sm:space-x-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto\"\n            >\n                <div class=\"flex flex-col flex-1 w-full sm:w-1/4\">\n                    <label>Date</label>\n                    <a-date-field [to]=\"book_until\" formControlName=\"date\">\n                        Date and time must be in the future\n                    </a-date-field>\n                </div>\n            </div>\n            <div\n                class=\"flex flex-col sm:flex-row space-x-0 sm:space-x-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto\"\n            >\n                <div class=\"flex flex-col flex-1 w-full sm:w-1/3\">\n                    <label>Start Time</label>\n                    <a-time-field\n                        [ngModel]=\"form.value.date\"\n                        (ngModelChange)=\"form.patchValue({ date: $event })\"\n                        [ngModelOptions]=\"{ standalone: true }\"\n                        [use_24hr]=\"use_24hr_time\"\n                    ></a-time-field>\n                </div>\n                <div class=\"flex flex-col flex-1 w-full sm:w-1/3\">\n                    <label>End Time</label>\n                    <a-duration-field\n                        formControlName=\"duration\"\n                        [time]=\"form.get('date')?.value\"\n                        [max]=\"10 * 60\"\n                        [min]=\"60\"\n                        [step]=\"60\"\n                        [use_24hr]=\"use_24hr_time\"\n                    >\n                    </a-duration-field>\n                </div>\n            </div>\n        </main>\n        <footer\n            class=\"w-full p-2 border-t border-base-200 flex items-center justify-center\"\n        >\n            <button btn matRipple [mat-dialog-close]=\"form.value\" class=\"w-32\">\n                Continue\n            </button>\n        </footer>\n    `,\n    styles: [``],\n})\nexport class SetDatetimeModalComponent {\n    public host = this._data.host;\n    public form = new FormGroup({\n        user: new FormControl(this._data.user),\n        date: new FormControl(this._data.date),\n        duration: new FormControl(this._data.duration),\n    });\n\n    public readonly book_until = this._data.until;\n    public readonly resource = this._data.resource;\n\n    public get use_24hr_time() {\n        return this._settings.get('app.use_24_hour_time');\n    }\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA)\n        private _data: {\n            date: number;\n            duration: number;\n            until: number;\n            host: boolean;\n            user?: User;\n            resource: BookingAsset;\n        },\n        private _settings: SettingsService\n    ) {}\n}\n"],"names":["AsyncHandler","SettingsService","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","AccessibilityControlsComponent_div_8_Template_input_ngModelChange_4_listener","$event","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","applySetting","ɵɵadvance","ɵɵproperty","font_size","ɵɵtextInterpolate1","AccessibilityControlsComponent","constructor","_settings","n","v","timeout","saveUserSetting","dark_mode","get","can_change_dark_mode","accessible","setDarkMode","state","theme","setTheme","_","ɵɵdirectiveInject","i1","_2","selectors","features","ɵɵInheritDefinitionFeature","decls","vars","consts","template","AccessibilityControlsComponent_Template","rf","ctx","AccessibilityControlsComponent_Template_button_click_0_listener","AccessibilityControlsComponent_Template_mat_slide_toggle_ngModelChange_3_listener","AccessibilityControlsComponent_Template_button_click_4_listener","AccessibilityControlsComponent_Template_mat_slide_toggle_ngModelChange_7_listener","ɵɵtemplate","AccessibilityControlsComponent_div_8_Template","ExploreStateService","OrganisationService","first","take","ExploreLevelSelectComponent_button_1_Template_button_click_0_listener","lvl_r2","$implicit","ctx_r2","setLevel","ɵɵclassProp","id","tmp_2_0","ɵɵpipeBind1","level","ɵɵtextInterpolate","number","display_name","name","ExploreLevelSelectComponent","_org","_state","levels","active_levels","lvl","ngOnInit","_this","_asyncToGenerator","initialised","pipe","toPromise","i2","ExploreLevelSelectComponent_Template","ExploreLevelSelectComponent_button_1_Template","MatDialog","ActivatedRoute","Router","ANIMATION_SHOW_CONTRACT_EXPAND","flatten","log","MapsPeopleService","notifyError","unique","MapPinComponent","MapRadiusComponent","VirtualKeyboardComponent","ExploreDesksService","ExploreParkingService","ExploreSpacesService","ExploreZonesService","SpacesService","getModule","MapLocation","showStaff","startOfMinute","SpacePipe","combineLatest","map","tap","ɵɵelement","ExploreComponent_ng_container_12_ng_container_2_button_8_Template_button_click_0_listener","lvl_r3","_r2","ctx_r3","ɵɵelementContainerStart","ExploreComponent_ng_container_12_ng_container_2_button_8_Template","levelMenu_r5","ɵɵstyleProp","value_r6","color","ExploreComponent_ng_container_12_ng_container_4_div_8_Template","legendMenu_r7","legend","ExploreComponent_ng_container_12_ng_container_2_Template","ExploreComponent_ng_container_12_ng_container_4_Template","length","ExploreComponent_ng_container_16_button_10_Template_button_click_0_listener","lvl_r10","_r9","tmp_4_0","ExploreComponent_ng_container_16_Template_button_click_1_listener","_r8","show_levels","ExploreComponent_ng_container_16_button_10_Template","value_r12","ExploreComponent_ng_container_18_Template_button_click_1_listener","_r11","show_legend","ExploreComponent_ng_container_18_div_10_Template","ExploreComponent","logo","time","Date","now","hide_zones","updateZoom","zoom","setPositions","positions","center","updateCenter","toggleZones","enabled","options","disable","filter","setOptions","can_search","_s","_desks","_zones","_parking","_spaces","_dialog","_route","_router","_space_pipe","_maps","reset_delay","show_accessibility","active_region","active_building","region","building","buildings","bld","parent_id","levelsForBuilding","l","console","url","map_url","styles","map_styles","map_positions","map_features","actions","map_actions","labels","map_labels","locate","onMouse","resetKiosk","onTouch","o","use_mapsindoors$","available$","_this2","location","hash","includes","search","is_public","custom","localStorage","getItem","subscription","subscribe","setFeatures","queryParamMap","_ref","params","has","levelWithID","find","locateSpace","user","value","email","locateUser","Array","catch","navigate","relativeTo","queryParams","content","data","_x","apply","arguments","_this3","space","transform","zones","feature","map_id","message","_this4","locate_details","binding","system_id","module","mod","locations","execute","username","i","sort","a","b","priority","indexOf","type","pos","position","coordinates_from","x","y","z_index","radius","variance","last_seen","document","activeElement","blur","closeAll","i3","i4","i5","i6","i7","hostBindings","ExploreComponent_HostBindings","ExploreComponent_mousedown_HostBindingHandler","ɵɵresolveWindow","ExploreComponent_touchstart_HostBindingHandler","attrs","_c0","ExploreComponent_Template","ExploreComponent_explore_search_6_Template","ExploreComponent_ng_template_10_Template","ɵɵtemplateRefExtractor","ExploreComponent_ng_container_12_Template","ExploreComponent_ng_container_16_Template","ExploreComponent_ng_container_18_Template","ExploreComponent_Template_button_click_19_listener","ExploreComponent_Template_interactive_map_zoomChange_31_listener","ExploreComponent_Template_interactive_map_centerChange_31_listener","accessibility_controls_r13","tmp_3_0","tmp_9_0","tmp_10_0","ɵɵpureFunction0","_c1","CommonModule","RouterModule","FormsModule","ComponentsModule","SharedExploreModule","SharedSpacesModule","SharedComponentsModule","ROUTES","path","component","AppExploreModule","_3","forChild","declarations","imports","showMetadata","addDays","endOfDay","getUnixTime","startOfDay","BehaviorSubject","of","catchError","debounceTime","shareReplay","switchMap","BookingFormService","currentUser","notifySuccess","rulesForResource","Desk","SetDatetimeModalComponent","ExploreDeskInfoComponent","ExploreDeviceInfoComponent","DEFAULT_COLOURS","queryBookings","_bookings","this","_in_use","_options","_presence","_signs_of_life","_statuses","_users","_departments","_checked_in","booking_rules","details","desk_list","j","zone","e","_bind","listen","d","processBindingChange","bind","_booking_list","use_api","date","valueOf","period_start","period_end","bookings","next","asset_id","checked_in","_state_change","desks","in_use","presence","signs","restrictions","bookable","is_used","some","has_presence","has_signs","is_checked_in","is_restricted","duration","host","resource","hidden","processDesks","init","enable_booking","getValue","devices","at_location","signs_of_life","departments","desk","staff_name","department","processDevices","updateStatus","style_map","colours","desk_id","fill","setStyles","list","device","map_width","map_height","push","track_id","system","full_size","no_scale","status","can_book","book_fn","_ref2","groups","newForm","form","patchValue","all_day","_setBookingTime","user_email","resources","asset_name","description","booking_type","confirmPost","error","forEach","event","action","callback","setActions","until","ref","open","afterClosed","ɵɵinject","factory","ɵfac","ElementRef","differenceInMinutes","formatDistanceToNow","MAP_FEATURE_DATA","ɵɵi18n","mac","manufacturer","os","ssid","ExploreDeviceInfoComponent_ng_template_5_Template_div_mouseleave_0_listener","close","ExploreDeviceInfoComponent_ng_template_5_p_3_Template","ExploreDeviceInfoComponent_ng_template_5_p_12_Template","ExploreDeviceInfoComponent_ng_template_5_p_13_Template","ExploreDeviceInfoComponent_ng_template_5_p_14_Template","ExploreDeviceInfoComponent_ng_template_5_p_15_Template","ExploreDeviceInfoComponent_ng_template_5_p_16_Template","hide_fields","EMPTY","_details","addSuffix","diameter","distance","Math","abs","distance_color","_element","toFixed","bg_color","tries","setTimeout","parent","nativeElement","parentElement","parseInt","style","top","left","y_pos","x_pos","zoom$","loadUser","assigned_to","i18n_0","ngI18nClosureMode","$localize","ExploreDeviceInfoComponent_Template_div_mouseenter_4_listener","ExploreDeviceInfoComponent_ng_template_5_Template","ɵɵstyleMap","device_tooltip_r4","LockersService","ExploreLockerBankInfoComponent","ExploreLockersService","_lockers","_explore","_status","lockers$","filtered_lockers$","sys_id","locker_status","lockers_banks$","locker_banks","lockers","map_status","banks","level_id","bank","bank_lockers","bank_id","in_use_count","locker","locker_id","allocated","bank_info","locker_count","in_use_percent","providedIn","bld_r3","ExploreMapControlComponent_mat_form_field_1_Template_mat_select_ngModelChange_1_listener","setBuilding","ExploreMapControlComponent_mat_form_field_1_mat_option_3_Template","lvl_r5","ExploreMapControlComponent_mat_form_field_3_Template_mat_select_ngModelChange_2_listener","_r4","ExploreMapControlComponent_mat_form_field_3_mat_option_4_Template","ExploreMapControlComponent","active_buildings","ExploreMapControlComponent_mat_form_field_1_Template","ExploreMapControlComponent_mat_form_field_3_Template","tmp_0_0","tmp_1_0","ExploreMapViewComponent_div_6_div_2_Template_mat_slide_toggle_ngModelChange_1_listener","ExploreMapViewComponent_div_6_div_2_Template","pair_r3","ExploreMapViewComponent_div_8_div_3_Template","ExploreMapViewComponent","reset","startPolling","_locateFeature","has_coordinates","parts","split","parseFloat","i8","i9","i10","i11","i12","ɵɵProvidersFeature","ExploreMapViewComponent_div_6_Template","ExploreMapViewComponent_div_8_Template","ctx_r0","plate_number","ExploreParkingInfoComponent","is_concierge","app_name","toLowerCase","_data","ExploreParkingInfoComponent_Template","ExploreParkingInfoComponent_div_8_Template","endOfMinute","forkJoin","ParkingService","_poll","asObservable","on_book","tags","events","__","user_events","spaces","s","zone_id","active_spaces","_plate_numbers","available_spaces","users","available","assigned","u","undefined","_updateParkingSpaces","interval","stopPolling","clearInterval","assigned_space","deny_parking_access","booked_space","opacity","hover","active_level","ExploreSearchService","option_r2","ExploreSearchComponent_ng_container_12_mat_option_1_Template","ExploreSearchComponent_ng_container_12_mat_option_3_Template","tmp_5_0","results","ɵɵpipeBind3","ExploreSearchComponent","checkClick","_el","contains","target","show","_input_el","_search","search_str","right_size","search_results","loading","setFilter","setItem","Object","select","checkButtonPosition","focusInput","focus","showSearch","closeSearch","item","query","window_width","window","innerWidth","button_rect","_button_el","getBoundingClientRect","x_center","width","viewQuery","ExploreSearchComponent_Query","ExploreSearchComponent_click_HostBindingHandler","ɵɵresolveDocument","ExploreSearchComponent_touchstart_HostBindingHandler","ExploreSearchComponent_Template_button_resize_0_listener","ExploreSearchComponent_Template_button_click_0_listener","ExploreSearchComponent_Template_div_click_4_listener","ɵɵtwoWayListener","ExploreSearchComponent_Template_input_ngModelChange_6_listener","ɵɵtwoWayBindingSet","ExploreSearchComponent_Template_input_blur_6_listener","ExploreSearchComponent_mat_spinner_8_Template","ExploreSearchComponent_ng_container_12_Template","ɵɵtwoWayProperty","auto_r5","origin_r4","authority","listChildMetadata","querySystems","queryUsers","Space","searchStaff","moduleFromMetadata","_maps_people","_emergency_contacts","_filter","_loading","emergency_contacts","_role_assigned_contacts","contacts","_user_search","q","search_fn","_space_search","organisation","_maps_people_search","mapsindoors","services","LocationsService","getLocations","properties","externalId","roomId","floorName","_points_of_interest","metadata","points_of_interest","poi","roled_contacts","mapspeople_items","capacity","roles","role","is_role","localeCompare","authority_id","contacts_map","str","temp","humidity","ExploreSensorInfoComponent_ng_template_3_div_1_Template","ExploreSensorInfoComponent_ng_template_3_div_2_Template","ExploreSensorInfoComponent_ng_template_3_div_3_Template","shown_id","ExploreSensorInfoComponent","ExploreSensorInfoComponent_Template","ExploreSensorInfoComponent_ng_template_3_Template","stats_r2","MapCanvasComponent","_area_list","_count_key","_location","_label_location","_capacity","_draw","_points","_features","_polygons$","bind_areas","bind_zone","z","parseData","zone_metadata","Promise","all","areas","area","hide_label","label_location","draw_polygon","area_count_key","coordinates","geometry","getCenterPoint","polygons$","draw_points","draw_labels","area_id","count","filled","temperature","people_count","people_count_sum","queue_size","counter","setLabels","polygons","colour","points","diff","reduce","m","x_min","x_max","y_min","y_max","ExploreZoomControlComponent","zoomIn","min","zoomOut","max","ExploreZoomControlComponent_Template_button_click_0_listener","ExploreZoomControlComponent_Template_button_click_3_listener","ExploreZoomControlComponent_Template_button_click_6_listener","Type","ReactiveFormsModule","MatSlideToggleModule","OverlayModule","PortalModule","FormFieldsModule","SharedBookingsModule","ExploreSpaceInfoComponent","ExploreBookingModalComponent","ExploreBookQrComponent","ExploreLockerBankModalComponent","COMPONENTS","exports","FormControl","FormGroup","MAT_DIALOG_DATA","SetDatetimeModalComponent_main_6_div_1_Template","SetDatetimeModalComponent_main_6_div_2_Template","SetDatetimeModalComponent_main_6_Template_a_time_field_ngModelChange_13_listener","book_until","use_24hr_time","tmp_8_0","SetDatetimeModalComponent_Template","SetDatetimeModalComponent_main_6_Template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}