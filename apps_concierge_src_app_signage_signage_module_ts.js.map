{"version":3,"file":"apps_concierge_src_app_signage_signage_module_ts.js","mappings":"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","sources":["./apps/concierge/src/app/signage/signage-display-modal.component.ts","./apps/concierge/src/app/signage/signage-displays.component.ts","./apps/concierge/src/app/signage/signage-media-preview-modal.component.ts","./apps/concierge/src/app/signage/signage-media.component.ts","./apps/concierge/src/app/signage/signage-playlist-modal.component.ts","./apps/concierge/src/app/signage/signage-playlists.component.ts","./apps/concierge/src/app/signage/signage-state.service.ts","./apps/concierge/src/app/signage/signage-topbar.component.ts","./apps/concierge/src/app/signage/signage-triggers.component.ts","./apps/concierge/src/app/signage/signage-zones.component.ts","./apps/concierge/src/app/signage/signage.classes.ts","./apps/concierge/src/app/signage/signage.component.ts","./apps/concierge/src/app/signage/signage.module.ts"],"sourcesContent":["import { Component, ElementRef, Inject, ViewChild } from '@angular/core';\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport { map, startWith, tap } from 'rxjs/operators';\nimport { SignageDisplay, SignagePlaylist } from './signage.classes';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport {\n    MAT_DIALOG_DATA,\n    MatDialog,\n    MatDialogRef,\n} from '@angular/material/dialog';\nimport { SignageStateService } from './signage-state.service';\nimport { ta } from 'date-fns/locale';\nimport { notifyError } from '@placeos/common';\n\n@Component({\n    selector: 'signage-display-modal',\n    template: `\n        <header\n            class=\"flex items-center justify-between p-2 border-b border-base-300\"\n        >\n            <h1 class=\"px-2\">{{ display.id ? 'Edit' : 'New' }} Display</h1>\n            <button icon matRipple mat-dialog-close *ngIf=\"!loading\">\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main\n            [formGroup]=\"form\"\n            class=\"p-2 flex flex-col\"\n            *ngIf=\"!loading; else load_state\"\n        >\n            <label for=\"name\">Name<span required>*</span></label>\n            <mat-form-field appearance=\"outline\" class=\"w-full\">\n                <input\n                    matInput\n                    name=\"name\"\n                    placeholder=\"Name\"\n                    formControlName=\"name\"\n                />\n                <mat-error>Name is required</mat-error>\n            </mat-form-field>\n            <label for=\"description\">Description</label>\n            <mat-form-field appearance=\"outline\" class=\"w-full\">\n                <textarea\n                    matInput\n                    name=\"description\"\n                    placeholder=\"Description\"\n                    formControlName=\"description\"\n                ></textarea>\n            </mat-form-field>\n            <label for=\"description\">Orientation<span required>*</span></label>\n            <mat-form-field appearance=\"outline\" class=\"w-full\">\n                <mat-select formControlName=\"orientation\">\n                    <mat-option value=\"landscape\">Landscape</mat-option>\n                    <mat-option value=\"portrait\">Portrait</mat-option>\n                </mat-select>\n                <mat-error>Orientation is required</mat-error>\n            </mat-form-field>\n            <label for=\"media\">Playlists</label>\n            <custom-table\n                class=\"block w-full mb-2\"\n                [dataSource]=\"playlist_list\"\n                [columns]=\"['_index', 'name', 'type', 'duration', 'actions']\"\n                [display_column]=\"[' ', 'Name', 'Type', 'Duration', ' ']\"\n                [column_size]=\"['3r', 'flex', '10r', '6r', '10r']\"\n                [template]=\"{\n                    duration: duration_template,\n                    actions: actions_template\n                }\"\n            >\n            </custom-table>\n            <button\n                btn\n                matRipple\n                class=\"w-full\"\n                [matMenuTriggerFor]=\"media_menu\"\n                (click)=\"focusSearchInput()\"\n            >\n                Add Playlist\n            </button>\n            <mat-menu #media_menu=\"matMenu\" class=\"w-[32rem] max-w-[80vw]\">\n                <mat-form-field\n                    appearance=\"outline\"\n                    class=\"w-[calc(100%-1rem)] mx-2 no-subscript\"\n                >\n                    <app-icon matPrefix class=\"text-2xl -left-1\">\n                        search\n                    </app-icon>\n                    <input\n                        #search_input\n                        matInput\n                        placeholder=\"Media Name\"\n                        [ngModel]=\"search.getValue()\"\n                        (ngModelChange)=\"search.next($event)\"\n                        [ngModelOptions]=\"{ standalone: true }\"\n                    />\n                </mat-form-field>\n                <button\n                    mat-menu-item\n                    *ngFor=\"let item of new_playlists | async | slice: 0:8\"\n                    (click)=\"addPlaylist(item)\"\n                >\n                    <div class=\"flex items-center w-full\">\n                        <div class=\"flex-1 truncate\">{{ item.name }}</div>\n                        <code class=\"bg-base-300 text-base-content\">{{\n                            item.duration | mediaDuration\n                        }}</code>\n                    </div>\n                </button>\n            </mat-menu>\n        </main>\n        <footer\n            class=\"p-2 flex items-center justify-end space-x-2 border-t border-base-300\"\n            *ngIf=\"!loading\"\n        >\n            <button btn matRipple class=\"w-32\" (click)=\"saveDisplay()\">\n                Save Display\n            </button>\n        </footer>\n        <ng-template\n            #actions_template\n            let-row=\"row\"\n            let-first=\"first\"\n            let-last=\"last\"\n        >\n            <div class=\"w-full flex items-center justify-end\">\n                <button\n                    icon\n                    matRipple\n                    matTooltip=\"Move Playlist to previous item\"\n                    [disabled]=\"first\"\n                    (click)=\"changeOrder(row, -1)\"\n                >\n                    <app-icon>arrow_upward</app-icon>\n                </button>\n                <button\n                    icon\n                    matRipple\n                    matTooltip=\"Move Playlist to next item\"\n                    [disabled]=\"last\"\n                    (click)=\"changeOrder(row, 1)\"\n                >\n                    <app-icon>arrow_downward</app-icon>\n                </button>\n                <button\n                    icon\n                    matRipple\n                    matTooltip=\"Preview Playlist\"\n                    (click)=\"previewPlaylist(row)\"\n                >\n                    <app-icon>visibility</app-icon>\n                </button>\n                <button\n                    icon\n                    matRipple\n                    matTooltip=\"Remove Playlist from Display\"\n                    class=\"text-error\"\n                    (click)=\"removePlaylist(row)\"\n                >\n                    <app-icon>delete</app-icon>\n                </button>\n            </div>\n        </ng-template>\n\n        <ng-template #duration_template let-data=\"data\">\n            <code class=\"bg-base-300 text-base-content\">\n                {{ data | mediaDuration }}\n            </code>\n        </ng-template>\n        <ng-template #load_state>\n            <main class=\"flex flex-col items-center justify-center p-8\">\n                <mat-spinner [diameter]=\"32\"></mat-spinner>\n                <p class=\"mt-4\">Saving Display...</p>\n            </main>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class SignageDisplayModalComponent {\n    public loading = false;\n    public readonly display = this._data;\n    public readonly playlists = combineLatest([\n        this._state.playlists,\n        this._state.media,\n    ]).pipe(\n        map(([playlists, media]) =>\n            playlists.map((_) => ({\n                ..._,\n                duration: _.media.reduce(\n                    (a, b) =>\n                        a +\n                        (_.media_durations[b] ||\n                            media.find(({ id }) => id === b)?.duration ||\n                            0),\n                    0\n                ),\n            }))\n        ),\n        tap(console.log)\n    );\n\n    public readonly search = new BehaviorSubject('');\n\n    public readonly form = new FormGroup({\n        id: new FormControl(this.display.id || ''),\n        name: new FormControl(this.display.name || '', [Validators.required]),\n        description: new FormControl(this.display.description || ''),\n        orientation: new FormControl(this.display.orientation || 'landscape', [\n            Validators.required,\n        ]),\n        playlists: new FormControl(this.display.playlists || []),\n    });\n\n    public readonly playlist_list = combineLatest([\n        this.playlists,\n        this.form.valueChanges.pipe(startWith(this.form.getRawValue())),\n    ]).pipe(\n        map(([playlist_list, _]) =>\n            (this.form.getRawValue().playlists || []).map(\n                (id) =>\n                    playlist_list.find((_) => _.id === id) ||\n                    new SignagePlaylist({ id })\n            )\n        )\n    );\n\n    public readonly new_playlists = combineLatest([\n        this.playlists,\n        this.search,\n        this.form.valueChanges.pipe(startWith(this.form.getRawValue())),\n    ]).pipe(\n        map(([all_playlist, search, _]) =>\n            all_playlist\n                .filter(\n                    (_) => !this.form.getRawValue().playlists.includes(_.id)\n                )\n                .filter((_) =>\n                    _.name.toLowerCase().includes(search.toLowerCase())\n                )\n        )\n    );\n\n    @ViewChild('search_input')\n    public search_input: ElementRef<HTMLInputElement>;\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA) private _data: SignageDisplay = {} as any,\n        private _state: SignageStateService,\n        private _dialog: MatDialog,\n        private _dialog_ref: MatDialogRef<SignageDisplayModalComponent>\n    ) {}\n\n    public focusSearchInput() {\n        setTimeout(() => this.search_input.nativeElement?.focus(), 100);\n    }\n\n    public async saveDisplay() {\n        this.form.markAllAsTouched();\n        this.form.updateValueAndValidity();\n        if (this.form.invalid) return;\n        this.loading = true;\n        await this._state.saveDisplay(this.form.getRawValue()).catch((_) => {\n            notifyError('Error saving display.');\n            this.loading = false;\n            throw _;\n        });\n        this._dialog_ref.close();\n    }\n\n    public addPlaylist(item: SignagePlaylist) {\n        const { id } = item;\n        const { playlists } = this.form.getRawValue();\n        this.form.patchValue({\n            playlists: [...playlists, id],\n        });\n    }\n\n    public removePlaylist(item: SignagePlaylist) {\n        const { playlists } = this.form.getRawValue();\n        const index = playlists.indexOf(item.id);\n        const new_playlists = [...playlists];\n        new_playlists.splice(index, 1);\n        this.form.patchValue({\n            playlists: new_playlists,\n        });\n    }\n\n    public changeOrder(item: SignagePlaylist, direction: number) {\n        const { playlists } = this.form.getRawValue();\n        const index = playlists.indexOf(item.id);\n        const new_playlists = [...playlists];\n        new_playlists.splice(index, 1);\n        new_playlists.splice(index + direction, 0, item.id);\n        this.form.patchValue({\n            playlists: new_playlists,\n        });\n    }\n\n    public previewPlaylist(item: SignagePlaylist) {}\n}\n","import { Component } from '@angular/core';\n\nimport { SignageStateService } from './signage-state.service';\nimport { combineLatest } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n@Component({\n    selector: 'signage-displays',\n    template: `\n        <mat-progress-bar\n            class=\"w-full mt-4\"\n            [class.opacity-0]=\"!(loading | async)\"\n            mode=\"indeterminate\"\n        ></mat-progress-bar>\n        <simple-table\n            class=\"block min-w-[52rem] text-sm\"\n            [data]=\"display_list\"\n            [columns]=\"[\n                { key: 'name', name: 'Name' },\n                { key: 'description', name: 'Description' },\n                { key: 'playlists', name: 'Playlists', content: playlists_template, size: '10rem' },\n                { key: 'orientation', name: 'Orientation', size: '7rem' },\n                {\n                    key: 'duration',\n                    name: 'Duration',\n                    content: duration_template,\n                    size: '6rem',\n                },\n                {\n                    key: 'actions',\n                    name: ' ',\n                    content: actions_template,\n                    size: '6rem',\n                    sortable: false\n                }\n            ]\"\n            [sortable]=\"true\"\n        ></simple-table>\n        <div class=\"w-full h-8\"></div>\n        <ng-template #playlists_template let-row=\"row\">\n            <div class=\"p-4\">{{ row.playlists.length }} Playlist(s)</div>\n        </ng-template>\n        <ng-template #duration_template let-data=\"data\">\n            <div class=\"p-4\">\n                <code>{{ data | mediaDuration }}</code>\n            </div>\n        </ng-template>\n        <ng-template #actions_template let-row=\"row\">\n            <div class=\"flex items-center space-x-2 p-2\">\n                <button icon matRipple (click)=\"editItem(row)\">\n                    <app-icon>edit</app-icon>\n                </button>\n                <button\n                    icon\n                    matRipple\n                    class=\"text-error\"\n                    (click)=\"deleteItem(row)\"\n                >\n                    <app-icon>delete</app-icon>\n                </button>\n            </div>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class SignageDisplaysComponent {\n    public readonly loading = this._state.loading;\n    public readonly displays = this._state.displays;\n    public readonly playlists = this._state.playlists;\n    public readonly media = this._state.media;\n\n    public readonly deleteItem = (i) => this._state.removePlaylist(i);\n    public readonly editItem = (i) => this._state.editPlaylist(i);\n\n    public readonly display_list = combineLatest([\n        this.displays,\n        this.playlists,\n        this.media,\n    ]).pipe(\n        map(([displays, playlists, media]) =>\n            (displays || []).map((display) => ({\n                ...display,\n                playlists:\n                    display.playlists?.map((id) =>\n                        playlists.find((i) => i.id === id)\n                    ) || [],\n                duration: display.playlists.reduce((acc, id) => {\n                    const playlist = playlists.find((_) => _.id === id);\n                    if (!playlist) return acc;\n                    return (\n                        acc +\n                        playlist.media.reduce(\n                            (acc, item) =>\n                                acc +\n                                (playlist.media_durations[item] ||\n                                    media.find((m) => m.id === item)\n                                        ?.duration ||\n                                    15),\n                            0\n                        )\n                    );\n                }, 0),\n            }))\n        )\n    );\n\n    constructor(private _state: SignageStateService) {}\n}\n","import { Component, EventEmitter, Inject, Output } from '@angular/core';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { uploadFile } from '@placeos/common';\nimport { takeWhile } from 'rxjs/operators';\n\n@Component({\n    selector: 'signage-media-preview-modal',\n    template: `\n        <header\n            class=\"flex items-center justify-between p-2 border-b border-base-300\"\n        >\n            <h1 class=\"px-2\">Preview - {{ name }}</h1>\n            <button icon matRipple mat-dialog-close>\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main class=\"bg-base-200\" *ngIf=\"!loading; else load_state\">\n            <div\n                class=\"max-w-[80vw] max-h-[65vh] w-[80vw] h-[65vh] flex items-center justify-center\"\n            >\n                <img\n                    *ngIf=\"type === 'image'\"\n                    class=\"max-w-full max-h-full\"\n                    [src]=\"resource.toString()\"\n                />\n                <video\n                    *ngIf=\"type === 'video'\"\n                    class=\"max-w-full max-h-full\"\n                    [src]=\"resource.toString()\"\n                    autoplay\n                    controls\n                ></video>\n            </div>\n        </main>\n        <footer\n            *ngIf=\"can_save && !loading\"\n            class=\"p-2 flex items-center justify-end space-x-2 border-t border-base-300\"\n        >\n            <button btn matRipple class=\"w-32\" (click)=\"save.emit()\">\n                Save Media\n            </button>\n        </footer>\n        <ng-template #load_state>\n            <main\n                class=\"flex flex-col items-center justify-center p-8 w-[28rem] h-[20rem] max-w-[80vw] max-h-[65vh]\"\n            >\n                <mat-spinner [diameter]=\"32\"></mat-spinner>\n                <p>{{ loading }}</p>\n            </main>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class SignageMediaPreviewModalComponent {\n    @Output() public readonly save = new EventEmitter<any>();\n    public loading = '';\n    public readonly resource = this._data.url;\n    public readonly type = this._data.type;\n    public readonly name = this._data.name;\n    public readonly file = this._data.file;\n    public readonly can_save = this._data.save !== false;\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA)\n        private _data: {\n            url: URL;\n            type: 'image' | 'video';\n            save: boolean;\n            name: string;\n            file?: File;\n        }\n    ) {}\n}\n","import { Component } from '@angular/core';\n\nimport { SignageStateService } from './signage-state.service';\nimport { AsyncHandler, notifyError } from '@placeos/common';\n\n@Component({\n    selector: 'signage-media',\n    template: `\n        <div\n            class=\"relative bg-base-200 min-h-full w-full\"\n            (document:dragenter)=\"onEnter($event)\"\n            (document:drop)=\"hideOverlay($event)\"\n        >\n            <ng-container *ngIf=\"!(loading | async); else load_template\">\n                <ng-container\n                    *ngIf=\"(media | async)?.length; else empty_template\"\n                >\n                    <div\n                        class=\"flex flex-wrap items-start justify-start w-full p-2\"\n                    >\n                        <div\n                            class=\"m-2 p-2 bg-base-100 rounded-lg overflow-hidden h-[13rem] w-[17rem] border border-base-300 shadow\"\n                            *ngFor=\"let item of media | async\"\n                        >\n                            <button\n                                class=\"w-64 h-36 overflow-hidden bg-base-200 rounded m-0 p-0 relative\"\n                                (click)=\"previewMedia(item)\"\n                            >\n                                <img\n                                    *ngIf=\"\n                                        item.type === 'video'\n                                            ? (item.url | thumbnail)\n                                            : item.url\n                                    \"\n                                    [src]=\"\n                                        item.type === 'video'\n                                            ? (item.url | thumbnail)\n                                            : item.url\n                                    \"\n                                    class=\"object-contain w-full h-full\"\n                                />\n                                <div\n                                    class=\"absolute top-2 left-2 flex items-center justify-center rounded overflow-hidden\"\n                                >\n                                    <div\n                                        class=\"absolute inset-0 bg-base-content opacity-60 z-0\"\n                                    ></div>\n                                    <div\n                                        class=\"relative text-base-100 z-10 px-2 py-1 text-xs\"\n                                    >\n                                        {{\n                                            item.type === 'image'\n                                                ? 'Image'\n                                                : 'Video'\n                                        }}\n                                    </div>\n                                </div>\n                                <div\n                                    class=\"absolute top-2 right-2 flex items-center justify-center rounded overflow-hidden\"\n                                >\n                                    <div\n                                        class=\"absolute inset-0 bg-base-content opacity-60 z-0\"\n                                    ></div>\n                                    <div\n                                        class=\"relative text-base-100 z-10 px-2 py-1 text-xs\"\n                                    >\n                                        {{ count || 0 }} Playlist(s)\n                                    </div>\n                                </div>\n                                <div\n                                    class=\"absolute bottom-2 right-2 flex items-center justify-center rounded overflow-hidden\"\n                                    *ngIf=\"item.duration\"\n                                >\n                                    <div\n                                        class=\"absolute inset-0 bg-base-content opacity-60 z-0\"\n                                    ></div>\n                                    <div\n                                        class=\"relative text-base-100 z-10 px-2 py-1 text-xs\"\n                                    >\n                                        {{ item.duration | mediaDuration }}\n                                    </div>\n                                </div>\n                            </button>\n                            <div\n                                class=\"flex items-center justify-between space-x-2\"\n                            >\n                                <div class=\"truncate flex-1 w-1/2 px-2\">\n                                    {{ item.name }}\n                                </div>\n                                <button icon matRipple>\n                                    <app-icon>more_vert</app-icon>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </ng-container>\n            </ng-container>\n            <div class=\"absolute inset-0\" *ngIf=\"show_dropzone\">\n                <div class=\"absolute inset-0 bg-base-200\"></div>\n                <div class=\"absolute inset-0 bg-base-content opacity-70\"></div>\n                <div\n                    class=\"absolute inset-4 border-4 border-dashed border-neutral text-base-100 rounded-xl flex flex-col items-center justify-center\"\n                >\n                    <app-icon class=\"text-8xl\">upload</app-icon>\n                    <p>Drop file to upload file</p>\n                </div>\n                <input\n                    type=\"file\"\n                    class=\"absolute inset-0 w-full opacity-0\"\n                    (change)=\"previewFile($event)\"\n                />\n            </div>\n        </div>\n        <ng-template #empty_template>\n            <div\n                class=\"absolute inset-0 flex flex-col items-center justify-center space-y-2 opacity-30\"\n            >\n                <app-icon class=\"text-8xl\">hide_image</app-icon>\n                <p>No media found.</p>\n            </div>\n        </ng-template>\n        <ng-template #load_template>\n            <div\n                class=\"absolute inset-0 flex flex-col items-center justify-center space-y-2\"\n            >\n                <mat-spinner diameter=\"32\"></mat-spinner>\n                <p>Loading...</p>\n            </div>\n        </ng-template>\n    `,\n    styles: [\n        `\n            :host {\n                min-height: 100%;\n            }\n        `,\n    ],\n})\nexport class SignageMediaComponent extends AsyncHandler {\n    public readonly loading = this._state.loading;\n    public readonly media = this._state.media;\n    public show_dropzone = false;\n\n    public readonly previewMedia = (item) => this._state.previewMedia(item);\n\n    public onEnter(e) {\n        this.show_dropzone = e?.dataTransfer?.types.includes('Files');\n    }\n\n    public hideOverlay(e) {\n        if (!(e.target instanceof HTMLInputElement)) {\n            e.preventDefault();\n        }\n        this.timeout('hide_overlay', () => (this.show_dropzone = false));\n    }\n\n    constructor(private _state: SignageStateService) {\n        super();\n    }\n\n    public previewFile(event) {\n        const element: HTMLInputElement = event.target as any;\n        /* istanbul ignore else */\n        if (!element?.files?.length) return;\n        const files: FileList = element.files;\n        const file = files[0];\n        if (\n            file &&\n            (file.type.includes('image') || file.type.includes('video'))\n        ) {\n            this._state.previewFileMedia(file);\n        } else {\n            notifyError('Invalid file type.');\n        }\n    }\n}\n","import {\n    MAT_DIALOG_DATA,\n    MatDialog,\n    MatDialogRef,\n} from '@angular/material/dialog';\nimport { SignageStateService } from './signage-state.service';\nimport { Component, ElementRef, Inject, ViewChild } from '@angular/core';\nimport { SignageMedia, SignagePlaylist } from './signage.classes';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { filter, map, startWith } from 'rxjs/operators';\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport { SignageMediaPreviewModalComponent } from './signage-media-preview-modal.component';\nimport { notifyError, notifySuccess } from '@placeos/common';\nimport { th } from 'date-fns/locale';\n\n@Component({\n    selector: 'signage-playlist-modal',\n    template: `\n        <header\n            class=\"flex items-center justify-between p-2 border-b border-base-300\"\n        >\n            <h1 class=\"px-2\">{{ playlist.id ? 'Edit' : 'New' }} Playlist</h1>\n            <button icon matRipple mat-dialog-close *ngIf=\"!loading\">\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main\n            [formGroup]=\"form\"\n            class=\"p-2 flex flex-col\"\n            *ngIf=\"!loading; else load_state\"\n        >\n            <label for=\"name\">Name<span required>*</span></label>\n            <mat-form-field appearance=\"outline\" class=\"w-full\">\n                <input\n                    matInput\n                    name=\"name\"\n                    placeholder=\"Name\"\n                    formControlName=\"name\"\n                />\n                <mat-error>Name is required</mat-error>\n            </mat-form-field>\n            <label for=\"description\">Description</label>\n            <mat-form-field appearance=\"outline\" class=\"w-full\">\n                <textarea\n                    matInput\n                    name=\"description\"\n                    placeholder=\"Description\"\n                    formControlName=\"description\"\n                ></textarea>\n            </mat-form-field>\n            <label for=\"media\">Media</label>\n            <custom-table\n                class=\"block w-full mb-2\"\n                [dataSource]=\"media_list\"\n                [columns]=\"['_index', 'name', 'type', 'duration', 'actions']\"\n                [display_column]=\"[' ', 'Name', 'Type', 'Duration', ' ']\"\n                [column_size]=\"['3r', 'flex', '10r', '6r', '10r']\"\n                [template]=\"{\n                    duration: duration_template,\n                    actions: actions_template\n                }\"\n            >\n            </custom-table>\n            <button\n                btn\n                matRipple\n                class=\"w-full\"\n                [matMenuTriggerFor]=\"media_menu\"\n                (click)=\"focusSearchInput()\"\n            >\n                Add Media\n            </button>\n            <mat-menu #media_menu=\"matMenu\" class=\"w-[32rem] max-w-[80vw]\">\n                <mat-form-field\n                    appearance=\"outline\"\n                    class=\"w-[calc(100%-1rem)] mx-2 no-subscript\"\n                >\n                    <app-icon matPrefix class=\"text-2xl -left-1\">\n                        search\n                    </app-icon>\n                    <input\n                        #search_input\n                        matInput\n                        placeholder=\"Media Name\"\n                        [ngModel]=\"search.getValue()\"\n                        (ngModelChange)=\"search.next($event)\"\n                        [ngModelOptions]=\"{ standalone: true }\"\n                    />\n                </mat-form-field>\n                <button\n                    mat-menu-item\n                    *ngFor=\"let item of new_media | async | slice: 0:8\"\n                    (click)=\"addMedia(item)\"\n                >\n                    <div class=\"flex items-center w-full\">\n                        <div class=\"flex-1 truncate\">{{ item.name }}</div>\n                        <code class=\"capitalize\">{{ item.type }}</code>\n                        <code class=\"bg-base-300 text-base-content\">{{\n                            item.duration | mediaDuration\n                        }}</code>\n                    </div>\n                </button>\n            </mat-menu>\n        </main>\n        <footer\n            class=\"p-2 flex items-center justify-end space-x-2 border-t border-base-300\"\n            *ngIf=\"!loading\"\n        >\n            <button btn matRipple class=\"w-32\" (click)=\"savePlaylist()\">\n                Save Playlist\n            </button>\n        </footer>\n        <ng-template #duration_template let-row=\"row\">\n            <button\n                matTooltip=\"Set Custom Duration\"\n                [matMenuTriggerFor]=\"duration_menu\"\n                [class.pointer-events-none]=\"row.type !== 'image'\"\n            >\n                <code\n                    [class.bg-warning]=\"form.value.media_durations[row.id]\"\n                    [class.text-warning-content]=\"\n                        form.value.media_durations[row.id]\n                    \"\n                >\n                    {{\n                        form.value.media_durations[row.id] || row.duration\n                            | mediaDuration\n                    }}\n                </code>\n            </button>\n            <mat-menu #duration_menu=\"matMenu\" class=\"w-[20rem] max-w-[80vw]\">\n                <mat-form-field\n                    appearance=\"outline\"\n                    class=\"w-[calc(100%-1rem)] mx-2 no-subscript\"\n                >\n                    <mat-select\n                        [ngModel]=\"form.value.media_durations[row.id] || 0\"\n                        (ngModelChange)=\"setDuration(row.id, $event)\"\n                        [ngModelOptions]=\"{ standalone: true }\"\n                    >\n                        <mat-option [value]=\"0\">Use Media Default</mat-option>\n                        <mat-option [value]=\"5\">5 seconds</mat-option>\n                        <mat-option [value]=\"10\">10 seconds</mat-option>\n                        <mat-option [value]=\"15\">15 seconds</mat-option>\n                        <mat-option [value]=\"30\">30 seconds</mat-option>\n                        <mat-option [value]=\"45\">45 seconds</mat-option>\n                        <mat-option [value]=\"60\">1 minute</mat-option>\n                        <mat-option [value]=\"75\"\n                            >1 minute 15 seconds</mat-option\n                        >\n                        <mat-option [value]=\"90\"\n                            >1 minute 30 seconds</mat-option\n                        >\n                        <mat-option [value]=\"105\"\n                            >1 minute 45 seconds</mat-option\n                        >\n                        <mat-option [value]=\"120\">2 minute</mat-option>\n                        <mat-option [value]=\"135\"\n                            >2 minute 15 seconds</mat-option\n                        >\n                        <mat-option [value]=\"150\"\n                            >2 minute 30 seconds</mat-option\n                        >\n                        <mat-option [value]=\"165\"\n                            >2 minute 45 seconds</mat-option\n                        >\n                        <mat-option [value]=\"180\">3 minute</mat-option>\n                        <mat-option [value]=\"195\"\n                            >3 minute 15 seconds</mat-option\n                        >\n                        <mat-option [value]=\"210\"\n                            >3 minute 30 seconds</mat-option\n                        >\n                        <mat-option [value]=\"225\"\n                            >3 minute 45 seconds</mat-option\n                        >\n                        <mat-option [value]=\"240\">4 minute</mat-option>\n                        <mat-option [value]=\"255\"\n                            >4 minute 15 seconds</mat-option\n                        >\n                        <mat-option [value]=\"270\"\n                            >4 minute 30 seconds</mat-option\n                        >\n                        <mat-option [value]=\"285\"\n                            >4 minute 45 seconds</mat-option\n                        >\n                        <mat-option [value]=\"300\">5 minute</mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </mat-menu>\n        </ng-template>\n        <ng-template\n            #actions_template\n            let-row=\"row\"\n            let-first=\"first\"\n            let-last=\"last\"\n        >\n            <div class=\"w-full flex items-center justify-end\">\n                <button\n                    icon\n                    matRipple\n                    matTooltip=\"Move Media to previous item\"\n                    [disabled]=\"first\"\n                    (click)=\"changeOrder(row, -1)\"\n                >\n                    <app-icon>arrow_upward</app-icon>\n                </button>\n                <button\n                    icon\n                    matRipple\n                    matTooltip=\"Move Media to next item\"\n                    [disabled]=\"last\"\n                    (click)=\"changeOrder(row, 1)\"\n                >\n                    <app-icon>arrow_downward</app-icon>\n                </button>\n                <button\n                    icon\n                    matRipple\n                    matTooltip=\"Preview Media\"\n                    (click)=\"previewMedia(row)\"\n                >\n                    <app-icon>visibility</app-icon>\n                </button>\n                <button\n                    icon\n                    matRipple\n                    matTooltip=\"Remove Media from Playlist\"\n                    class=\"text-error\"\n                    (click)=\"removeMedia(row)\"\n                >\n                    <app-icon>delete</app-icon>\n                </button>\n            </div>\n        </ng-template>\n        <ng-template #load_state>\n            <main class=\"flex flex-col items-center justify-center p-8\">\n                <mat-spinner [diameter]=\"32\"></mat-spinner>\n                <p class=\"mt-4\">Saving Playlist...</p>\n            </main>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class SignagePlaylistModalComponent {\n    public loading = false;\n    public readonly playlist = this._data;\n    public readonly media = this._state.media;\n\n    public readonly search = new BehaviorSubject('');\n\n    public readonly form = new FormGroup({\n        id: new FormControl(this.playlist.id || ''),\n        name: new FormControl(this.playlist.name || '', [Validators.required]),\n        description: new FormControl(this.playlist.description || ''),\n        media: new FormControl(this.playlist.media || []),\n        media_durations: new FormControl(this.playlist.media_durations || {}),\n    });\n\n    public readonly media_list = combineLatest([\n        this.media,\n        this.form.valueChanges.pipe(startWith(this.form.getRawValue())),\n    ]).pipe(\n        map(([media_list, { media }]) =>\n            (this.form.getRawValue().media || []).map(\n                (id) =>\n                    media_list.find((_) => _.id === id) ||\n                    new SignageMedia({ id })\n            )\n        )\n    );\n\n    public readonly new_media = combineLatest([\n        this.media,\n        this.search,\n        this.form.valueChanges.pipe(startWith(this.form.getRawValue())),\n    ]).pipe(\n        map(([all_media, search, _]) =>\n            all_media\n                .filter((_) => !this.form.getRawValue().media.includes(_.id))\n                .filter((_) =>\n                    _.name.toLowerCase().includes(search.toLowerCase())\n                )\n        )\n    );\n\n    @ViewChild('search_input')\n    public search_input: ElementRef<HTMLInputElement>;\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA) private _data: SignagePlaylist = {} as any,\n        private _state: SignageStateService,\n        private _dialog: MatDialog,\n        private _dialog_ref: MatDialogRef<SignagePlaylistModalComponent>\n    ) {}\n\n    public indexOf(id: string) {\n        return this.form.getRawValue().media.indexOf(id);\n    }\n\n    public focusSearchInput() {\n        setTimeout(() => this.search_input.nativeElement?.focus(), 100);\n    }\n\n    public async savePlaylist() {\n        this.form.markAllAsTouched();\n        this.form.updateValueAndValidity();\n        if (this.form.invalid) return;\n        this.loading = true;\n        await this._state.savePlaylist(this.form.getRawValue()).catch((_) => {\n            notifyError('Error saving playlist');\n            this.loading = false;\n            throw _;\n        });\n        this._dialog_ref.close();\n    }\n\n    public setDuration(id: string, duration: number) {\n        const { media_durations } = this.form.getRawValue();\n        const new_media_durations = { ...media_durations };\n        new_media_durations[id] = duration;\n        this.form.patchValue({ media_durations: new_media_durations });\n    }\n\n    public addMedia(item: SignageMedia) {\n        const { id } = item;\n        const { media } = this.form.getRawValue();\n        this.form.patchValue({\n            media: [...media, id],\n        });\n    }\n\n    public removeMedia(item: SignageMedia) {\n        const { media, media_durations } = this.form.getRawValue();\n        const index = media.indexOf(item.id);\n        const new_media = [...media];\n        delete media_durations[item.id];\n        new_media.splice(index, 1);\n        this.form.patchValue({\n            media: new_media,\n            media_durations: { ...media_durations },\n        });\n    }\n\n    public changeOrder(item: SignageMedia, direction: number) {\n        const { media } = this.form.getRawValue();\n        const index = media.indexOf(item.id);\n        const new_media = [...media];\n        new_media.splice(index, 1);\n        new_media.splice(index + direction, 0, item.id);\n        this.form.patchValue({\n            media: new_media,\n        });\n    }\n\n    public previewMedia(item: SignageMedia) {\n        const { url, type, name } = item;\n        const ref = this._dialog.open(SignageMediaPreviewModalComponent, {\n            data: { url, type, name, save: false },\n        });\n        ref.afterClosed().subscribe(() => URL.revokeObjectURL(url));\n    }\n}\n","import { Component } from '@angular/core';\n\nimport { SignageStateService } from './signage-state.service';\nimport { SignagePlaylist } from './signage.classes';\nimport { map, take, tap } from 'rxjs/operators';\nimport { combineLatest } from 'rxjs';\n\n@Component({\n    selector: 'signage-playlists',\n    template: `\n        <mat-progress-bar\n            class=\"w-full mt-4\"\n            [class.opacity-0]=\"!(loading | async)\"\n            mode=\"indeterminate\"\n        ></mat-progress-bar>\n        <simple-table\n            class=\"block min-w-[48rem] text-sm\"\n            [data]=\"playlist_list\"\n            [columns]=\"[\n                { key: 'name', name: 'Name' },\n                { key: 'description', name: 'Description' },\n                { key: 'media', name: 'Media', content: media_template, size: '10rem' },\n                {\n                    key: 'duration',\n                    name: 'Duration',\n                    content: duration_template,\n                    size: '6rem',\n                },\n                {\n                    key: 'actions',\n                    name: ' ',\n                    content: actions_template,\n                    size: '6rem',\n                    sortable: false\n                }\n            ]\"\n            [sortable]=\"true\"\n        ></simple-table>\n        <div class=\"w-full h-8\"></div>\n        <ng-template #media_template let-row=\"row\">\n            <div class=\"p-4\">{{ row.media.length }} Media Item(s)</div>\n        </ng-template>\n        <ng-template #duration_template let-data=\"data\">\n            <div class=\"p-4\">\n                <code>{{ data | mediaDuration }}</code>\n            </div>\n        </ng-template>\n        <ng-template #actions_template let-row=\"row\">\n            <div class=\"flex items-center space-x-2 p-2\">\n                <button icon matRipple (click)=\"editItem(row)\">\n                    <app-icon>edit</app-icon>\n                </button>\n                <button\n                    icon\n                    matRipple\n                    class=\"text-error\"\n                    (click)=\"deleteItem(row)\"\n                >\n                    <app-icon>delete</app-icon>\n                </button>\n            </div>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class SignagePlaylistsComponent {\n    public readonly loading = this._state.loading;\n    public readonly playlists = this._state.playlists;\n    public readonly media = this._state.media;\n\n    public readonly deleteItem = (i) => this._state.removePlaylist(i);\n    public readonly editItem = (i) => this._state.editPlaylist(i);\n\n    public readonly playlist_list = combineLatest([\n        this.playlists,\n        this.media,\n    ]).pipe(\n        map(([playlists, media]) =>\n            playlists.map((playlist) => ({\n                ...playlist,\n                duration: playlist.media.reduce(\n                    (acc, item) =>\n                        acc +\n                        (playlist.media_durations[item] ||\n                            media.find((m) => m.id === item)?.duration ||\n                            15),\n                    0\n                ),\n            }))\n        )\n    );\n\n    constructor(private _state: SignageStateService) {}\n}\n","import { Injectable } from '@angular/core';\nimport {\n    notifyError,\n    notifySuccess,\n    randomString,\n    uploadFile,\n} from '@placeos/common';\nimport { OrganisationService } from '@placeos/organisation';\nimport {\n    PlaceMetadata,\n    queryZones,\n    showMetadata,\n    updateMetadata,\n} from '@placeos/ts-client';\nimport { Attachment } from '@placeos/users';\nimport { BehaviorSubject, Observable, combineLatest, of } from 'rxjs';\nimport {\n    catchError,\n    filter,\n    map,\n    shareReplay,\n    switchMap,\n    take,\n} from 'rxjs/operators';\n\nimport {\n    SignageDisplay,\n    SignageMedia,\n    SignagePlaylist,\n} from './signage.classes';\nimport { MatDialog } from '@angular/material/dialog';\nimport { SignageMediaPreviewModalComponent } from './signage-media-preview-modal.component';\nimport { SignagePlaylistModalComponent } from './signage-playlist-modal.component';\nimport { SignageDisplayModalComponent } from './signage-display-modal.component';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class SignageStateService {\n    private _loading = new BehaviorSubject(false);\n    private _change = new BehaviorSubject(0);\n    private _active_upload = new BehaviorSubject<Attachment>(null);\n\n    public readonly loading = this._loading.asObservable();\n\n    public readonly media: Observable<SignageMedia[]> = combineLatest([\n        this._org.active_building,\n        this._change,\n    ]).pipe(\n        filter(([_]) => !!_?.id),\n        switchMap(([bld]) =>\n            showMetadata(bld.id, 'signage-media').pipe(\n                catchError(() => of({} as PlaceMetadata))\n            )\n        ),\n        map((_) => (_.details instanceof Array ? _.details : null) || []),\n        shareReplay(1)\n    );\n\n    public readonly playlists: Observable<SignagePlaylist[]> = combineLatest([\n        this._org.active_building,\n        this._change,\n    ]).pipe(\n        filter(([_]) => !!_?.id),\n        switchMap(([bld]) =>\n            showMetadata(bld.id, 'signage-playlists').pipe(\n                catchError(() => of({} as PlaceMetadata))\n            )\n        ),\n        map((_) => (_.details instanceof Array ? _.details : []))\n    );\n\n    public readonly displays: Observable<SignageDisplay[]> = combineLatest([\n        this._org.active_building,\n        this._change,\n    ]).pipe(\n        filter(([_]) => !!_?.id),\n        switchMap(([bld]) =>\n            showMetadata(bld.id, 'signage-displays').pipe(\n                catchError(() => of({} as PlaceMetadata))\n            )\n        ),\n        map((_) => (_.details instanceof Array ? _.details : []))\n    );\n\n    public readonly zones = combineLatest([\n        this._org.active_building,\n        this._change,\n    ]).pipe(\n        filter(([_]) => !!_?.id),\n        switchMap(([bld]) =>\n            queryZones({ parent_id: bld.id, tags: 'signage', limit: 100 }).pipe(\n                catchError(() => of({ data: [] }))\n            )\n        ),\n        map((_) => _.data || [])\n    );\n\n    constructor(\n        private _org: OrganisationService,\n        private _dialog: MatDialog\n    ) {}\n\n    public editPlaylist(playlist: SignagePlaylist = new SignagePlaylist()) {\n        const ref = this._dialog.open(SignagePlaylistModalComponent, {\n            data: playlist,\n        });\n        ref.afterClosed().subscribe(() => this._change.next(Date.now()));\n    }\n\n    public async savePlaylist(playlist: SignagePlaylist, remove = false) {\n        const bld = this._org.building.id;\n        const playlist_list =\n            (await this.playlists.pipe(take(1)).toPromise()) || [];\n        const idx = playlist_list.findIndex((_) => _.id === playlist.id);\n        if (idx >= 0) playlist_list.splice(idx, 1);\n        if (!playlist.id) (playlist as any).id = `playlist-${randomString(8)}`;\n        if (!remove) playlist_list.push(playlist);\n        await updateMetadata(bld, {\n            name: 'signage-playlists',\n            details: playlist_list,\n            description: 'Playlists for signage displays',\n        }).toPromise();\n        notifySuccess(`Successfully ${remove ? 'removed' : 'saved'} playlist.`);\n        this._change.next(Date.now());\n    }\n\n    public async removePlaylist(playlist: SignagePlaylist) {\n        await this.savePlaylist(playlist, true);\n    }\n\n    public editDisplay(display: SignageDisplay = new SignageDisplay()) {\n        const ref = this._dialog.open(SignageDisplayModalComponent, {\n            data: display,\n        });\n        ref.afterClosed().subscribe(() => this._change.next(Date.now()));\n    }\n\n    public async saveDisplay(display: SignageDisplay, remove = false) {\n        const bld = this._org.building.id;\n        const display_list = await this.displays.pipe(take(1)).toPromise();\n        const idx = display_list.findIndex((_) => _.id === display.id);\n        if (idx >= 0) display_list.splice(idx, 1);\n        if (!display.id) (display as any).id = `display-${randomString(8)}`;\n        if (!remove) display_list.push(display);\n        await updateMetadata(bld, {\n            name: 'signage-displays',\n            details: display_list,\n            description: 'Displays for signage displays',\n        }).toPromise();\n        notifySuccess(`Successfully ${remove ? 'removed' : 'saved'} display.`);\n        this._change.next(Date.now());\n    }\n\n    public async removeDisplay(display: SignageDisplay) {\n        await this.saveDisplay(display, true);\n    }\n\n    public previewMedia(item: SignageMedia) {\n        const { url, type, name } = item;\n        const ref = this._dialog.open(SignageMediaPreviewModalComponent, {\n            data: { url, type, name, save: false },\n        });\n        ref.afterClosed().subscribe(() => URL.revokeObjectURL(url));\n    }\n\n    public previewFileMedia(media: File) {\n        const url = URL.createObjectURL(media);\n        const type = media.type.includes('image') ? 'image' : 'video';\n        const ref = this._dialog.open(SignageMediaPreviewModalComponent, {\n            data: { url, type, name: media.name, save: true, file: media },\n        });\n        ref.afterClosed().subscribe(() => URL.revokeObjectURL(url));\n        ref.componentInstance.save.subscribe(async () => {\n            ref.componentInstance.loading = 'Saving...';\n            await this.addMedia(media).catch((e) => {\n                notifyError('Error saving media.');\n                ref.componentInstance.loading = '';\n                throw e;\n            });\n            ref.close();\n        });\n    }\n\n    public async addMedia(file: File) {\n        const upload = () =>\n            new Promise<string>((resolve, reject) => {\n                let state = null;\n                let resolved = false;\n                uploadFile(file).subscribe(\n                    (s) => {\n                        state = s;\n                        if (s.link) {\n                            resolved = true;\n                            resolve(s.link);\n                        }\n                    },\n                    reject,\n                    () => (!resolved ? resolve(state) : null)\n                );\n            });\n        const media = await upload();\n        const media_list = await this.media.pipe(take(1)).toPromise();\n        const video_metadata = new Promise<[boolean, number]>((resolve) => {\n            const url = URL.createObjectURL(file);\n            // file is loaded\n            if (file.type.includes('video')) {\n                let video = document.createElement('video');\n                video.src = url.toString();\n                video.addEventListener('loadedmetadata', () => {\n                    const { videoWidth, videoHeight } = video;\n                    resolve([videoWidth > videoHeight, duration]);\n                });\n                video.load();\n            } else {\n                let img = new Image();\n                img.onload = () => resolve([img.width > img.height, 0]);\n                img.src = url.toString(); // is the data URL because called with readAsDataURL\n            }\n        });\n        const [is_landscape, duration] = await video_metadata;\n        media_list.push({\n            id: `media-${randomString(8)}`,\n            name: file.name,\n            description: '',\n            url: media,\n            type: file.type.includes('image') ? 'image' : 'video',\n            orientation: is_landscape ? 'landscape' : 'portrait',\n            duration: duration || 15,\n        });\n        const bld = this._org.building.id;\n        await updateMetadata(bld, {\n            name: 'signage-media',\n            details: media_list,\n            description: 'Media for signage displays',\n        }).toPromise();\n        this._active_upload.next(null);\n        this._change.next(Date.now());\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { first } from 'rxjs/operators';\n\nimport { AsyncHandler } from '@placeos/common';\nimport { OrganisationService } from '@placeos/organisation';\nimport { SignageStateService } from './signage-state.service';\n\n@Component({\n    selector: 'signage-topbar',\n    template: `\n        <div\n            class=\"flex items-center bg-base-100 h-20 px-4 border-b border-base-200 space-x-2\"\n        >\n            <!-- <mat-form-field appearance=\"outline\">\n                <mat-select\n                    multiple\n                    [(ngModel)]=\"zones\"\n                    (ngModelChange)=\"updateZones($event)\"\n                    placeholder=\"All Levels\"\n                >\n                    <mat-option\n                        *ngFor=\"let level of levels | async\"\n                        [value]=\"level.id\"\n                    >\n                        {{ level.display_name || level.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-slide-toggle\n                class=\"m-2\"\n                [ngModel]=\"(filters | async)?.only_onsite\"\n                (ngModelChange)=\"setFilters({ only_onsite: $event })\"\n                ><div class=\"text-xs\">Onsite Only</div></mat-slide-toggle\n            >\n            <div class=\"flex-1 w-2\"></div>\n            <searchbar\n                class=\"mr-2\"\n                (modelChange)=\"setSearch($event)\"\n            ></searchbar> -->\n        </div>\n    `,\n    styles: [\n        `\n            mat-form-field {\n                height: 3.25em;\n                width: 8em;\n            }\n        `,\n    ],\n})\nexport class SignageTopbarComponent extends AsyncHandler implements OnInit {\n    /** List of selected levels */\n    public zones: string[] = [];\n    /** List of levels for the active building */\n    public readonly levels = this._org.active_levels;\n\n    // public readonly filters = this._state.filters;\n    // /** Set filtered date */\n    // public readonly setDate = (date) => this._state.setFilters({ date });\n    // /** Set filtered date */\n    // public readonly setFilters = (filters) => this._state.setFilters(filters);\n    // /** Set filter string */\n    // public readonly setSearch = (str) => this._state.setSearchString(str);\n    // /** Update active zones for desks */\n    // public readonly updateZones = (zones) => {\n    //     this._router.navigate([], {\n    //         relativeTo: this._route,\n    //         queryParams: { zone_ids: zones.join(',') },\n    //     });\n    //     this._state.setFilters({ zones });\n    // };\n\n    constructor(\n        private _state: SignageStateService,\n        private _org: OrganisationService,\n        private _route: ActivatedRoute,\n        private _router: Router\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe((params) => {\n                if (params.has('zone_ids')) {\n                    const zones = params.get('zone_ids').split(',');\n                    if (zones.length) {\n                        const level = this._org.levelWithID(zones);\n                        if (!level) {\n                            return;\n                        }\n                        this._org.building = this._org.buildings.find(\n                            (bld) => bld.id === level.parent_id\n                        );\n                        this.zones = zones;\n                    }\n                }\n            })\n        );\n        this.subscription(\n            'levels',\n            this._org.active_levels.subscribe((levels) => {\n                this.zones = this.zones.filter((zone) =>\n                    levels.find((lvl) => lvl.id === zone)\n                );\n                if (!this.zones.length && levels.length) {\n                    this.zones.push(levels[0].id);\n                }\n                // this.updateZones(this.zones);\n            })\n        );\n        // this.setSearch('');\n    }\n}\n","import { Component } from '@angular/core';\n\nimport { SignageStateService } from './signage-state.service';\n\n@Component({\n    selector: 'signage-triggers',\n    template: ``,\n    styles: [``],\n})\nexport class SignageTriggersComponent {\n    public readonly loading = this._state.loading;\n\n    constructor(private _state: SignageStateService) {}\n}\n","import { Component } from '@angular/core';\n\nimport { SignageStateService } from './signage-state.service';\n\n@Component({\n    selector: 'signage-zones',\n    template: ``,\n    styles: [``],\n})\nexport class SignageZonesComponent {\n    public readonly loading = this._state.loading;\n\n    constructor(private _state: SignageStateService) {}\n}\n","export class SignagePlaylist {\n    public readonly id: string;\n    public readonly name: string;\n    public readonly description: string;\n    public readonly media: string[];\n    public readonly media_durations: Record<string, number>;\n\n    constructor(_data: Partial<SignagePlaylist> = {}) {\n        this.id = _data.id || '';\n        this.name = _data.name || '';\n        this.description = _data.description || '';\n        this.media = _data.media || [];\n        this.media_durations = _data.media_durations || {};\n    }\n}\n\nexport class SignageDisplay {\n    public readonly id: string;\n    public readonly name: string;\n    public readonly description: string;\n    public readonly orientation: 'landscape' | 'portrait';\n    public readonly playlists: string[];\n\n    constructor(_data: Partial<SignageDisplay> = {}) {\n        this.id = _data.id || '';\n        this.name = _data.name || '';\n        this.description = _data.description || '';\n        this.orientation = _data.orientation || 'landscape';\n        this.playlists = _data.playlists || [];\n    }\n}\n\nexport class SignageZone {\n    public readonly id: string;\n    public readonly zone_id: string;\n    public readonly name: string;\n    public readonly description: string;\n    public readonly playlists: string[];\n\n    constructor(_data: Partial<SignageZone> = {}) {\n        this.id = _data.id || '';\n        this.zone_id = _data.zone_id || '';\n        this.name = _data.name || '';\n        this.description = _data.description || '';\n        this.playlists = _data.playlists || [];\n    }\n}\n\nexport class SignageTrigger {\n    public readonly id: string;\n    public readonly zone_id: string;\n    public readonly name: string;\n    public readonly description: string;\n    public readonly playlists: string[];\n\n    constructor(_data: Partial<SignageTrigger> = {}) {\n        this.id = _data.id || '';\n        this.zone_id = _data.zone_id || '';\n        this.name = _data.name || '';\n        this.description = _data.description || '';\n        this.playlists = _data.playlists || [];\n    }\n}\n\nexport class SignageMedia {\n    public readonly id: string;\n    public readonly name: string;\n    public readonly description: string;\n    public readonly type: 'image' | 'video';\n    public readonly duration: number;\n    public readonly orientation: 'landscape' | 'portrait';\n    public readonly url: string;\n\n    constructor(_data: Partial<SignageMedia> = {}) {\n        this.id = _data.id || '';\n        this.name = _data.name || '';\n        this.description = _data.description || '';\n        this.type = _data.type || 'image';\n        this.duration = _data.duration || 15;\n        this.orientation = _data.orientation || 'landscape';\n        this.url = _data.url || '';\n    }\n}\n","import { Component, OnInit } from '@angular/core';\n\nimport { SignageStateService } from './signage-state.service';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { AsyncHandler } from '@placeos/common';\n\n@Component({\n    selector: '[app-new-staff]',\n    template: `\n        <app-topbar></app-topbar>\n        <div class=\"flex flex-1 h-px\">\n            <app-sidebar></app-sidebar>\n            <main class=\"flex flex-col flex-1 w-1/2 h-full\">\n                <div class=\"p-8 h-28 flex items-center justify-between\">\n                    <h2 class=\"text-2xl font-medium\">\n                        Signage - {{ active_link }}\n                    </h2>\n                    <button\n                        btn\n                        matRipple\n                        class=\"w-32\"\n                        (click)=\"newItem(active_link)\"\n                        *ngIf=\"active_link !== 'Media'\"\n                    >\n                        Add {{ singular(active_link) }}\n                    </button>\n                </div>\n                <div class=\"px-8\">\n                    <nav mat-tab-nav-bar [tabPanel]=\"tabPanel\">\n                        @for (link of links; track link) {\n                        <a\n                            mat-tab-link\n                            [routerLink]=\"'/signage/' + (link | lowercase)\"\n                            (click)=\"active_link = link\"\n                            [active]=\"active_link == link\"\n                        >\n                            {{ link }}\n                        </a>\n                        }\n                    </nav>\n                </div>\n                <mat-tab-nav-panel\n                    class=\"flex-1 h-1/2 overflow-auto px-8\"\n                    #tabPanel\n                >\n                    <router-outlet></router-outlet>\n                </mat-tab-nav-panel>\n            </main>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n                background-color: var(--b1);\n            }\n        `,\n    ],\n})\nexport class SignageComponent extends AsyncHandler implements OnInit {\n    public readonly loading = this._state.loading;\n    public links = ['Playlists', 'Media', 'Displays', 'Zones', 'Triggers'];\n    public active_link = this.links[0];\n\n    public singular(name: string) {\n        return name.replace(/s$/, '');\n    }\n\n    public newItem(name: string) {\n        switch (name) {\n            case 'Playlists':\n                this._state.editPlaylist();\n                break;\n            case 'Displays':\n                this._state.editDisplay();\n                break;\n            case 'Zones':\n                // this._state.editZone();\n                break;\n            case 'Triggers':\n                // this._state.editTrigger();\n                break;\n        }\n    }\n\n    constructor(private _state: SignageStateService, private _router: Router) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'route.query',\n            this._router.events.subscribe((event) => {\n                if (event instanceof NavigationEnd) {\n                    this.active_link = this.links.find((_) =>\n                        this._router.url.includes(_.toLowerCase())\n                    );\n                }\n            })\n        );\n        this.active_link = this.links.find((_) =>\n            this._router.url.includes(_.toLowerCase())\n        );\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule, Type } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Route } from '@angular/router';\n\nimport { UIModule } from '../ui/ui.module';\nimport { SignageComponent } from './signage.component';\nimport { SignageTopbarComponent } from './signage-topbar.component';\nimport { SignagePlaylistsComponent } from './signage-playlists.component';\nimport { SignageDisplaysComponent } from './signage-displays.component';\nimport { SignageZonesComponent } from './signage-zones.component';\nimport { SignageTriggersComponent } from './signage-triggers.component';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { SignageMediaComponent } from './signage-media.component';\nimport { SignageMediaPreviewModalComponent } from './signage-media-preview-modal.component';\nimport { ComponentsModule } from '@placeos/components';\nimport { SignagePlaylistModalComponent } from './signage-playlist-modal.component';\nimport { SignageDisplayModalComponent } from './signage-display-modal.component';\n\nconst ROUTES: Route[] = [\n    {\n        path: '',\n        component: SignageComponent,\n        children: [\n            { path: '', redirectTo: 'playlists', pathMatch: 'full' },\n            { path: 'playlists', component: SignagePlaylistsComponent },\n            { path: 'media', component: SignageMediaComponent },\n            { path: 'displays', component: SignageDisplaysComponent },\n            { path: 'zones', component: SignageZonesComponent },\n            { path: 'triggers', component: SignageTriggersComponent },\n            { path: '*', redirectTo: 'playlists', pathMatch: 'full' },\n        ],\n    },\n];\n\nexport const COMPONENTS: Type<any>[] = [\n    SignageComponent,\n    SignageTopbarComponent,\n    SignagePlaylistsComponent,\n    SignageMediaComponent,\n    SignageDisplaysComponent,\n    SignageZonesComponent,\n    SignageTriggersComponent,\n    SignageMediaPreviewModalComponent,\n    SignagePlaylistModalComponent,\n    SignageDisplayModalComponent,\n];\n\n@NgModule({\n    declarations: [...COMPONENTS],\n    imports: [\n        CommonModule,\n        FormsModule,\n        UIModule,\n        ComponentsModule,\n        RouterModule.forChild(ROUTES),\n        MatTabsModule,\n    ],\n})\nexport class SignageModule {}\n"],"names":["ElementRef","BehaviorSubject","combineLatest","map","startWith","tap","SignageDisplay","SignagePlaylist","FormControl","FormGroup","Validators","MAT_DIALOG_DATA","MatDialog","MatDialogRef","SignageStateService","notifyError","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","SignageDisplayModalComponent_main_4_button_37_Template_button_click_0_listener","item_r4","ɵɵrestoreView","_r3","$implicit","ctx_r1","ɵɵnextContext","ɵɵresetView","addPlaylist","ɵɵadvance","ɵɵtextInterpolate","name","ɵɵpipeBind1","duration","ɵɵelement","SignageDisplayModalComponent_main_4_Template_button_click_28_listener","_r1","focusSearchInput","SignageDisplayModalComponent_main_4_Template_input_ngModelChange_35_listener","$event","search","next","ɵɵtemplate","SignageDisplayModalComponent_main_4_button_37_Template","ɵɵproperty","form","playlist_list","ɵɵpureFunction0","_c1","_c2","_c3","ɵɵpureFunction2","_c4","duration_template_r7","actions_template_r6","media_menu_r5","getValue","_c5","ɵɵpipeBind3","new_playlists","SignageDisplayModalComponent_footer_5_Template_button_click_1_listener","_r8","saveDisplay","SignageDisplayModalComponent_ng_template_6_Template_button_click_1_listener","row_r10","_r9","row","changeOrder","SignageDisplayModalComponent_ng_template_6_Template_button_click_4_listener","SignageDisplayModalComponent_ng_template_6_Template_button_click_7_listener","previewPlaylist","SignageDisplayModalComponent_ng_template_6_Template_button_click_10_listener","removePlaylist","first_r11","last_r12","ɵɵtextInterpolate1","data_r13","SignageDisplayModalComponent","constructor","_data","_state","_dialog","_dialog_ref","loading","display","playlists","media","pipe","_","reduce","a","b","media_durations","find","id","console","log","required","description","orientation","valueChanges","getRawValue","all_playlist","filter","includes","toLowerCase","setTimeout","search_input","nativeElement","focus","_this","_asyncToGenerator","markAllAsTouched","updateValueAndValidity","invalid","catch","close","item","patchValue","index","indexOf","splice","direction","ɵɵdirectiveInject","i1","i2","_2","selectors","viewQuery","SignageDisplayModalComponent_Query","rf","ctx","SignageDisplayModalComponent_button_3_Template","SignageDisplayModalComponent_main_4_Template","SignageDisplayModalComponent_footer_5_Template","SignageDisplayModalComponent_ng_template_6_Template","ɵɵtemplateRefExtractor","SignageDisplayModalComponent_ng_template_8_Template","SignageDisplayModalComponent_ng_template_10_Template","load_state_r14","row_r1","length","data_r2","SignageDisplaysComponent_ng_template_8_Template_button_click_1_listener","row_r4","ctx_r4","editItem","SignageDisplaysComponent_ng_template_8_Template_button_click_4_listener","deleteItem","SignageDisplaysComponent","displays","i","editPlaylist","display_list","acc","playlist","m","decls","vars","consts","template","SignageDisplaysComponent_Template","SignageDisplaysComponent_ng_template_4_Template","SignageDisplaysComponent_ng_template_6_Template","SignageDisplaysComponent_ng_template_8_Template","ɵɵclassProp","ɵɵpureFunction6","_c6","_c0","ɵɵpureFunction1","playlists_template_r6","actions_template_r8","EventEmitter","ctx_r0","resource","toString","ɵɵsanitizeUrl","SignageMediaPreviewModalComponent_main_6_img_2_Template","SignageMediaPreviewModalComponent_main_6_video_3_Template","type","SignageMediaPreviewModalComponent_footer_7_Template_button_click_1_listener","_r2","save","emit","SignageMediaPreviewModalComponent","url","file","can_save","outputs","SignageMediaPreviewModalComponent_Template","SignageMediaPreviewModalComponent_main_6_Template","SignageMediaPreviewModalComponent_footer_7_Template","SignageMediaPreviewModalComponent_ng_template_8_Template","load_state_r3","AsyncHandler","item_r3","SignageMediaComponent_ng_container_1_ng_container_1_div_2_Template_button_click_1_listener","ctx_r3","previewMedia","SignageMediaComponent_ng_container_1_ng_container_1_div_2_img_2_Template","SignageMediaComponent_ng_container_1_ng_container_1_div_2_div_12_Template","count","ɵɵelementContainerStart","SignageMediaComponent_ng_container_1_ng_container_1_div_2_Template","SignageMediaComponent_ng_container_1_ng_container_1_Template","tmp_3_0","empty_template_r5","SignageMediaComponent_div_3_Template_input_change_8_listener","_r6","previewFile","SignageMediaComponent","onEnter","e","show_dropzone","dataTransfer","types","hideOverlay","target","HTMLInputElement","preventDefault","timeout","event","element","files","previewFileMedia","features","ɵɵInheritDefinitionFeature","SignageMediaComponent_Template","SignageMediaComponent_Template_div_dragenter_0_listener","ɵɵresolveDocument","SignageMediaComponent_Template_div_drop_0_listener","SignageMediaComponent_ng_container_1_Template","SignageMediaComponent_div_3_Template","SignageMediaComponent_ng_template_4_Template","SignageMediaComponent_ng_template_6_Template","load_template_r7","SignageMedia","SignagePlaylistModalComponent_main_4_button_25_Template_button_click_0_listener","addMedia","SignagePlaylistModalComponent_main_4_Template_button_click_16_listener","SignagePlaylistModalComponent_main_4_Template_input_ngModelChange_23_listener","SignagePlaylistModalComponent_main_4_button_25_Template","media_list","duration_template_r6","actions_template_r7","new_media","SignagePlaylistModalComponent_footer_5_Template_button_click_1_listener","savePlaylist","SignagePlaylistModalComponent_ng_template_6_Template_mat_select_ngModelChange_7_listener","setDuration","duration_menu_r11","value","SignagePlaylistModalComponent_ng_template_8_Template_button_click_1_listener","row_r13","_r12","SignagePlaylistModalComponent_ng_template_8_Template_button_click_4_listener","SignagePlaylistModalComponent_ng_template_8_Template_button_click_7_listener","SignagePlaylistModalComponent_ng_template_8_Template_button_click_10_listener","removeMedia","first_r14","last_r15","SignagePlaylistModalComponent","all_media","new_media_durations","ref","open","data","afterClosed","subscribe","URL","revokeObjectURL","SignagePlaylistModalComponent_Query","SignagePlaylistModalComponent_button_3_Template","SignagePlaylistModalComponent_main_4_Template","SignagePlaylistModalComponent_footer_5_Template","SignagePlaylistModalComponent_ng_template_6_Template","SignagePlaylistModalComponent_ng_template_8_Template","SignagePlaylistModalComponent_ng_template_10_Template","load_state_r16","SignagePlaylistsComponent_ng_template_8_Template_button_click_1_listener","SignagePlaylistsComponent_ng_template_8_Template_button_click_4_listener","SignagePlaylistsComponent","SignagePlaylistsComponent_Template","SignagePlaylistsComponent_ng_template_4_Template","SignagePlaylistsComponent_ng_template_6_Template","SignagePlaylistsComponent_ng_template_8_Template","ɵɵpureFunction5","media_template_r6","notifySuccess","randomString","uploadFile","OrganisationService","queryZones","showMetadata","updateMetadata","of","catchError","shareReplay","switchMap","take","_org","_loading","_change","_active_upload","asObservable","active_building","bld","details","Array","zones","parent_id","tags","limit","Date","now","remove","building","toPromise","idx","findIndex","push","_this2","editDisplay","_this3","removeDisplay","_this4","_this5","createObjectURL","componentInstance","_this6","upload","Promise","resolve","reject","state","resolved","s","link","video_metadata","video","document","createElement","src","addEventListener","videoWidth","videoHeight","load","img","Image","onload","width","height","is_landscape","ɵɵinject","factory","ɵfac","providedIn","ActivatedRoute","Router","first","SignageTopbarComponent","_route","_router","levels","active_levels","ngOnInit","initialised","subscription","queryParamMap","params","has","get","split","level","levelWithID","buildings","zone","lvl","i3","SignageTopbarComponent_Template","SignageTriggersComponent","SignageTriggersComponent_Template","SignageZonesComponent","SignageZonesComponent_Template","SignageZone","zone_id","SignageTrigger","NavigationEnd","SignageComponent_button_7_Template_button_click_0_listener","newItem","active_link","singular","SignageComponent_For_11_Template_a_click_0_listener","link_r4","SignageComponent","replace","links","events","attrs","SignageComponent_Template","SignageComponent_button_7_Template","ɵɵrepeaterCreate","SignageComponent_For_11_Template","ɵɵrepeaterTrackByIdentity","tabPanel_r5","ɵɵrepeater","CommonModule","Type","FormsModule","RouterModule","UIModule","MatTabsModule","ComponentsModule","ROUTES","path","component","children","redirectTo","pathMatch","COMPONENTS","SignageModule","_3","forChild","declarations","imports"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}