{"version":3,"file":"default-libs_explore_src_index_ts.js","mappings":"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","sources":["./libs/explore/src/index.ts","./libs/explore/src/lib/explore-desks.service.ts","./libs/explore/src/lib/explore-device-info.component.ts","./libs/explore/src/lib/explore-lockers.service.ts","./libs/explore/src/lib/explore-map-control.component.ts","./libs/explore/src/lib/explore-map-view.component.ts","./libs/explore/src/lib/explore-parking.service.ts","./libs/explore/src/lib/explore-search.component.ts","./libs/explore/src/lib/explore-search.service.ts","./libs/explore/src/lib/explore-sensor-info.component.ts","./libs/explore/src/lib/explore-zones.service.ts","./libs/explore/src/lib/explore-zoom-control.component.ts","./libs/explore/src/lib/explore.module.ts","./libs/explore/src/lib/explore.ts","./libs/explore/src/lib/set-datetime-modal.component.ts","./libs/users/src/index.ts","./libs/users/src/lib/location.class.ts"],"sourcesContent":["export * from './lib/explore.module';\nexport * from './lib/explore';\nexport * from './lib/explore-lockers.service';\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { getModule, showMetadata } from '@placeos/ts-client';\nimport { addDays, endOfDay, getUnixTime, startOfDay } from 'date-fns';\nimport { BehaviorSubject, combineLatest, Observable, of } from 'rxjs';\nimport {\n    catchError,\n    debounceTime,\n    filter,\n    first,\n    map,\n    shareReplay,\n    switchMap,\n    take,\n    tap,\n} from 'rxjs/operators';\n\nimport { BookingFormService } from 'libs/bookings/src/lib/booking-form.service';\nimport {\n    AsyncHandler,\n    BookingRuleset,\n    currentUser,\n    notifyError,\n    notifySuccess,\n    rulesForResource,\n    SettingsService,\n} from '@placeos/common';\nimport { OrganisationService } from 'libs/organisation/src/lib/organisation.service';\nimport { Desk } from 'libs/organisation/src/lib/desk.class';\nimport { StaffUser } from 'libs/users/src/lib/user.class';\n\nimport { SetDatetimeModalComponent } from 'libs/explore/src/lib/set-datetime-modal.component';\nimport { ExploreDeskInfoComponent } from './explore-desk-info.component';\nimport { ExploreDeviceInfoComponent } from './explore-device-info.component';\nimport { DEFAULT_COLOURS } from './explore-spaces.service';\nimport { ExploreStateService } from './explore-state.service';\nimport { queryBookings } from 'libs/bookings/src/lib/bookings.fn';\n\nexport interface DeskOptions {\n    enable_booking?: boolean;\n    date?: number;\n    all_day?: boolean;\n    zones?: string[];\n    host?: StaffUser;\n    custom?: boolean;\n    use_api?: boolean;\n}\nexport interface DesksStats {\n    free: number;\n    occupied: number;\n    total: number;\n}\n\n@Injectable()\nexport class ExploreDesksService extends AsyncHandler implements OnDestroy {\n    private _in_use = new BehaviorSubject<string[]>([]);\n    private _options = new BehaviorSubject<DeskOptions>({});\n    private _presence = new BehaviorSubject<string[]>([]);\n    private _signs_of_life = new BehaviorSubject<string[]>([]);\n    private _statuses: Record<string, string> = {};\n    private _users: Record<string, string> = {};\n    private _departments: Record<string, string> = {};\n\n    private _checked_in = new BehaviorSubject<string[]>([]);\n\n    public readonly booking_rules: Observable<BookingRuleset[]> =\n        this._org.active_building.pipe(\n            filter((bld) => !!bld),\n            switchMap((bld) =>\n                showMetadata(bld.id, `desk_booking_rules`).pipe(\n                    catchError(() => of({ details: [] }))\n                )\n            ),\n            map((_) => (_?.details instanceof Array ? _.details : [])),\n            shareReplay(1)\n        );\n\n    public readonly desk_list = this._state.level.pipe(\n        debounceTime(50),\n        switchMap((lvl) =>\n            showMetadata(lvl.id, 'desks').pipe(\n                catchError(() => of({ details: [] })),\n                map((i) =>\n                    (i?.details instanceof Array ? i.details : []).map(\n                        (j: Record<string, any>) =>\n                            new Desk({ ...j, zone: lvl as any })\n                    )\n                )\n            )\n        ),\n        catchError((e) => []),\n        shareReplay(1)\n    );\n\n    private _bind = combineLatest([\n        this._state.level,\n        this._state.options,\n    ]).pipe(\n        debounceTime(300),\n        filter(([_, { is_public }]) => !!_ && !is_public),\n        map(([lvl]) => {\n            this._statuses = {};\n            const system_id = this._org.binding('area_management');\n            if (!system_id) return;\n            let binding = getModule(system_id, 'AreaManagement')?.binding(\n                lvl.id\n            );\n            if (!binding) return;\n            this.subscription(\n                `lvl-in_use`,\n                binding\n                    .listen()\n                    .subscribe((d) =>\n                        this.processBindingChange(d || {}, system_id)\n                    )\n            );\n            this.subscription('lvl-in_use_bind', binding.bind());\n        })\n    );\n\n    private _booking_list = combineLatest([\n        this._options,\n        this._state.level,\n    ]).pipe(\n        filter(\n            ([_, lvl]) =>\n                (_.use_api || _.date > endOfDay(Date.now()).valueOf()) && !!lvl\n        ),\n        switchMap(([_, level]) => {\n            return queryBookings({\n                type: 'desk',\n                period_start: getUnixTime(startOfDay(_.date || Date.now())),\n                period_end: getUnixTime(endOfDay(_.date || Date.now())),\n                zones: level.id,\n            });\n        }),\n        debounceTime(200),\n        tap((bookings) => {\n            this._in_use.next(bookings.map((_) => _.asset_id));\n            this._checked_in.next(\n                bookings.filter((_) => _.checked_in).map((_) => _.asset_id)\n            );\n        }),\n        shareReplay(1)\n    );\n\n    private _state_change = combineLatest([\n        this.desk_list,\n        this._in_use,\n        this._presence,\n        this._checked_in,\n        this._signs_of_life,\n        this.booking_rules,\n        this._options,\n    ]).pipe(\n        debounceTime(50),\n        map(\n            async ([\n                desks,\n                in_use,\n                presence,\n                checked_in,\n                signs,\n                restrictions,\n            ]) => {\n                this._statuses = {};\n                const level = await this._state.level.pipe(take(1)).toPromise();\n                for (const { id, bookable } of desks) {\n                    const is_used = in_use.some((i) => id === i);\n                    const has_presence = presence.some((i) => id === i);\n                    const has_signs = signs.some((i) => id === i);\n                    const is_checked_in =\n                        checked_in.some((i) => id === i) ||\n                        (is_used &&\n                            this._settings.get(`app.desk.auto_checkin`));\n                    const is_restricted = rulesForResource(\n                        {\n                            date: Date.now(),\n                            duration: 60,\n                            host: currentUser(),\n                            resource: {\n                                id,\n                                zones: [level.parent_id, level.id],\n                            },\n                        },\n                        restrictions\n                    )?.hidden;\n                    this._statuses[id] =\n                        bookable && !is_restricted\n                            ? !is_used && !has_presence && !is_checked_in\n                                ? has_signs\n                                    ? 'signs-of-life'\n                                    : 'free'\n                                : !has_presence && !is_checked_in\n                                ? 'pending'\n                                : 'busy'\n                            : 'not-bookable';\n                }\n                this.processDesks(desks);\n            }\n        )\n    );\n\n    constructor(\n        private _state: ExploreStateService,\n        private _org: OrganisationService,\n        private _settings: SettingsService,\n        private _bookings: BookingFormService,\n        private _dialog: MatDialog\n    ) {\n        super();\n        this.init();\n    }\n\n    public async init() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        this.setOptions({\n            enable_booking:\n                this._settings.get('app.desks.enable_maps') !== false,\n        });\n        this.subscription('bookings', this._booking_list.subscribe());\n        this.subscription('bind', this._bind.subscribe());\n        this.subscription('booking_rules', this.booking_rules.subscribe());\n        this.subscription('changes', this._state_change.subscribe());\n        this.subscription(\n            'desks',\n            this.desk_list.subscribe((desks) => this.processDesks(desks))\n        );\n    }\n\n    public setOptions(options: DeskOptions) {\n        this._options.next({ ...this._options.getValue(), ...options });\n    }\n\n    public processBindingChange(\n        { value }: { value: any[] },\n        system_id: string\n    ) {\n        const devices = (value || []).filter(\n            (v) => !['desk', 'booking'].includes(v.location)\n        );\n        const desks = (value || []).filter(\n            (v) =>\n                v.location === 'desk' ||\n                (v.location === 'booking' && v.type === 'desk')\n        );\n        const date = this._options.getValue().date || Date.now();\n        if (\n            date <= endOfDay(Date.now()).valueOf() &&\n            !this._options.getValue().use_api\n        ) {\n            this._in_use.next(\n                desks\n                    .filter((v) => v.location === 'booking')\n                    .map((v) => v.map_id || v.asset_id)\n            );\n            this._checked_in.next(\n                desks\n                    .filter((v) => v.location === 'booking' && v.checked_in)\n                    .map((v) => v.map_id || v.asset_id)\n            );\n            this._presence.next(\n                desks\n                    .filter((v) => v.at_location)\n                    .map((v) => v.map_id || v.asset_id)\n            );\n            this._signs_of_life.next(\n                desks\n                    .filter((v) => v.signs_of_life)\n                    .map((v) => v.map_id || v.asset_id)\n            );\n        }\n        const departments = this._settings.get('app.department_map') || {};\n        for (const desk of desks) {\n            this._users[desk.map_id || desk.asset_id] = desk.staff_name;\n            this._departments[desk.map_id || desk.asset_id] =\n                departments[desk.department] || '';\n        }\n        this.processDevices(devices, system_id);\n        this.timeout('update', () => this.updateStatus(), 100);\n    }\n\n    private updateStatus() {\n        const style_map = {};\n        const colours = this._settings.get('app.explore.colors') || {};\n        for (const desk_id in this._statuses) {\n            if (!this._statuses[desk_id]) continue;\n            style_map[`#${desk_id}`] = {\n                fill:\n                    colours[`desk-${this._statuses[desk_id]}`] ||\n                    colours[`${this._statuses[desk_id]}`] ||\n                    DEFAULT_COLOURS[`${this._statuses[desk_id]}`],\n            };\n        }\n        this._state.setStyles('desks', style_map);\n    }\n\n    private processDevices(devices: Record<string, any>[], system_id: string) {\n        const list = [];\n        for (const device of devices) {\n            const x = device.x / device.map_width;\n            const y = device.y / device.map_height;\n            list.push({\n                track_id: `device:hover:${x},${y}`,\n                location: {\n                    x: device.coordinates_from?.includes('right') ? 1 - x : x,\n                    y: device.coordinates_from?.includes('bottom') ? 1 - y : y,\n                },\n                content: ExploreDeviceInfoComponent,\n                z_index: 20,\n                data: { ...device, system: system_id },\n            });\n        }\n        this._state.setFeatures('devices', list);\n    }\n\n    private processDesks(desks: Desk[]) {\n        const list = [];\n        const actions = [];\n        const options = this._options.getValue();\n        for (const desk of desks) {\n            list.push({\n                track_id: `desk:hover:${desk.map_id || desk.id}`,\n                location: desk.id,\n                content: ExploreDeskInfoComponent,\n                full_size: true,\n                no_scale: true,\n                data: {\n                    id: desk.map_id || desk.id,\n                    map_id: desk.name,\n                    name: desk.name || desk.map_id,\n                    user: this._users[desk.map_id] || desk.staff_name,\n                    status: this._statuses[desk.map_id],\n                    department: this._departments[desk.map_id] || '',\n                },\n                z_index: 20,\n            });\n            if (!desk.bookable) continue;\n            let can_book = true;\n            const book_fn = async () => {\n                if (!can_book) return;\n                if (this._statuses[desk.id] !== 'free') {\n                    return notifyError(\n                        `${desk.name || 'Desk'} is unavailable at this time.`\n                    );\n                }\n                if (\n                    desk.groups?.length &&\n                    !desk.groups.find((_) => currentUser().groups.includes(_))\n                ) {\n                    return notifyError(\n                        `You are not allowed to book ${desk.name}.`\n                    );\n                }\n                this._bookings.newForm();\n                this._bookings.setOptions({ type: 'desk' });\n                if (options.date) {\n                    this._bookings.form.patchValue({\n                        date: options.date,\n                    });\n                    this._bookings.form.patchValue({\n                        all_day: !!options.all_day,\n                    });\n                }\n                let { date, duration, user } = await this._setBookingTime(\n                    this._bookings.form.value.date,\n                    this._bookings.form.value.duration,\n                    this._options.getValue()?.custom ?? false,\n                    desk as any\n                );\n                user = user || options.host || currentUser();\n                const user_email = user?.email;\n                this._bookings.form.patchValue({\n                    resources: [desk],\n                    asset_id: desk.id,\n                    asset_name: desk.name,\n                    date,\n                    duration: options.all_day ? 12 * 60 : duration,\n                    map_id: desk?.map_id || desk?.id,\n                    description: desk.name,\n                    user,\n                    user_email,\n                    booking_type: 'desk',\n                    zones: desk.zone\n                        ? [desk.zone?.parent_id, desk.zone?.id]\n                        : [],\n                });\n                await this._bookings.confirmPost().catch((e) => {\n                    console.log(e);\n                    notifyError(\n                        `Failed to book desk ${desk.name || desk.id}. ${\n                            e.message || e.error || e\n                        }`\n                    );\n                    throw e;\n                });\n                this._users[desk.map_id] = (\n                    options.host || currentUser()\n                )?.name;\n                notifySuccess(\n                    `Successfully booked desk ${desk.name || desk.id}`\n                );\n            };\n            ['mousedown', 'touchstart'].forEach((event) =>\n                actions.push({\n                    id: desk.id,\n                    action: event,\n                    priority: 10,\n                    callback: () => {\n                        can_book = true;\n                        this.timeout('booking', () => (can_book = false));\n                    },\n                })\n            );\n            ['mouseup', 'touchend'].forEach((event) =>\n                actions.push({\n                    id: desk.id,\n                    action: event,\n                    priority: 10,\n                    callback: book_fn,\n                })\n            );\n        }\n        this._state.setActions(\n            'desks',\n            this._options.getValue().enable_booking ? actions : []\n        );\n        this._state.setFeatures('desks', list);\n        this.timeout('update', () => this.updateStatus(), 100);\n    }\n\n    private async _setBookingTime(\n        date: number,\n        duration: number,\n        host: boolean = false,\n        resource: Desk = null\n    ) {\n        let user = null;\n        if (!!this._settings.get('app.desks.allow_time_changes')) {\n            const until = endOfDay(\n                addDays(\n                    Date.now(),\n                    this._settings.get('app.desks.available_period') || 90\n                )\n            );\n            const ref = this._dialog.open(SetDatetimeModalComponent, {\n                data: { date, duration, until, host, resource },\n            });\n            const details = await ref.afterClosed().toPromise();\n            if (!details) throw 'User cancelled';\n            date = details.date;\n            duration = details.duration;\n            user = details.user;\n        }\n        return { date, duration, user };\n    }\n}\n","import { Component, ElementRef, Inject, OnInit } from '@angular/core';\nimport { getModule } from '@placeos/ts-client';\nimport { differenceInMinutes, formatDistanceToNow } from 'date-fns';\nimport { Observable } from 'rxjs';\n\nimport { AsyncHandler, SettingsService } from '@placeos/common';\nimport { MAP_FEATURE_DATA } from 'libs/components/src/lib/interactive-map.component';\n\nexport interface DeviceInfoData {\n    mac: string;\n    variance: number;\n    last_seen: number;\n    system: string;\n    manufacturer?: string;\n    os?: string;\n    ssid?: string;\n    user?: any;\n    bg_color?: string;\n    zoom$?: Observable<number>;\n}\n\nconst EMPTY = [];\n\n@Component({\n    selector: '[explore-device-info]',\n    template: `\n        <div\n            name=\"radius\"\n            class=\"radius absolute center bg-info bg-opacity-25 border-8 border-dashed border-blue-600 rounded-full\"\n            [style]=\"'height: ' + diameter + '%; width: ' + diameter + '%;'\"\n        ></div>\n        <div\n            shadow\n            class=\"absolute center bg-neutral h-8 w-8 rounded-full\"\n        ></div>\n        <div\n            name=\"dot\"\n            #dot\n            class=\"h-3 w-3 absolute center rounded-full shadow border-2 border-white\"\n            [style.background-color]=\"bg_color\"\n        ></div>\n        <div\n            customTooltip\n            [content]=\"device_tooltip\"\n            [backdrop]=\"false\"\n            [xPosition]=\"x_pos\"\n            [yPosition]=\"y_pos\"\n            [hover]=\"true\"\n            (mouseenter)=\"loadUser()\"\n            class=\"absolute inset-0 pointer-events-auto\"\n        ></div>\n\n        <ng-template #device_tooltip>\n            <div\n                name=\"device-info\"\n                class=\"w-64 rounded bg-base-100 p-4 top-0 left-0 shadow pointer-events-none mx-2\"\n                (mouseleave)=\"close()\"\n            >\n                <div class=\"arrow\"></div>\n                <div class=\"details\">\n                    <p\n                        class=\"break-words\"\n                        *ngIf=\"mac && !hide_fields.includes('mac')\"\n                    >\n                        <label i18n>MAC:</label> {{ mac }}\n                    </p>\n                    <p><label i18n>Accuracy:</label> {{ variance }}m</p>\n                    <p><label i18n>Last Seen:</label> {{ last_seen }}</p>\n                    <p\n                        type\n                        *ngIf=\"\n                            manufacturer &&\n                            !hide_fields.includes('manufacturer')\n                        \"\n                    >\n                        <label i18n>Manufacturer:</label> {{ manufacturer }}\n                    </p>\n                    <p os *ngIf=\"os && !hide_fields.includes('os')\">\n                        <label i18n>OS:</label> {{ os }}\n                    </p>\n                    <p ssid *ngIf=\"ssid && !hide_fields.includes('ssid')\">\n                        <label i18n>SSID:</label> {{ ssid }}\n                    </p>\n                    <p\n                        username\n                        *ngIf=\"username && !hide_fields.includes('username')\"\n                    >\n                        <label i18n>Username:</label>\n                        {{ user?.name || user?.username || username }}\n                    </p>\n                    <p user *ngIf=\"user && !hide_fields.includes('user')\">\n                        <label i18n>Type:</label> {{ user.type }}\n                    </p>\n                </div>\n            </div>\n        </ng-template>\n    `,\n    styles: [\n        `\n            :host {\n                pointer-events: auto;\n            }\n\n            :host > [name='dot'] {\n                background-color: #616161;\n            }\n\n            :host:hover > [name='radius'] {\n                opacity: 1;\n            }\n\n            [name='radius'] {\n                opacity: 0;\n                transition: opacity 200ms;\n                pointer-events: none;\n            }\n        `,\n    ],\n})\nexport class ExploreDeviceInfoComponent extends AsyncHandler implements OnInit {\n    /** Name of the user associated with the mac address */\n    public username = '';\n    /** User details associated with device */\n    public readonly user = this._details.user;\n    /** Mac Address of the device */\n    public readonly mac = this._details.mac;\n    /** Mac Address of the device */\n    public readonly manufacturer = this._details.manufacturer;\n    /** Mac Address of the device */\n    public readonly os = this._details.os;\n    /** Mac Address of the device */\n    public readonly ssid = this._details.ssid;\n    /** Accuracy of the location data */\n    public readonly variance = this._details.variance?.toFixed(2);\n    /** Background color for the dot */\n    public readonly bg_color = this._details.bg_color || this.distance_color;\n\n    public zoom = 1;\n\n    public get hide_fields() {\n        return this._settings.get('app.explore.hide_device_fields') || EMPTY;\n    }\n\n    /** Time of the last update */\n    public get last_seen() {\n        return formatDistanceToNow((this._details.last_seen || 0) * 1000, {\n            addSuffix: true,\n        });\n    }\n\n    public y_pos: 'top' | 'bottom';\n\n    public x_pos: 'end' | 'start';\n    /** Diameter of the radius circle */\n    public get diameter() {\n        return this._details.variance * 100 * this.zoom;\n    }\n\n    public get distance() {\n        return Math.abs(\n            differenceInMinutes(\n                (this._details.last_seen || 0) * 1000,\n                new Date()\n            )\n        );\n    }\n\n    public get distance_color() {\n        return this.distance < 10\n            ? '#43a047'\n            : this.distance < 20\n            ? '#ffb300'\n            : '#e53935';\n    }\n\n    constructor(\n        @Inject(MAP_FEATURE_DATA) private _details: DeviceInfoData,\n        private _settings: SettingsService,\n        private _element: ElementRef<HTMLElement>\n    ) {\n        super();\n    }\n\n    public ngOnInit(tries: number = 0) {\n        if (tries > 10) return;\n        setTimeout(() => {\n            const parent =\n                this._element.nativeElement.parentElement?.parentElement;\n            if (!parent) return this.ngOnInit(++tries);\n            const position = {\n                y: parseInt(parent.style.top, 10) / 100,\n                x: parseInt(parent.style.left, 10) / 100,\n            };\n            this.y_pos = position.y >= 0.5 ? 'bottom' : 'top';\n            this.x_pos = position.x >= 0.5 ? 'end' : 'start';\n            this.subscription(\n                'zoom',\n                this._details.zoom$.subscribe((_) => (this.zoom = _))\n            );\n        }, 200);\n    }\n\n    public async loadUser() {\n        if (this.username) return;\n        const mod = getModule(this._details.system, 'LocationServices');\n        if (!mod) return;\n        this.username = 'Loading...';\n        const details = await mod\n            .execute('check_ownership_of', [this.mac])\n            .catch((_) => null);\n        this.username =\n            details && details.assigned_to ? details.assigned_to : '';\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { LockersService } from 'libs/bookings/src/lib/lockers.service';\nimport { ExploreStateService } from './explore-state.service';\nimport { AsyncHandler, SettingsService, unique } from '@placeos/common';\nimport { filter, map } from 'rxjs/operators';\nimport { BehaviorSubject, combineLatest, of } from 'rxjs';\nimport { getModule } from '@placeos/ts-client';\nimport { OrganisationService } from '@placeos/organisation';\nimport { ExploreLockerBankInfoComponent } from './explore-locker-bank-info.component';\nimport { DEFAULT_COLOURS } from './explore-spaces.service';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ExploreLockersService extends AsyncHandler {\n    private _status = new BehaviorSubject([]);\n    public readonly lockers$ = this._lockers.filtered_lockers$;\n    public readonly status = combineLatest([\n        this._explore.level,\n        this._explore.options,\n        this._org.active_building,\n    ]).pipe(\n        map(([lvl, { is_public }]) => {\n            if (!lvl || is_public) return [];\n            const sys_id = this._org.binding('area_management');\n            if (!sys_id) return of({});\n            let binding = getModule(sys_id, 'AreaManagement').binding(lvl.id);\n            this.subscription(\n                `lvl-in_use`,\n                binding\n                    .listen()\n                    .subscribe((data) =>\n                        this._status.next(\n                            data?.value?.filter(\n                                (_) => _.location === 'locker'\n                            ) || []\n                        )\n                    )\n            );\n            this.subscription('lvl-in_use_bind', binding.bind());\n        })\n    );\n\n    public readonly locker_status = combineLatest([\n        this._explore.level,\n        this._lockers.lockers_banks$,\n        this.lockers$,\n        this._status,\n    ]).pipe(\n        map(([lvl, locker_banks, lockers, status]) => {\n            if (!lvl) return [];\n            const features = [];\n            const map_status = {};\n            const colours = this._settings.get('app.explore.colors') || {};\n            const banks = unique(\n                locker_banks\n                    .filter((_) => _.level_id === lvl.id)\n                    .map((_) => _.id)\n            );\n            for (const bank of banks) {\n                const bank_lockers = lockers.filter((_) => _.bank_id === bank);\n                let in_use_count = 0;\n                for (const locker of bank_lockers) {\n                    const in_use = status.find(\n                        (_) => _.locker_id === locker.id && _.allocated\n                    );\n                    in_use_count += in_use ? 1 : 0;\n                }\n                const bank_info = locker_banks.find((_) => _.id === bank);\n                features.push({\n                    location: bank_info.map_id,\n                    content: ExploreLockerBankInfoComponent,\n                    full_size: true,\n                    no_scale: true,\n                    z_index: 20,\n                    data: {\n                        bank: bank_info,\n                        lockers,\n                        in_use_count,\n                        locker_count: bank_lockers.length,\n                        system: this._org.binding('area_management'),\n                    },\n                });\n                const in_use_percent = in_use_count / bank_lockers.length;\n                const value =\n                    in_use_percent > 0.8\n                        ? 'busy'\n                        : in_use_percent > 0.3\n                        ? 'pending'\n                        : 'free';\n                map_status[`#${bank_info.map_id}`] = {\n                    fill:\n                        colours[`lockers-${value}`] ||\n                        colours[`${value}`] ||\n                        DEFAULT_COLOURS[`${value}`],\n                };\n            }\n            this._explore.setStyles('lockers', map_status);\n            this._explore.setFeatures('lockers', features);\n        })\n    );\n\n    constructor(\n        private _lockers: LockersService,\n        private _explore: ExploreStateService,\n        private _org: OrganisationService,\n        private _settings: SettingsService\n    ) {\n        super();\n        this.subscription(\n            'level',\n            this._explore.level\n                .pipe(filter((_) => !!_))\n                .subscribe((level) => this._lockers.setLevel(level.id))\n        );\n        this.subscription('status', this.status.subscribe());\n        this.subscription('locker_status', this.locker_status.subscribe());\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AsyncHandler } from '@placeos/common';\nimport { first, map } from 'rxjs/operators';\n\nimport { OrganisationService } from 'libs/organisation/src/lib/organisation.service';\nimport { ExploreStateService } from './explore-state.service';\n\n@Component({\n    selector: 'explore-map-controls',\n    template: `\n        <div class=\"flex space-x-2 w-full\">\n            <mat-form-field\n                overlay\n                buildings\n                class=\"flex-1 min-w-[10.5rem] no-subscript\"\n                has-bld=\"true\"\n                *ngIf=\"(buildings | async)?.length > 1\"\n                appearance=\"outline\"\n            >\n                <mat-select\n                    placeholder=\"Select Building...\"\n                    i18n-placeholder\n                    [ngModel]=\"building | async\"\n                    (ngModelChange)=\"setBuilding($event)\"\n                >\n                    <mat-option\n                        *ngFor=\"let bld of buildings | async\"\n                        [value]=\"bld\"\n                    >\n                        {{ bld.display_name || bld.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field\n                overlay\n                levels\n                class=\"flex-1 min-w-[10.25rem] no-subscript\"\n                [attr.has-bld]=\"(buildings | async)?.length > 1\"\n                *ngIf=\"(levels | async)?.length\"\n                appearance=\"outline\"\n            >\n                <mat-select\n                    placeholder=\"Select Level...\"\n                    i18n-placeholder\n                    [ngModel]=\"level | async\"\n                    (ngModelChange)=\"setLevel($event)\"\n                >\n                    <mat-option\n                        *ngFor=\"let lvl of levels | async\"\n                        [value]=\"lvl\"\n                    >\n                        {{ lvl.display_name || lvl.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n        </div>\n    `,\n    styles: [\n        `\n            mat-form-field[has-bld='true'] {\n                max-width: calc(50vw - 2.5rem);\n            }\n\n            :host[full] mat-form-field {\n                max-width: calc(50% - 2.5rem);\n            }\n        `,\n    ],\n})\nexport class ExploreMapControlComponent extends AsyncHandler implements OnInit {\n    /** List of available buildings */\n    public readonly buildings = this._org.active_buildings;\n    /** Currently active building */\n    public readonly building = this._org.active_building;\n    /** List of availabel levels */\n    public readonly levels = this._org.active_levels.pipe(\n        map((_) => _.filter((lvl) => !lvl.tags?.includes('parking')))\n    );\n    /** Currently active level */\n    public readonly level = this._state.level;\n    /** Set the currently active level */\n    public readonly setLevel = (lvl) => {\n        this._state.setFeatures('_located', []);\n        this.timeout(\n            'set_level',\n            () =>\n                this._router.navigate([], {\n                    relativeTo: this._route,\n                    queryParams: { zone: lvl.id },\n                }),\n            201\n        );\n    };\n    /** Set the currenly active building */\n    public readonly setBuilding = (bld) => (this._org.building = bld);\n\n    constructor(\n        private _org: OrganisationService,\n        private _state: ExploreStateService,\n        private _router: Router,\n        private _route: ActivatedRoute\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe((params) =>\n                params.has('zone')\n                    ? this._state.setLevel(params.get('zone'))\n                    : ''\n            )\n        );\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { getModule } from '@placeos/ts-client';\nimport { Point } from '@placeos/svg-viewer';\nimport { first, take } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\nimport {\n    AsyncHandler,\n    notifyError,\n    SettingsService,\n    unique,\n} from '@placeos/common';\nimport { MapLocation, showStaff, User } from '@placeos/users';\n\nimport { SpacesService } from 'libs/spaces/src/lib/spaces.service';\nimport { MapPinComponent } from 'libs/components/src/lib/map-pin.component';\nimport { MapRadiusComponent } from 'libs/components/src/lib/map-radius.component';\nimport { OrganisationService } from 'libs/organisation/src/lib/organisation.service';\nimport { SpacePipe } from 'libs/spaces/src/lib/space.pipe';\nimport { ExploreStateService } from './explore-state.service';\nimport { ExploreSpacesService } from './explore-spaces.service';\nimport { ExploreZonesService } from './explore-zones.service';\nimport { ExploreDesksService } from './explore-desks.service';\nimport { ExploreParkingService } from './explore-parking.service';\nimport { ExploreLockersService } from './explore-lockers.service';\nimport { MapsPeopleService } from 'libs/common/src/lib/mapspeople.service';\n\nconst EMPTY = [];\n\n@Component({\n    selector: 'explore-map-view',\n    template: `\n        <interactive-map\n            [src]=\"url | async\"\n            [styles]=\"styles | async\"\n            [features]=\"features | async\"\n            [actions]=\"actions | async\"\n            [labels]=\"labels | async\"\n            [focus]=\"locate\"\n            [options]=\"{ controls: true }\"\n        ></interactive-map>\n        <div\n            *ngIf=\"!(use_mapsindoors$ | async)\"\n            controls\n            class=\"absolute top-2 left-2 max-w-[calc(100vw-1rem)] bg-base-100 border border-base-200 rounded p-2 space-y-2 overflow-hidden\"\n        >\n            <explore-map-controls></explore-map-controls>\n            <div class=\"flex items-center space-x-2\" *ngIf=\"!hide_zones\">\n                <mat-slide-toggle\n                    name=\"zones\"\n                    class=\"ml-2\"\n                    [ngModel]=\"!(options | async)?.disable?.includes('zones')\"\n                    (ngModelChange)=\"toggleZones($event)\"\n                ></mat-slide-toggle>\n                <label for=\"zones\" class=\"mb-0\" i18n>Zones</label>\n            </div>\n        </div>\n        <div\n            legend\n            *ngIf=\"show_legend && legend.length\"\n            class=\"absolute bottom-2 left-2 p-2 rounded bg-base-100 border border-base-200\"\n        >\n            <h3 class=\"mb-2 font-medium\" i18n>Legend</h3>\n            <div\n                class=\"flex items-center space-x-2\"\n                *ngFor=\"let pair of legend\"\n            >\n                <div\n                    class=\"w-3 h-3 rounded-full border border-base-200\"\n                    [style.background-color]=\"pair[1]\"\n                ></div>\n                <div class=\"text-sm\">{{ pair[0] }}</div>\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                height: 100%;\n                width: 100%;\n            }\n\n            [zones] {\n                top: 3.5rem;\n            }\n        `,\n    ],\n    providers: [\n        ExploreDesksService,\n        ExploreSpacesService,\n        ExploreZonesService,\n        ExploreParkingService,\n        ExploreLockersService,\n        SpacePipe,\n    ],\n})\nexport class ExploreMapViewComponent extends AsyncHandler implements OnInit {\n    /** Observable for the active map */\n    public readonly url = this._state.map_url;\n    /** Observable for the active map */\n    public readonly styles = this._state.map_styles;\n    /** Observable for the active map */\n    public readonly positions = this._state.map_positions;\n    /** Observable for the active map */\n    public readonly features = this._state.map_features;\n    /** Observable for the active map */\n    public readonly actions = this._state.map_actions;\n    /** Observable for the labels map */\n    public readonly labels = this._state.map_labels;\n    /** Observable for the active map */\n    public readonly options = this._state.options;\n    /** Observable for user messages */\n    public readonly message = this._state.message;\n\n    public readonly setOptions = (o) => this._state.setOptions(o);\n\n    public locate = '';\n\n    public async toggleZones(enabled: boolean) {\n        const options = await this.options.pipe(take(1)).toPromise();\n        const disable = !enabled\n            ? unique([...(options.disable || []), 'zones', 'devices'])\n            : options.disable?.filter(\n                  (_) => _ !== 'zones' && _ !== 'devices'\n              ) || [];\n        this.setOptions({ disable });\n    }\n\n    public get show_legend() {\n        return !!this._settings.get('app.explore.show_legend');\n    }\n\n    public get hide_zones() {\n        return !!this._settings.get('app.explore.hide_zones');\n    }\n\n    public get legend(): [string, string][] {\n        return this._settings.get('app.explore.legend') || EMPTY;\n    }\n\n    public readonly use_mapsindoors$: Observable<boolean> =\n        this._maps.available$;\n\n    constructor(\n        private _state: ExploreStateService,\n        private _s: ExploreSpacesService,\n        private _desks: ExploreDesksService,\n        private _zones: ExploreZonesService,\n        private _parking: ExploreParkingService,\n        private _lockers: ExploreLockersService,\n        private _route: ActivatedRoute,\n        private _router: Router,\n        private _spaces: SpacesService,\n        private _org: OrganisationService,\n        private _settings: SettingsService,\n        private _space_pipe: SpacePipe,\n        private _maps: MapsPeopleService\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        this._state.reset();\n        await this._spaces.initialised.pipe(first((_) => _)).toPromise();\n        this.toggleZones(false);\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe(async (params) => {\n                if (params.has('level') || params.has('zone')) {\n                    this._state.setLevel(\n                        params.get('level') || params.get('zone')\n                    );\n                }\n                this._state.setFeatures('_located', []);\n                if (params.has('space')) {\n                    this.locateSpace(params.get('space'));\n                } else if (params.has('user')) {\n                    let user = this._settings.value('last_search');\n                    if (!user || params.get('user') !== user.email) {\n                        user = null;\n                        user = await showStaff(params.get('user')).toPromise();\n                    }\n                    if (!user)\n                        return notifyError(\n                            `Unable to user details for ${params.get('user')}`\n                        );\n                    this.locateUser(\n                        user instanceof Array ? user[0] : user\n                    ).catch((_) => {\n                        notifyError(`Unable to locate ${params.get('user')}`);\n                        this._router.navigate([], {\n                            relativeTo: this._route,\n                            queryParams: {},\n                        });\n                    });\n                } else if (params.has('locate')) {\n                    this._locateFeature(\n                        params.get('locate'),\n                        params.get('name')\n                    );\n                } else {\n                    this.timeout('update_location', () => {\n                        this._state.setFeatures('_located', []);\n                    });\n                }\n            })\n        );\n    }\n\n    public updateZoom(zoom: number) {\n        this._state.setPositions(zoom, this._state.positions.center);\n    }\n\n    public updateCenter(center: Point) {\n        this._state.setPositions(this._state.positions.zoom, center);\n    }\n\n    private _locateFeature(id: string, name = '') {\n        const has_coordinates = id.includes(',');\n        const parts = id.split(',');\n        const feature: any = {\n            track_id: `locate-${id}`,\n            location: has_coordinates\n                ? { x: parseFloat(parts[0]), y: parseFloat(parts[1]) }\n                : id,\n            content: MapPinComponent,\n            z_index: 99,\n            data: { message: name },\n        };\n        this.locate = id;\n        this.timeout('update_location', () =>\n            this._state.setFeatures('_located', [feature])\n        );\n    }\n\n    private async locateSpace(id: string) {\n        const space = await this._space_pipe.transform(id);\n        if (!space) return notifyError('Unable to load space details.');\n        this._state.setLevel(this._org.levelWithID(space.zones)?.id);\n        const feature: any = {\n            track_id: `locate-${space.id}`,\n            location: space.map_id,\n            content: MapPinComponent,\n            z_index: 99,\n            data: {\n                message: `${space.display_name || space.name} is here`,\n            },\n        };\n        this.timeout('update_location', () =>\n            this._state.setFeatures('_located', [feature])\n        );\n    }\n\n    private async locateUser(user: User) {\n        let locate_details: any = this._org.binding('location_services');\n        if (!locate_details)\n            throw 'Location services is not setup for this application.';\n        if (typeof locate_details === 'string') {\n            locate_details = {\n                system_id: locate_details,\n                module: 'LocationServices',\n                priority: [],\n            };\n        }\n        const mod = getModule(locate_details.system_id, locate_details.module);\n        const locations: MapLocation[] = (\n            await mod.execute('locate_user', [\n                user.email,\n                user.username || user.id,\n            ])\n        ).map((i) => new MapLocation(i));\n        locations.sort(\n            (a, b) =>\n                locate_details.priority.indexOf(a.type) -\n                locate_details.priority.indexOf(b.type)\n        );\n        if (!locations?.length) {\n            throw 'No locations for the given user';\n        }\n        this._state.setLevel(this._org.levelWithID([locations[0]?.level])?.id);\n        const pos: any = locations[0].position;\n        const { coordinates_from } = locations[0];\n        const feature: any = {\n            track_id: `locate-${user.id}`,\n            location:\n                locations[0].type === 'wireless'\n                    ? {\n                          x: coordinates_from?.includes('right')\n                              ? 1 - pos.x\n                              : pos.x,\n                          y: coordinates_from?.includes('bottom')\n                              ? 1 - pos.y\n                              : pos.y,\n                      }\n                    : pos,\n            content:\n                locations[0].type === 'wireless'\n                    ? MapRadiusComponent\n                    : MapPinComponent,\n            z_index: 99,\n            data: {\n                message: `${user.name} is here`,\n                radius: locations[0].variance,\n                last_seen: locations[0].last_seen,\n            },\n        };\n        this.timeout('update_location', () => {\n            this._state.setFeatures('_located', [feature]);\n        });\n    }\n}\n","import { Injectable } from '@angular/core';\nimport {\n    AsyncHandler,\n    currentUser,\n    flatten,\n    notifyError,\n    notifySuccess,\n    SettingsService,\n} from '@placeos/common';\nimport { showMetadata } from '@placeos/ts-client';\nimport {\n    addDays,\n    endOfDay,\n    endOfMinute,\n    getUnixTime,\n    isSameDay,\n    startOfDay,\n    startOfMinute,\n} from 'date-fns';\nimport { BehaviorSubject, combineLatest, forkJoin, Observable, of } from 'rxjs';\nimport { map, shareReplay, switchMap } from 'rxjs/operators';\n\nimport { OrganisationService } from 'libs/organisation/src/lib/organisation.service';\nimport { queryBookings } from 'libs/bookings/src/lib/bookings.fn';\nimport { ExploreStateService } from './explore-state.service';\nimport { DEFAULT_COLOURS } from './explore-spaces.service';\nimport { BookingFormService } from 'libs/bookings/src/lib/booking-form.service';\nimport { StaffUser } from '@placeos/users';\nimport { SetDatetimeModalComponent } from './set-datetime-modal.component';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ExploreDeskInfoComponent } from './explore-desk-info.component';\n\nexport interface ParkingSpace {\n    id: string;\n    map_id: string;\n    name: string;\n    notes: string;\n    assigned_to: string;\n    zone_id?: string;\n}\n\nexport interface ParkingOptions {\n    enable_booking?: boolean;\n    date?: number;\n    all_day?: boolean;\n    zones?: string[];\n    host?: StaffUser;\n    custom?: boolean;\n    use_api?: boolean;\n    user?: string;\n}\n\n@Injectable()\nexport class ExploreParkingService extends AsyncHandler {\n    private _options = new BehaviorSubject<ParkingOptions>({});\n    private _poll = new BehaviorSubject<number>(0);\n\n    public readonly options = this._options.asObservable();\n\n    /** List of available parking levels for the active building */\n    public readonly levels = this._org.active_levels.pipe(\n        map((l) => l.filter((_) => _.tags.includes('parking')))\n    );\n\n    /** List of current bookings for the current building */\n    public readonly events = combineLatest([\n        this._org.active_building,\n        this._options,\n        this._poll,\n        this._state.options,\n    ]).pipe(\n        switchMap(([bld, _, __, { is_public }]) =>\n            is_public\n                ? of([])\n                : queryBookings({\n                      period_start: getUnixTime(\n                          startOfMinute(_.date || Date.now())\n                      ),\n                      period_end: getUnixTime(\n                          endOfMinute(_.date || Date.now())\n                      ),\n                      type: 'parking',\n                      zones: bld?.id,\n                  })\n        ),\n        shareReplay(1)\n    );\n    /** Any event that the selected user has for the current date */\n    public readonly existing_event = combineLatest([this._options]).pipe(\n        switchMap(([_]) =>\n            queryBookings({\n                period_start: getUnixTime(startOfDay(_.date || Date.now())),\n                period_end: getUnixTime(endOfDay(_.date || Date.now())),\n                type: 'parking',\n                email: _?.user || currentUser()?.email,\n            })\n        ),\n        shareReplay(1)\n    );\n\n    /** List of current bookings for the current building */\n    public readonly week_events = combineLatest([\n        this._org.active_building,\n        this._options,\n    ]).pipe(\n        switchMap(([bld, _]) =>\n            queryBookings({\n                period_start: getUnixTime(startOfDay(_.date || Date.now())),\n                period_end: getUnixTime(\n                    addDays(endOfDay(_.date || Date.now()), 6)\n                ),\n                type: 'parking',\n                zones: bld?.id,\n            })\n        ),\n        shareReplay(1)\n    );\n\n    /** List of parking spaces for the active building */\n    public readonly spaces: Observable<ParkingSpace[]> = this.levels.pipe(\n        switchMap((_) =>\n            forkJoin(\n                _.map((l) =>\n                    showMetadata(l.id, 'parking-spaces').pipe(\n                        map((d) =>\n                            (d.details instanceof Array ? d.details : []).map(\n                                (s) => ({ ...s, zone_id: l.id })\n                            )\n                        )\n                    )\n                )\n            )\n        ),\n        map((_) => flatten(_)),\n        shareReplay(1)\n    );\n\n    public readonly active_spaces = combineLatest([\n        this.spaces,\n        this._state.level,\n    ]).pipe(\n        map(([spaces, level]) => spaces.filter((_) => _.zone_id === level.id))\n    );\n\n    private _users = {};\n\n    /** Available parking spaces for the current level and date */\n    public readonly available_spaces = combineLatest([\n        this.events,\n        this.active_spaces,\n    ]).pipe(\n        map(([events, spaces]) =>\n            spaces.filter((_) => {\n                const assigned =\n                    events.find((e) => e.asset_id === _.id)?.user_name ||\n                    _.assigned_to;\n                this._users[_.id] = assigned;\n                return !assigned;\n            })\n        )\n    );\n\n    public readonly week_availablility = combineLatest([\n        this.week_events,\n        this.spaces,\n        this._options,\n    ]).pipe(\n        map(([events, spaces, { date }]) => {\n            const availability = {};\n            for (let i = 0; i < 7; i++) {\n                const day = addDays(date, i);\n                const day_events = events.filter((_) => isSameDay(day, _.date));\n                availability[day.valueOf()] = spaces.filter(\n                    (_) => !day_events.find((e) => e.asset_id === _.id)\n                ).length;\n            }\n            return availability;\n        })\n    );\n\n    constructor(\n        private _org: OrganisationService,\n        private _state: ExploreStateService,\n        private _settings: SettingsService,\n        private _bookings: BookingFormService,\n        private _dialog: MatDialog\n    ) {\n        super();\n        this.subscription(\n            'spaces',\n            combineLatest([this.spaces, this.available_spaces]).subscribe(\n                ([spaces, available]) =>\n                    this._updateParkingSpaces(spaces, available)\n            )\n        );\n        this.setOptions({\n            enable_booking:\n                this._settings.get('app.parking.enable_maps') !== false,\n        });\n        this.interval('poll', () => this._poll.next(Date.now()), 10 * 1000);\n    }\n\n    public setOptions(options: Partial<ParkingOptions>) {\n        this._options.next({ ...this._options.getValue(), ...options });\n    }\n\n    private _updateParkingSpaces(spaces, available) {\n        const styles = {};\n        const features = [];\n        const labels = [];\n        const actions = [];\n        const colours = this._settings.get('app.explore.colors') || {};\n        const options = this._options.getValue();\n        for (const space of spaces) {\n            const can_book = !!available.find((_) => _.id === space.id);\n            const status = can_book ? 'free' : 'busy';\n            styles[`#${space.map_id}`] = {\n                fill:\n                    colours[`parking-${status}`] ||\n                    colours[`${status}`] ||\n                    DEFAULT_COLOURS[`${status}`],\n                opacity: 0.6,\n            };\n            features.push({\n                track_id: `parking:hover:${space.map_id}`,\n                location: `${space.map_id}`,\n                content: ExploreDeskInfoComponent,\n                full_size: true,\n                no_scale: true,\n                z_index: 20,\n                data: { ...space, user: this._users[space.id], status },\n            });\n            if (!can_book) continue;\n            labels.push({\n                zoom_level: 1.1,\n                location: `${space.map_id}`,\n                content: `${space.name}\\nFree`,\n            });\n            const book_fn = async () => {\n                if (status !== 'free') {\n                    return notifyError(\n                        `${\n                            space.name || 'Parking Space'\n                        } is unavailable at this time.`\n                    );\n                }\n                if (\n                    space.groups?.length &&\n                    !space.groups.find((_) => currentUser().groups.includes(_))\n                ) {\n                    return notifyError(\n                        `You are not allowed to book ${space.name}.`\n                    );\n                }\n                this._bookings.newForm();\n                this._bookings.setOptions({ type: 'parking' });\n                if (options.date) {\n                    this._bookings.form.patchValue({\n                        date: options.date,\n                    });\n                    this._bookings.form.patchValue({\n                        all_day: !!options.all_day,\n                    });\n                }\n                let { date, duration, user } = await this._setBookingTime(\n                    this._bookings.form.value.date,\n                    this._bookings.form.value.duration,\n                    this._options.getValue()?.custom ?? false,\n                    space as any\n                );\n                user = user || options.host || currentUser();\n                const user_email = user?.email;\n                const lvl = this._state.active_level;\n                this._bookings.form.patchValue({\n                    resources: [space],\n                    asset_id: space.id,\n                    asset_name: space.name,\n                    date,\n                    duration: options.all_day ? 12 * 60 : duration,\n                    map_id: space?.map_id || space?.id,\n                    description: space.name,\n                    user,\n                    user_email,\n                    booking_type: 'parking',\n                    zones: space.zone\n                        ? [space.zone?.parent_id, space.zone?.id]\n                        : [lvl.parent_id, lvl.id],\n                });\n                await this._bookings.confirmPost().catch((e) => {\n                    console.log(e);\n                    notifyError(\n                        `Failed to book parking space ${\n                            space.name || space.id\n                        }. ${e.message || e.error || e}`\n                    );\n                    throw e;\n                });\n                notifySuccess(\n                    `Successfully booked parking space ${\n                        space.name || space.id\n                    }`\n                );\n            };\n            actions.push({\n                id: space?.map_id || space?.id,\n                action: 'click',\n                priority: 10,\n                callback: book_fn,\n            });\n        }\n        this._state.setActions(\n            'parking',\n            options.enable_booking ? actions : []\n        );\n        this._state.setStyles('parking', styles);\n        this._state.setLabels('parking', labels);\n    }\n\n    private async _setBookingTime(\n        date: number,\n        duration: number,\n        host: boolean = false,\n        resource: any = null\n    ) {\n        let user = null;\n        if (!!this._settings.get('app.parking.allow_time_changes')) {\n            const until = endOfDay(\n                addDays(\n                    Date.now(),\n                    this._settings.get('app.parking.available_period') || 90\n                )\n            );\n            const ref = this._dialog.open(SetDatetimeModalComponent, {\n                data: { date, duration, until, host, resource },\n            });\n            const details = await ref.afterClosed().toPromise();\n            if (!details) throw 'User cancelled';\n            date = details.date;\n            duration = details.duration;\n            user = details.user;\n        }\n        return { date, duration, user };\n    }\n}\n","import { Component, ElementRef, HostListener, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AsyncHandler } from '@placeos/common';\n\nimport { ExploreSearchService, SearchResult } from './explore-search.service';\nimport { OrganisationService } from '@placeos/organisation';\n\n@Component({\n    selector: 'explore-search',\n    template: `\n        <button\n            #button\n            icon\n            matRipple\n            class=\"bg-base-200 m-2\"\n            (window:resize)=\"checkButtonPosition()\"\n            (click)=\"show ? closeSearch($event) : showSearch()\"\n        >\n            <app-icon>{{ show || search_str ? 'close' : 'search' }}</app-icon>\n        </button>\n        <div\n            role=\"search\"\n            tabindex=\"0\"\n            matRipple\n            class=\"absolute top-1/2 -translate-y-1/2 bg-base-100 flex items-center z-10 overflow-hidden outline-none px-4 max-w-[calc(100vw-7rem)]\"\n            [class.right-0]=\"right_size\"\n            [class.-translate-x-14]=\"right_size\"\n            [class.left-0]=\"!right_size\"\n            [class.translate-x-14]=\"!right_size\"\n            [class.show]=\"show || search_str\"\n            (click)=\"focusInput()\"\n            matAutocompleteOrigin\n            #origin=\"matAutocompleteOrigin\"\n        >\n            <input\n                #input\n                keyboard\n                class=\"flex-1 text-base border-none outline-none\"\n                [(ngModel)]=\"search_str\"\n                (ngModelChange)=\"setItem($event)\"\n                placeholder=\"Search for...\"\n                i18n-placeholder\n                (blur)=\"show = !!search_str\"\n                [matAutocomplete]=\"auto\"\n                [matAutocompleteConnectedTo]=\"origin\"\n            />\n            <mat-spinner\n                *ngIf=\"loading | async\"\n                class=\"mr-2\"\n                [diameter]=\"32\"\n            ></mat-spinner>\n        </div>\n        <mat-autocomplete #auto=\"matAutocomplete\">\n            <ng-container\n                *ngIf=\"(loading | async) !== true && (show || search_str)\"\n            >\n                <mat-option\n                    *ngIf=\"!(results | async)?.length\"\n                    class=\"pointer-events-none\"\n                    i18n\n                >\n                    No matches found\n                </mat-option>\n                <mat-option\n                    *ngFor=\"let option of results | async | slice: 0:5\"\n                    [value]=\"option\"\n                >\n                    <div\n                        class=\"flex items-center leading-tight w-[22rem] max-w-[calc(100vw-2rem)]\"\n                    >\n                        <div class=\"flex-1 w-1/2 overflow-hidden\">\n                            <div class=\"truncate w-full\">{{ option.name }}</div>\n                            <div class=\"text-xs\">{{ option.description }}</div>\n                        </div>\n                        <div\n                            class=\"text-xs font-bold p-2 capitalize text-white bg-base-300 rounded\"\n                        >\n                            {{ option.type }}\n                        </div>\n                    </div>\n                </mat-option>\n            </ng-container>\n        </mat-autocomplete>\n    `,\n    styles: [\n        `\n            :host {\n                z-index: 99;\n                position: relative;\n            }\n\n            [role='search'] {\n                height: 3rem;\n                width: 0;\n                border-radius: 1.5rem;\n                border: 1px solid var(--b3);\n                transition: width 200ms opacity 200ms;\n                opacity: 0;\n                pointer-events: none;\n            }\n\n            [role='search'].show {\n                width: 24rem;\n                opacity: 1;\n                pointer-events: auto;\n            }\n        `,\n    ],\n})\nexport class ExploreSearchComponent extends AsyncHandler {\n    public show = false;\n    public search_str = '';\n    public right_size = false;\n    public readonly results = this._search.search_results;\n    public readonly loading = this._search.loading;\n    public readonly setFilter = (s) => this._search.setFilter(s);\n    public readonly setItem = (i) =>\n        i instanceof Object ? this.select(i) : this.setFilter(i);\n\n    @ViewChild('input') private _input_el: ElementRef<HTMLInputElement>;\n    @ViewChild('button', { static: true })\n    private _button_el: ElementRef<HTMLButtonElement>;\n\n    @HostListener('document:click', ['$event'])\n    public checkClick(event) {\n        if (!this._el?.nativeElement?.contains(event.target)) {\n            this.show = false;\n            this._input_el?.nativeElement?.blur();\n        }\n    }\n\n    @HostListener('document:touchstart', ['$event']) public onTouch = (e) =>\n        this.checkClick(e);\n\n    constructor(\n        private _el: ElementRef<HTMLElement>,\n        private _search: ExploreSearchService,\n        private _router: Router,\n        private _route: ActivatedRoute\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.checkButtonPosition();\n    }\n\n    public focusInput() {\n        if (this._input_el?.nativeElement) {\n            this.timeout(\n                'focus',\n                () => this._input_el.nativeElement.focus(),\n                300\n            );\n        }\n    }\n\n    public showSearch() {\n        this.show = true;\n        this.focusInput();\n    }\n\n    public closeSearch(e?: any) {\n        this.show = false;\n        this.search_str = '';\n        this.setFilter('');\n        if (this._input_el?.nativeElement) {\n            this._input_el.nativeElement.focus();\n            this._input_el.nativeElement.blur();\n        }\n    }\n\n    public select(item: SearchResult) {\n        this.search_str = item.name;\n        const query: any = {};\n        const type =\n            item.type === 'space'\n                ? 'space'\n                : item.type === 'feature'\n                ? 'feature'\n                : 'user';\n        query[type] = item.id;\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: query,\n        });\n    }\n\n    public checkButtonPosition() {\n        const window_width = window.innerWidth;\n        const button_rect =\n            this._button_el.nativeElement.getBoundingClientRect();\n        const x_center = button_rect.left + button_rect.width / 2;\n        this.right_size = x_center > window_width / 2;\n    }\n}\n","import { Injectable } from '@angular/core';\nimport {\n    PlaceZoneMetadata,\n    authority,\n    listChildMetadata,\n    querySystems,\n    queryUsers,\n    showMetadata,\n} from '@placeos/ts-client';\nimport { MapsPeopleService, SettingsService, flatten } from '@placeos/common';\nimport { BehaviorSubject, combineLatest, Observable, of } from 'rxjs';\nimport {\n    catchError,\n    debounceTime,\n    filter,\n    first,\n    map,\n    shareReplay,\n    switchMap,\n    tap,\n} from 'rxjs/operators';\n\nimport { Space } from 'libs/spaces/src/lib/space.class';\nimport { StaffUser, User } from 'libs/users/src/lib/user.class';\nimport { searchStaff } from 'libs/users/src/lib/staff.fn';\nimport { OrganisationService } from 'libs/organisation/src/lib/organisation.service';\nimport { moduleFromMetadata } from '@placeos/organisation';\n\nexport interface SearchResult {\n    /** Unique ID of the result item */\n    id: string;\n    /** Type of the item being displayed */\n    type: 'space' | 'user' | 'contact' | 'feature';\n    /** Main display string for the item */\n    name: string;\n    /** Secondary display string for the item. e.g. email, location, coordinates */\n    description: string;\n    /** Whether custom user */\n    is_role?: boolean;\n}\n\ndeclare let mapsindoors: any;\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ExploreSearchService {\n    /** Current search results for staff users */\n    private _emergency_contacts = new BehaviorSubject<User[]>([]);\n    /** Filter string for results */\n    private _filter = new BehaviorSubject<string>('');\n    /** Whether results are being loaded */\n    private _loading = new BehaviorSubject<boolean>(false);\n\n    public readonly emergency_contacts =\n        this._emergency_contacts.asObservable();\n\n    private _role_assigned_contacts = this._org.active_building.pipe(\n        filter((bld) => !!bld),\n        switchMap((bld) => showMetadata(bld.id, 'emergency_contacts')),\n        map(({ details }) => (details as any)?.contacts || []),\n        shareReplay(1)\n    );\n\n    private _user_search: Observable<StaffUser[]> = this._filter.pipe(\n        debounceTime(400),\n        tap(() => this._loading.next(true)),\n        switchMap((q) =>\n            q?.length > 2\n                ? (this.search_fn(q) as any as Observable<StaffUser[]>).pipe(\n                      catchError(() => of([] as StaffUser[]))\n                  )\n                : of([] as StaffUser[])\n        ),\n        shareReplay(1)\n    );\n\n    private _space_search: Observable<Space[]> = this._filter.pipe(\n        debounceTime(400),\n        tap(() => this._loading.next(true)),\n        switchMap((q) =>\n            q?.length > 2\n                ? querySystems({ q, zone_id: this._org.organisation.id }).pipe(\n                      map(({ data }) =>\n                          data\n                              .filter((_) => _.map_id)\n                              .map(\n                                  (_) =>\n                                      new Space({\n                                          ..._,\n                                          level: this._org.levelWithID(\n                                              _.zones as any\n                                          ),\n                                      } as any)\n                              )\n                      )\n                  )\n                : of([])\n        ),\n        catchError(() => [])\n    );\n\n    private _maps_people_search: Observable<SearchResult[]> = combineLatest([\n        this._maps_people.available$,\n        this._filter,\n        this._org.active_building,\n    ]).pipe(\n        debounceTime(1000),\n        switchMap(([available, q]) =>\n            available && q.length > 2\n                ? mapsindoors?.services.LocationsService.getLocations({ q })\n                : of([])\n        ),\n        map((list: any[]) => {\n            return list.map(\n                (_) =>\n                    ({\n                        id:\n                            _.properties?.externalId ||\n                            _.properties?.roomId ||\n                            _.roomId ||\n                            _.id,\n                        map_id:\n                            _.properties?.externalId ||\n                            _.properties?.roomId ||\n                            _.roomId ||\n                            '',\n                        type: 'feature',\n                        name: _.properties?.name || '',\n                        description: `${_.properties?.roomId} , Level ${_.properties?.floorName}`,\n                    } as SearchResult)\n            );\n        }),\n        shareReplay(1)\n    );\n\n    private _points_of_interest: Observable<SearchResult[]> =\n        this._org.active_building.pipe(\n            filter((bld) => !!bld),\n            switchMap(() =>\n                listChildMetadata(this._org.building.id, {\n                    name: 'maps_features',\n                }).pipe(catchError(() => of({ details: [] })))\n            ),\n            map((data: PlaceZoneMetadata[]) => {\n                const list = [];\n                for (const item of data) {\n                    const metadata = item.metadata.points_of_interest;\n                    if (!metadata) continue;\n                    for (const poi of metadata.details as any[]) {\n                        list.push({\n                            id: poi.id,\n                            type: 'feature',\n                            name: poi.name,\n                            description: '',\n                            zone: item.zone,\n                        });\n                    }\n                }\n                return list;\n            })\n        );\n\n    public readonly search_results: Observable<SearchResult[]> = combineLatest([\n        this._filter,\n        this._space_search,\n        this._user_search,\n        this._emergency_contacts,\n        this._role_assigned_contacts,\n        this._points_of_interest,\n        this._maps_people_search,\n    ]).pipe(\n        map(\n            ([\n                filter,\n                spaces,\n                users,\n                contacts,\n                roled_contacts,\n                features,\n                mapspeople_items,\n            ]) => {\n                const search = filter.toLowerCase();\n                const results = [\n                    ...mapspeople_items,\n                    ...spaces\n                        .filter(\n                            (_) =>\n                                _.email.toLowerCase().includes(search) ||\n                                _.name.toLowerCase().includes(search) ||\n                                _.display_name.toLowerCase().includes(search)\n                        )\n                        .map((s) => ({\n                            id: s.id,\n                            type: 'space',\n                            name: s.display_name || s.name,\n                            description: `Capacity: ${s.capacity} `,\n                        })),\n                    ...flatten(\n                        roled_contacts.map((u) =>\n                            (u as any).roles.map(\n                                (role) =>\n                                    ({\n                                        id: u.email,\n                                        type: role || 'contact',\n                                        is_role: true,\n                                        name: u.name,\n                                        description: u.email,\n                                    } as any)\n                            )\n                        )\n                    ).filter(\n                        (_) =>\n                            _.name.toLowerCase().includes(search) ||\n                            _.description.toLowerCase().includes(search) ||\n                            _.type.toLowerCase().includes(search)\n                    ),\n                    ...contacts\n                        .map(\n                            (u) =>\n                                ({\n                                    id: u.email,\n                                    type: (u as any).type || 'contact',\n                                    is_role: true,\n                                    name: u.name,\n                                    description: u.email,\n                                } as any)\n                        )\n                        .filter(\n                            (_) =>\n                                _.name.toLowerCase().includes(search) ||\n                                _.description.toLowerCase().includes(search) ||\n                                _.type.toLowerCase().includes(search)\n                        ),\n                    ...users.map((u) => ({\n                        id: u.email,\n                        type: 'user',\n                        name: u.name,\n                        description: u.email,\n                    })),\n                    ...features\n                        .filter((_) => _.name.toLowerCase().includes(search))\n                        .map((s) => ({\n                            id: s.id,\n                            type: 'feature',\n                            name: s.name,\n                            description: '',\n                            zone: (s as any).zone?.id,\n                        })),\n                ];\n                results.sort((a, b) => a.name.localeCompare(b.name));\n                return results;\n            }\n        ),\n        tap(() => this._loading.next(false)),\n        shareReplay(1)\n    );\n    /** Obverable for whether results are being loaded */\n    public readonly loading = this._loading.asObservable();\n    /** Function used to query for users */\n    public search_fn = (q: string) =>\n        this._settings.get('app.basic_user_search')\n            ? queryUsers({ q, authority_id: authority()?.id }).pipe(\n                  map((_) => _.data)\n              )\n            : searchStaff(q);\n\n    constructor(\n        private _org: OrganisationService,\n        private _settings: SettingsService,\n        private _maps_people: MapsPeopleService\n    ) {\n        this.search_results.subscribe();\n        this.init();\n    }\n\n    public async init() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        const mod = moduleFromMetadata(\n            this._org.binding('location_services'),\n            'LocationServices'\n        );\n        if (mod) {\n            const binding = mod.binding('emergency_contacts');\n            binding.listen().subscribe((contacts_map) => {\n                const list = [];\n                for (const type in contacts_map) {\n                    for (const user of contacts_map[type]) {\n                        list.push({ ...user, type });\n                    }\n                }\n                this._emergency_contacts.next(list);\n            });\n            binding.bind();\n        }\n    }\n\n    public setFilter(str: string) {\n        this._filter.next(str);\n    }\n}\n","import { Component, Inject } from '@angular/core';\nimport { AsyncHandler } from '@placeos/common';\nimport { MAP_FEATURE_DATA } from '@placeos/components';\n\nexport interface SensorInfoData {\n    id: string;\n    temp: number;\n    humidity: number;\n}\n\nlet shown_id = '';\n\n@Component({\n    selector: 'explore-sensor-info',\n    template: `\n        <button\n            icon\n            matRipple\n            customTooltip\n            [content]=\"stats\"\n            yPosition=\"center\"\n            xPosition=\"center\"\n            class=\"absolute top-1/2 left-1/2 w-7 h-7 min-w-0 -translate-x-1/2 -translate-y-1/2 bg-base-100 shadow pointer-events-auto\"\n        >\n            <app-icon> visibility </app-icon>\n        </button>\n        <ng-template #stats>\n            <div\n                class=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-base-100 rounded-lg border border-base-200 p-2 text-xl\"\n            >\n                <div\n                    class=\"flex items-center space-x-2 whitespace-nowrap pr-2\"\n                    *ngIf=\"temp\"\n                >\n                    <app-icon>thermostat</app-icon>\n                    <div class=\"\">{{ temp }}˚F</div>\n                </div>\n                <div\n                    class=\"flex items-center space-x-2 whitespace-nowrap pr-2\"\n                    *ngIf=\"humidity\"\n                >\n                    <app-icon>opacity</app-icon>\n                    <div class=\"\">{{ humidity }}%</div>\n                </div>\n                <div\n                    *ngIf=\"temp > 82\"\n                    class=\"absolute top-0 right-0 rounded-full translate-x-1/2 -translate-y-1/2 bg-base-100 border border-base-200\"\n                >\n                    <app-icon class=\"text-error text-xl\">error</app-icon>\n                </div>\n            </div>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class ExploreSensorInfoComponent extends AsyncHandler {\n    public readonly temp = this._details.temp || 0;\n    public readonly humidity = this._details.humidity || 0;\n\n    public get show() {\n        return shown_id === this._details.id;\n    }\n\n    public set show(value: boolean) {\n        this.timeout('show', () => (shown_id = value ? this._details.id : ''));\n    }\n\n    constructor(@Inject(MAP_FEATURE_DATA) private _details: SensorInfoData) {\n        super();\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { getModule, showMetadata } from '@placeos/ts-client';\nimport { Point, ViewerFeature } from '@placeos/svg-viewer';\nimport { debounceTime, filter, first, map } from 'rxjs/operators';\n\nimport { AsyncHandler, HashMap, SettingsService } from '@placeos/common';\nimport { OrganisationService } from 'libs/organisation/src/lib/organisation.service';\n\nimport { ExploreStateService } from './explore-state.service';\nimport { DEFAULT_COLOURS } from './explore-spaces.service';\nimport { ExploreSensorInfoComponent } from './explore-sensor-info.component';\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport {\n    MapCanvasComponent,\n    Polygon,\n} from 'libs/components/src/lib/map-canvas.component';\n\nexport interface ZoneData {\n    /** ID of the zone */\n    map_id?: string;\n    /** ID of the zone */\n    area_id: string;\n    /** Max occupancy allowed in zone */\n    capacity: number;\n    /** Number of devices in the zone */\n    count: number;\n    /** Key in the ZoneData to use for people count */\n    area_count_key: string;\n    /** Average temperature from the sensors in the zone */\n    temperature: number;\n    /** Average humidity from the sensors in the zone */\n    humidity: number;\n    people_count: number;\n    people_count_sum: number;\n    queue_size: number;\n    counter: number;\n    at_location?: number;\n}\n\n@Injectable()\nexport class ExploreZonesService extends AsyncHandler {\n    private _area_list: string[] = [];\n    private _statuses: HashMap<string> = {};\n    private _count_key: HashMap<string> = {};\n    private _location: HashMap<Point> = {};\n    private _label_location: HashMap<Point> = {};\n    private _capacity: HashMap<number> = {};\n    private _draw: HashMap<boolean> = {};\n    private _points: HashMap<[number, number][]> = {};\n    private _features: ViewerFeature[] = [];\n    private _polygons$ = new BehaviorSubject<Polygon[]>([]);\n\n    private _bind = combineLatest([\n        this._org.active_building,\n        this._state.level,\n        this._state.options,\n    ]).pipe(\n        filter(([bld, lvl, { is_public }]) => !!bld && !!lvl && !is_public),\n        map(([_, lvl]) => {\n            this._statuses = {};\n            let system_id: any = this._org.binding('area_management');\n            if (!system_id) return;\n            const bind_areas = getModule(system_id, 'AreaManagement').binding(\n                `${lvl.id}:areas`\n            );\n            const bind_zone = getModule(system_id, 'AreaManagement').binding(\n                `${lvl.id}`\n            );\n            const zones = combineLatest([\n                bind_areas.listen(),\n                bind_zone.listen(),\n            ]).pipe(\n                debounceTime(100),\n                map(([a, z]) => [\n                    ...(a?.value || []),\n                    ...(z?.value || []).filter((_) => _.location === 'area'),\n                ])\n            );\n            this.subscription(\n                `zones-status`,\n                zones.subscribe((l) => this.parseData(l))\n            );\n            this.subscription('binding', bind_areas.bind());\n            this.subscription('zone-binding', bind_zone.bind());\n        })\n    );\n\n    constructor(\n        private _state: ExploreStateService,\n        private _org: OrganisationService,\n        private _settings: SettingsService\n    ) {\n        super();\n        this.init();\n    }\n\n    public async init() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        const zone_metadata = await Promise.all(\n            this._org.levels.map((bld) =>\n                showMetadata(bld.id, 'map_regions').toPromise()\n            )\n        );\n        this._area_list = [];\n        for (const zone of zone_metadata) {\n            const areas = (zone?.details as any)?.areas;\n            if (!areas) continue;\n            for (const area of areas) {\n                const {\n                    capacity,\n                    hide_label,\n                    label_location,\n                    draw_polygon,\n                    area_count_key,\n                } = area.properties || {};\n                const { coordinates } = area.geometry || {};\n                this._capacity[area.id] = capacity || 100;\n                this._count_key[area.id] = area_count_key || '';\n                this._location[area.id] = coordinates?.length\n                    ? getCenterPoint(coordinates)\n                    : null;\n                this._label_location[area.id] =\n                    hide_label === false\n                        ? label_location || this._location[area.id]\n                        : null;\n                this._draw[area.id] =\n                    !!draw_polygon ||\n                    this._settings.get('app.explore.use_zone_polygons');\n                this._points[area.id] = coordinates || [];\n                this._area_list.push(area.map_id || area.id);\n            }\n        }\n        this._state.setFeatures('zones-canvas', [\n            {\n                track_id: 'zones-canvas',\n                location: { x: 0.5, y: 0.5 },\n                content: MapCanvasComponent,\n                data: {\n                    polygons$: this._polygons$,\n                    draw_points: false,\n                    draw_labels: false,\n                },\n            },\n        ]);\n        this.updateStatus();\n        this.subscription('bind', this._bind.subscribe());\n    }\n\n    public parseData(value: ZoneData[] = []) {\n        const labels = [];\n        const features = [];\n\n        for (const zone of value) {\n            const id = zone.map_id || zone.area_id;\n            // if (!this._area_list.includes(id)) continue;\n            const capacity = zone.capacity || this._capacity[id] || 100;\n            const count =\n                zone[\n                    this._count_key[id] ||\n                        this._settings.get('app.explore.area_count_key') ||\n                        'count'\n                ] || 0;\n            const filled = count / capacity;\n            this._statuses[id] = zone.at_location\n                ? 'busy'\n                : filled < 0.4\n                ? 'free'\n                : filled < 0.75\n                ? 'pending'\n                : 'busy';\n            if (!this._location[id]) continue;\n            let content = '';\n            if (zone.count) {\n                content += `${zone.count || 0} User Device${\n                    zone.count === 1 ? '' : 's'\n                }\\n`;\n            }\n            if (zone.temperature)\n                content += `Temperature: ${zone.temperature} ˚C\\n`;\n            if (zone.people_count > 0)\n                content += `${zone.people_count_sum} ${\n                    zone.people_count_sum === 1 ? 'Person' : 'People'\n                }\\n`;\n            if (zone.humidity) content += `Humidity: ${zone.humidity}%\\n`;\n            if (zone.queue_size) content += `Queue Size: ${zone.queue_size}%\\n`;\n            if (zone.counter) content += `Count: ${zone.counter}\\n`;\n            if (\n                this._label_location[id] &&\n                !this._settings.get('app.explore.show_zone_labels')\n            ) {\n                labels.push({\n                    location: this._label_location[id],\n                    content,\n                    z_index: 100,\n                });\n            }\n            if (\n                this._settings.get('app.explore.show_zone_sensor_info') &&\n                (zone.temperature || zone.humidity)\n            ) {\n                features.push({\n                    track_id: `sensors:${id}`,\n                    location: this._location[id],\n                    content: ExploreSensorInfoComponent,\n                    data: {\n                        id,\n                        temp: zone.temperature || 10,\n                        humidity: zone.humidity || 10,\n                    },\n                    z_index: 98,\n                });\n            }\n        }\n        this._features = features;\n        this._state.setLabels('zones', labels);\n        this.updateStatus();\n    }\n\n    private updateStatus() {\n        const style_map = {};\n        const features = [];\n        const colours = this._settings.get('app.explore.colors') || {};\n        const polygons = [];\n        for (const zone_id in this._statuses) {\n            const colour =\n                colours[`zone-${this._statuses[zone_id]}`] ||\n                colours[`${this._statuses[zone_id]}`] ||\n                DEFAULT_COLOURS[`${this._statuses[zone_id]}`];\n            if (this._draw[zone_id]) {\n                polygons.push({\n                    name: zone_id,\n                    points: this._points[zone_id],\n                    color: colour,\n                } as Polygon);\n            } else {\n                style_map[`#${zone_id}`] = {\n                    fill: colour,\n                    opacity: 0.6,\n                };\n            }\n        }\n        this._polygons$.next(polygons);\n        this._state.setFeatures('zones', [...features, ...this._features]);\n        this._state.setStyles('zones-styles', style_map);\n    }\n}\n\nfunction getCenterPoint(points: [number, number][]) {\n    const diff: HashMap<number> = (points || []).reduce(\n        (m, [x, y]) => ({\n            x_min: x < m.x_min ? x : m.x_min,\n            x_max: x > m.x_max ? x : m.x_max,\n            y_min: y < m.y_min ? y : m.y_min,\n            y_max: y > m.y_max ? y : m.y_max,\n        }),\n        {\n            x_min: 100,\n            x_max: -100,\n            y_min: 100,\n            y_max: -100,\n        }\n    );\n    return {\n        x: diff.x_min + (diff.x_max - diff.x_min) / 2,\n        y: diff.y_min + (diff.y_max - diff.y_min) / 2,\n    };\n}\n","import { Component } from '@angular/core';\nimport { ExploreStateService } from './explore-state.service';\n\n@Component({\n    selector: `explore-zoom-controls`,\n    template: `\n        <button\n            z-in\n            icon\n            matRipple\n            class=\"bg-base-100\"\n            (click)=\"zoomIn()\"\n            matTooltip=\"Zoom In\"\n            i18n-matTooltip\n        >\n            <app-icon>add</app-icon>\n        </button>\n        <button\n            z-out\n            icon\n            matRipple\n            class=\"bg-base-100\"\n            (click)=\"zoomOut()\"\n            matTooltip=\"Zoom Out\"\n            i18n-matTooltip\n        >\n            <app-icon>remove</app-icon>\n        </button>\n        <button\n            reset\n            icon\n            matRipple\n            class=\"bg-base-100\"\n            (click)=\"reset()\"\n            matTooltip=\"Reset Zoom & Center\"\n            i18n-matTooltip\n        >\n            <app-icon>autorenew</app-icon>\n        </button>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n            }\n\n            button {\n                border: 1px solid #9998;\n                border-radius: 0;\n            }\n\n            button:first-child {\n                border-radius: 0.25rem 0.25rem 0 0;\n                border-bottom: none;\n            }\n\n            button:last-child {\n                border-radius: 0 0 0.25rem 0.25rem;\n                border-top: none;\n            }\n        `,\n    ],\n})\nexport class ExploreZoomControlComponent {\n    public readonly zoomIn = () =>\n        this._state.setPositions(\n            Math.min(10, this._state.positions.zoom * 1.2),\n            this._state.positions.center\n        );\n    public readonly zoomOut = () =>\n        this._state.setPositions(\n            Math.max(1, this._state.positions.zoom * (1 / 1.2)),\n            this._state.positions.center\n        );\n    public readonly reset = () =>\n        this._state.setPositions(1, { x: 0.5, y: 0.5 });\n\n    constructor(private _state: ExploreStateService) {}\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule, Type } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { ComponentsModule } from '@placeos/components';\n\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\nimport { OverlayModule } from '@angular/cdk/overlay';\nimport { PortalModule } from '@angular/cdk/portal';\n\nimport { FormFieldsModule } from 'libs/form-fields/src/lib/form-fields.module';\nimport { SharedBookingsModule } from 'libs/bookings/src/lib/bookings.module';\n\nimport { ExploreMapControlComponent } from './explore-map-control.component';\nimport { ExploreMapViewComponent } from './explore-map-view.component';\nimport { ExploreSearchComponent } from './explore-search.component';\nimport { ExploreSpaceInfoComponent } from './explore-space-info.component';\nimport { ExploreZoomControlComponent } from './explore-zoom-control.component';\nimport { ExploreDeviceInfoComponent } from './explore-device-info.component';\nimport { ExploreBookingModalComponent } from './explore-booking-modal.component';\nimport { ExploreDeskInfoComponent } from './explore-desk-info.component';\nimport { SetDatetimeModalComponent } from './set-datetime-modal.component';\nimport { ExploreBookQrComponent } from './explore-book-qr.component';\nimport { ExploreSensorInfoComponent } from './explore-sensor-info.component';\nimport { ExploreLockerBankInfoComponent } from './explore-locker-bank-info.component';\nimport { ExploreLockerBankModalComponent } from './explore-locker-bank-modal.component';\n\nconst COMPONENTS: Type<any>[] = [\n    ExploreMapControlComponent,\n    ExploreMapViewComponent,\n    ExploreSearchComponent,\n    ExploreSpaceInfoComponent,\n    ExploreDeviceInfoComponent,\n    ExploreDeskInfoComponent,\n    ExploreZoomControlComponent,\n    ExploreBookingModalComponent,\n    SetDatetimeModalComponent,\n    ExploreBookQrComponent,\n    ExploreSensorInfoComponent,\n    ExploreLockerBankInfoComponent,\n    ExploreLockerBankModalComponent,\n];\n\n@NgModule({\n    declarations: [...COMPONENTS],\n    imports: [\n        CommonModule,\n        ComponentsModule,\n        FormsModule,\n        ReactiveFormsModule,\n        MatSlideToggleModule,\n        OverlayModule,\n        PortalModule,\n        FormFieldsModule,\n        SharedBookingsModule,\n    ],\n    exports: [...COMPONENTS],\n})\nexport class SharedExploreModule {}\n","\nexport * from './explore-desks.service';\nexport * from './explore-map-control.component';\nexport * from './explore-map-view.component';\nexport * from './explore-search.component';\nexport * from './explore-search.service';\nexport * from './explore-space-info.component';\nexport * from './explore-spaces.service';\nexport * from './explore-state.service';\nexport * from './explore-zones.service';\nexport * from './explore-zoom-control.component';\nexport * from './explore-parking.service';\nexport * from './explore.module';\n","import { Component, Inject } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { SettingsService } from '@placeos/common';\nimport { BookingAsset } from 'libs/bookings/src/lib/booking-form.service';\nimport { User } from 'libs/users/src/lib/user.class';\n\n@Component({\n    selector: 'set-datetime-modal',\n    template: `\n        <header classs=\"flex items-center justify-between\">\n            <h2>Set date and time</h2>\n            <button icon mat-dialog-close>\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main\n            *ngIf=\"form\"\n            [formGroup]=\"form\"\n            class=\"w-[24rem] max-w-[85vw] pt-4\"\n        >\n            <div\n                *ngIf=\"resource\"\n                class=\"flex flex-col sm:flex-row space-x-0 sm:space-x-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto\"\n            >\n                <div class=\"flex flex-col flex-1 w-full sm:w-1/4 mb-2\">\n                    <label>Resource:</label>\n                    <div\n                        class=\"px-4 py-3 border border-base-200 rounded w-full mb-4\"\n                    >\n                        {{\n                            resource.name ||\n                                resource.map_id ||\n                                'Unknown Resource'\n                        }}\n                    </div>\n                </div>\n            </div>\n            <div\n                *ngIf=\"host\"\n                class=\"flex flex-col sm:flex-row space-x-0 sm:space-x-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto\"\n            >\n                <div class=\"flex flex-col flex-1 w-full sm:w-1/4\">\n                    <label>Host</label>\n                    <a-user-search-field\n                        formControlName=\"user\"\n                        class=\"mb-4\"\n                    ></a-user-search-field>\n                </div>\n            </div>\n            <div\n                class=\"flex flex-col sm:flex-row space-x-0 sm:space-x-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto\"\n            >\n                <div class=\"flex flex-col flex-1 w-full sm:w-1/4\">\n                    <label>Date</label>\n                    <a-date-field [to]=\"book_until\" formControlName=\"date\">\n                        Date and time must be in the future\n                    </a-date-field>\n                </div>\n            </div>\n            <div\n                class=\"flex flex-col sm:flex-row space-x-0 sm:space-x-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto\"\n            >\n                <div class=\"flex flex-col flex-1 w-full sm:w-1/3\">\n                    <label>Start Time</label>\n                    <a-time-field\n                        [ngModel]=\"form.value.date\"\n                        (ngModelChange)=\"form.patchValue({ date: $event })\"\n                        [ngModelOptions]=\"{ standalone: true }\"\n                        [use_24hr]=\"use_24hr_time\"\n                    ></a-time-field>\n                </div>\n                <div class=\"flex flex-col flex-1 w-full sm:w-1/3\">\n                    <label>End Time</label>\n                    <a-duration-field\n                        formControlName=\"duration\"\n                        [time]=\"form.get('date')?.value\"\n                        [max]=\"10 * 60\"\n                        [min]=\"60\"\n                        [step]=\"60\"\n                        [use_24hr]=\"use_24hr_time\"\n                    >\n                    </a-duration-field>\n                </div>\n            </div>\n        </main>\n        <footer\n            class=\"w-full p-2 border-t border-base-200 flex items-center justify-center\"\n        >\n            <button btn matRipple [mat-dialog-close]=\"form.value\" class=\"w-32\">\n                Continue\n            </button>\n        </footer>\n    `,\n    styles: [``],\n})\nexport class SetDatetimeModalComponent {\n    public host = this._data.host;\n    public form = new FormGroup({\n        user: new FormControl(this._data.user),\n        date: new FormControl(this._data.date),\n        duration: new FormControl(this._data.duration),\n    });\n\n    public readonly book_until = this._data.until;\n    public readonly resource = this._data.resource;\n\n    public get use_24hr_time() {\n        return this._settings.get('app.use_24_hour_time');\n    }\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA)\n        private _data: {\n            date: number;\n            duration: number;\n            until: number;\n            host: boolean;\n            user?: User;\n            resource: BookingAsset;\n        },\n        private _settings: SettingsService\n    ) {}\n}\n","export * from './lib/users.module';\nexport * from './lib/new-user-modal.component';\nexport * from './lib/find-availability-modal/find-availability-modal.component';\nexport * from './lib/user-form.component';\nexport * from './lib/location.class';\nexport * from './lib/user.class';\nexport * from './lib/user.utilities';\nexport * from './lib/users.module';\nexport * from './lib/guests.fn';\nexport * from './lib/staff.fn';\n","import { HashMap } from '@placeos/common';\nimport { getUnixTime } from 'date-fns';\n\nexport class MapLocation {\n    /** Source that the location was generated */\n    public type: 'desk' | 'wireless' | 'meeting' | 'other';\n    /** Details of the location */\n    public position: string | { x: number, y: number };\n    /** Accuracy of the location data */\n    public variance: number;\n    /** Unix epoch in seconds that the data was last updated */\n    public last_seen: number;\n    /** ID of the level associated with the location */\n    public level: string;\n    /** ID of the building associated with the location */\n    public building: string;\n    /** Whether user is currently at the location if fixed */\n    public at_location: boolean;\n    /**  */\n    public coordinates_from:\n        | 'top-left'\n        | 'top-right'\n        | 'bottom-left'\n        | 'bottom-right';\n\n    constructor(_data: HashMap = {}) {\n        this.type = _data.type || _data.location || 'other';\n        this.position = _data.position ||\n            _data.map_id || _data.asset_id || {\n                x: _data.x / _data.map_width || 0,\n                y: _data.y / _data.map_height || 0,\n            };\n        this.variance = _data.variance || 0;\n        this.last_seen = _data.last_seen || getUnixTime(new Date());\n        this.level = _data.level;\n        this.building = _data.building;\n        this.at_location = !!_data.at_location;\n        this.coordinates_from = _data.coordinates_from || 'top-left';\n    }\n}\n"],"names":["MatDialog","getModule","showMetadata","addDays","endOfDay","getUnixTime","startOfDay","BehaviorSubject","combineLatest","of","catchError","debounceTime","filter","first","map","shareReplay","switchMap","take","tap","BookingFormService","AsyncHandler","currentUser","notifyError","notifySuccess","rulesForResource","SettingsService","OrganisationService","Desk","SetDatetimeModalComponent","ExploreDeskInfoComponent","ExploreDeviceInfoComponent","DEFAULT_COLOURS","ExploreStateService","queryBookings","ExploreDesksService","constructor","_state","_org","_settings","_bookings","_dialog","_this","this","_in_use","_options","_presence","_signs_of_life","_statuses","_users","_departments","_checked_in","booking_rules","active_building","pipe","bld","id","details","_","Array","desk_list","level","lvl","i","j","zone","e","_bind","options","is_public","system_id","binding","subscription","listen","subscribe","d","processBindingChange","bind","_booking_list","use_api","date","Date","now","valueOf","type","period_start","period_end","zones","bookings","next","asset_id","checked_in","_state_change","_ref","_asyncToGenerator","desks","in_use","presence","signs","restrictions","toPromise","bookable","is_used","some","has_presence","has_signs","is_checked_in","get","is_restricted","duration","host","resource","parent_id","hidden","processDesks","_x","apply","arguments","init","_this2","initialised","setOptions","enable_booking","getValue","value","devices","v","includes","location","map_id","at_location","signs_of_life","departments","desk","staff_name","department","processDevices","timeout","updateStatus","style_map","colours","desk_id","fill","setStyles","list","device","x","map_width","y","map_height","push","track_id","coordinates_from","content","z_index","data","system","setFeatures","_this3","actions","full_size","no_scale","name","user","status","can_book","book_fn","_ref2","groups","length","find","newForm","form","patchValue","all_day","_setBookingTime","custom","user_email","email","resources","asset_name","description","booking_type","confirmPost","catch","console","log","message","error","forEach","event","action","priority","callback","setActions","_this4","until","ref","open","afterClosed","i0","ɵɵinject","i1","i2","i3","i4","i5","_2","factory","ɵfac","ElementRef","differenceInMinutes","formatDistanceToNow","MAP_FEATURE_DATA","ɵɵelementStart","ɵɵi18n","ɵɵelementEnd","ɵɵtext","ɵɵadvance","ɵɵtextInterpolate1","ctx_r2","mac","manufacturer","os","ssid","username","ɵɵlistener","ExploreDeviceInfoComponent_ng_template_5_Template_div_mouseleave_0_listener","ɵɵrestoreView","_r2","ɵɵnextContext","ɵɵresetView","close","ɵɵelement","ɵɵtemplate","ExploreDeviceInfoComponent_ng_template_5_p_3_Template","ExploreDeviceInfoComponent_ng_template_5_p_12_Template","ExploreDeviceInfoComponent_ng_template_5_p_13_Template","ExploreDeviceInfoComponent_ng_template_5_p_14_Template","ExploreDeviceInfoComponent_ng_template_5_p_15_Template","ExploreDeviceInfoComponent_ng_template_5_p_16_Template","ɵɵproperty","hide_fields","variance","last_seen","EMPTY","_details","addSuffix","diameter","zoom","distance","Math","abs","distance_color","_element","toFixed","bg_color","ngOnInit","tries","setTimeout","parent","nativeElement","parentElement","position","parseInt","style","top","left","y_pos","x_pos","zoom$","loadUser","mod","execute","assigned_to","ɵɵdirectiveInject","selectors","features","ɵɵInheritDefinitionFeature","attrs","_c0","decls","vars","consts","i18n_0","ngI18nClosureMode","$localize","ExploreDeviceInfoComponent_Template_div_mouseenter_4_listener","_r1","ctx","ExploreDeviceInfoComponent_ng_template_5_Template","ɵɵtemplateRefExtractor","ɵɵstyleMap","ɵɵstyleProp","device_tooltip_r4","LockersService","unique","ExploreLockerBankInfoComponent","ExploreLockersService","_lockers","_explore","_status","lockers$","filtered_lockers$","sys_id","locker_status","lockers_banks$","locker_banks","lockers","map_status","banks","level_id","bank","bank_lockers","bank_id","in_use_count","locker","locker_id","allocated","bank_info","locker_count","in_use_percent","setLevel","providedIn","ActivatedRoute","Router","bld_r3","display_name","ExploreMapControlComponent_mat_form_field_1_Template_mat_select_ngModelChange_1_listener","$event","ctx_r1","setBuilding","ExploreMapControlComponent_mat_form_field_1_mat_option_3_Template","ɵɵpipeBind1","building","buildings","lvl_r5","ExploreMapControlComponent_mat_form_field_3_Template_mat_select_ngModelChange_2_listener","_r4","ExploreMapControlComponent_mat_form_field_3_mat_option_4_Template","levels","ExploreMapControlComponent","_router","_route","active_buildings","active_levels","tags","navigate","relativeTo","queryParams","queryParamMap","params","has","ExploreMapControlComponent_mat_form_field_1_Template","ExploreMapControlComponent_mat_form_field_3_Template","tmp_0_0","tmp_1_0","MapLocation","showStaff","SpacesService","MapPinComponent","MapRadiusComponent","SpacePipe","ExploreSpacesService","ExploreZonesService","ExploreParkingService","MapsPeopleService","ExploreMapViewComponent_div_6_div_2_Template_mat_slide_toggle_ngModelChange_1_listener","toggleZones","tmp_2_0","disable","ExploreMapViewComponent_div_6_div_2_Template","hide_zones","pair_r3","ɵɵtextInterpolate","ExploreMapViewComponent_div_8_div_3_Template","legend","ExploreMapViewComponent","enabled","show_legend","_s","_desks","_zones","_parking","_spaces","_space_pipe","_maps","url","map_url","styles","map_styles","positions","map_positions","map_features","map_actions","labels","map_labels","o","locate","use_mapsindoors$","available$","reset","locateSpace","locateUser","_locateFeature","updateZoom","setPositions","center","updateCenter","has_coordinates","parts","split","feature","parseFloat","space","transform","levelWithID","locate_details","module","locations","sort","a","b","indexOf","pos","radius","i6","i7","i8","i9","i10","i11","i12","ɵɵProvidersFeature","ExploreMapViewComponent_div_6_Template","ExploreMapViewComponent_div_8_Template","ɵɵpureFunction0","flatten","endOfMinute","isSameDay","startOfMinute","forkJoin","_poll","asObservable","l","events","__","existing_event","week_events","spaces","s","zone_id","active_spaces","available_spaces","assigned","user_name","week_availablility","availability","day","day_events","available","_updateParkingSpaces","interval","opacity","zoom_level","active_level","setLabels","ExploreSearchService","option_r2","ɵɵelementContainerStart","ExploreSearchComponent_ng_container_12_mat_option_1_Template","ExploreSearchComponent_ng_container_12_mat_option_3_Template","tmp_5_0","results","ɵɵpipeBind3","ExploreSearchComponent","checkClick","_el","contains","target","show","_input_el","blur","_search","search_str","right_size","search_results","loading","setFilter","setItem","Object","select","onTouch","checkButtonPosition","focusInput","focus","showSearch","closeSearch","item","query","window_width","window","innerWidth","button_rect","_button_el","getBoundingClientRect","x_center","width","viewQuery","ExploreSearchComponent_Query","rf","ExploreSearchComponent_click_HostBindingHandler","ɵɵresolveDocument","ExploreSearchComponent_touchstart_HostBindingHandler","ExploreSearchComponent_Template_button_resize_0_listener","ɵɵresolveWindow","ExploreSearchComponent_Template_button_click_0_listener","ExploreSearchComponent_Template_div_click_4_listener","ɵɵtwoWayListener","ExploreSearchComponent_Template_input_ngModelChange_6_listener","ɵɵtwoWayBindingSet","ExploreSearchComponent_Template_input_blur_6_listener","ExploreSearchComponent_mat_spinner_8_Template","ExploreSearchComponent_ng_container_12_Template","ɵɵclassProp","ɵɵtwoWayProperty","auto_r5","origin_r4","authority","listChildMetadata","querySystems","queryUsers","Space","searchStaff","moduleFromMetadata","_maps_people","_emergency_contacts","_filter","_loading","emergency_contacts","_role_assigned_contacts","contacts","_user_search","q","search_fn","_space_search","organisation","_maps_people_search","mapsindoors","services","LocationsService","getLocations","properties","externalId","roomId","floorName","_points_of_interest","metadata","points_of_interest","poi","users","roled_contacts","mapspeople_items","search","toLowerCase","capacity","u","roles","role","is_role","localeCompare","authority_id","contacts_map","str","ctx_r0","temp","humidity","ExploreSensorInfoComponent_ng_template_3_div_1_Template","ExploreSensorInfoComponent_ng_template_3_div_2_Template","ExploreSensorInfoComponent_ng_template_3_div_3_Template","shown_id","ExploreSensorInfoComponent","template","ExploreSensorInfoComponent_Template","ExploreSensorInfoComponent_ng_template_3_Template","stats_r2","MapCanvasComponent","_area_list","_count_key","_location","_label_location","_capacity","_draw","_points","_features","_polygons$","bind_areas","bind_zone","z","parseData","zone_metadata","Promise","all","areas","area","hide_label","label_location","draw_polygon","area_count_key","coordinates","geometry","getCenterPoint","polygons$","draw_points","draw_labels","area_id","count","filled","temperature","people_count","people_count_sum","queue_size","counter","polygons","colour","points","color","diff","reduce","m","x_min","x_max","y_min","y_max","ExploreZoomControlComponent","zoomIn","min","zoomOut","max","ExploreZoomControlComponent_Template_button_click_0_listener","ExploreZoomControlComponent_Template_button_click_3_listener","ExploreZoomControlComponent_Template_button_click_6_listener","CommonModule","Type","FormsModule","ReactiveFormsModule","ComponentsModule","MatSlideToggleModule","OverlayModule","PortalModule","FormFieldsModule","SharedBookingsModule","ExploreSpaceInfoComponent","ExploreBookingModalComponent","ExploreBookQrComponent","ExploreLockerBankModalComponent","COMPONENTS","SharedExploreModule","_3","declarations","imports","exports","FormControl","FormGroup","MAT_DIALOG_DATA","SetDatetimeModalComponent_main_6_div_1_Template","SetDatetimeModalComponent_main_6_div_2_Template","SetDatetimeModalComponent_main_6_Template_a_time_field_ngModelChange_13_listener","book_until","use_24hr_time","tmp_8_0","_data","SetDatetimeModalComponent_Template","SetDatetimeModalComponent_main_6_Template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}