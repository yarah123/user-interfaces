{"version":3,"file":"apps_concierge_src_app_poi-manager_poi-manager_module_ts.js","mappings":"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","sources":["./apps/concierge/src/app/poi-manager/map-show-element.component.ts","./apps/concierge/src/app/poi-manager/poi-list.component.ts","./apps/concierge/src/app/poi-manager/poi-management.service.ts","./apps/concierge/src/app/poi-manager/poi-manager.component.ts","./apps/concierge/src/app/poi-manager/poi-manager.module.ts","./apps/concierge/src/app/poi-manager/poi-modal.component.ts","./apps/concierge/src/app/poi-manager/select-poi-map-modal.component.ts","./libs/users/src/index.ts","./libs/users/src/lib/location.class.ts"],"sourcesContent":["import { Component, Inject } from '@angular/core';\nimport { MAP_FEATURE_DATA } from '@placeos/components';\n\n@Component({\n    selector: 'map-show-element',\n    template: `\n        <div\n            class=\"relative w-full h-full border-2\"\n            [class.border-secondary]=\"hover\"\n            [class.border-primary]=\"!hover\"\n        >\n            <div\n                class=\"opacity-30 absolute inset-0\"\n                [class.bg-secondary]=\"hover\"\n                [class.bg-primary]=\"!hover\"\n            ></div>\n        </div>\n    `,\n    styles: [``],\n})\nexport class MapShowElementComponent {\n    constructor(@Inject(MAP_FEATURE_DATA) private _data: { hover: boolean }) {}\n\n    public get hover() {\n        return !!this._data?.hover;\n    }\n}\n","import { Component } from '@angular/core';\nimport {\n    POIManagementService,\n    PointOfInterest,\n} from './poi-management.service';\nimport { SettingsService } from '@placeos/common';\nimport { generateQRCode } from 'libs/common/src/lib/qr-code';\n\n@Component({\n    selector: 'poi-list',\n    template: `\n        <div class=\"absolute inset-0 overflow-auto px-4\">\n            <custom-table\n                class=\"block min-w-[32rem] w-full h-full\"\n                [dataSource]=\"features\"\n                [columns]=\"['name', 'level', 'location', 'actions']\"\n                [display_column]=\"['Name', 'Level', 'Location', ' ']\"\n                [column_size]=\"['flex', '10r', '10r', '9r']\"\n                [template]=\"{\n                    level: level_template,\n                    actions: action_template\n                }\"\n                empty=\"No Points of Interest found.\"\n            ></custom-table>\n        </div>\n        <ng-template #level_template let-row=\"row\">\n            {{ (row.level_id | level)?.display_name || 'Unknown' }}\n        </ng-template>\n        <ng-template #action_template let-row=\"row\">\n            <div class=\"w-full flex justify-end space-x-2\">\n                <div matTooltip=\"Private QR Code\">\n                    <button\n                        icon\n                        matRipple\n                        customTooltip\n                        [content]=\"qr_menu\"\n                        (click)=\"loadQrCode(row)\"\n                    >\n                        <app-icon>qr_code</app-icon>\n                    </button>\n                </div>\n                <div matTooltip=\"Public QR Code\">\n                    <button\n                        icon\n                        matRipple\n                        customTooltip\n                        [disabled]=\"!row.short_link_id\"\n                        [content]=\"qr_menu\"\n                        (click)=\"loadPublicQrCode(row)\"\n                    >\n                        <app-icon>qr_code</app-icon>\n                    </button>\n                </div>\n                <ng-template #qr_menu>\n                    <div class=\"bg-base-100 py-2 shadow rounded\">\n                        <div class=\"\" printable>\n                            <a\n                                [href]=\"row.qr_link | safe: 'url'\"\n                                target=\"_blank\"\n                                ref=\"noopener noreferrer\"\n                                class=\"block p-2 mx-4 my-2 rounded-lg border border-base-200 bg-base-100\"\n                            >\n                                <img class=\"w-48\" [src]=\"row.qr_code\" />\n                            </a>\n                            <div\n                                class=\"w-[calc(100%-2rem)] text-center mt-2 font-mono text-sm bg-base-200 rounded p-2 mx-4\"\n                            >\n                                {{ row.name || row.id }}\n                            </div>\n                        </div>\n                        <button\n                            btn\n                            matRipple\n                            class=\"w-[calc(100%-2rem)] mx-4 my-2\"\n                            (click)=\"print()\"\n                        >\n                            Print QR Code\n                        </button>\n                    </div>\n                </ng-template>\n                <button btn icon matRipple [matMenuTriggerFor]=\"menu\">\n                    <app-icon>more_vert</app-icon>\n                </button>\n                <mat-menu #menu=\"matMenu\">\n                    <button mat-menu-item (click)=\"edit(row)\">\n                        <div class=\"flex items-center space-x-2\">\n                            <app-icon>edit</app-icon>\n                            <span>Edit Point of Interest</span>\n                        </div>\n                    </button>\n                    <button mat-menu-item (click)=\"remove(row)\">\n                        <div class=\"flex items-center space-x-2 text-red-500\">\n                            <app-icon class=\"text-error\">delete</app-icon>\n                            <span>Delete Point of Interest</span>\n                        </div>\n                    </button>\n                </mat-menu>\n            </div>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class POIListComponent {\n    public readonly features = this._manager.filtered_features;\n\n    public readonly edit = (region) =>\n        this._manager.editPointOfInterest(region);\n    public readonly remove = (region) =>\n        this._manager.removePointOfInterest(region);\n\n    public get kiosk_url() {\n        const path = this._settings.get('app.kiosk_url_path') || '/map-kiosk';\n        return `${window.location.origin}${path}`;\n    }\n\n    constructor(\n        private _manager: POIManagementService,\n        private _settings: SettingsService\n    ) {}\n\n    public loadQrCode(item: PointOfInterest) {\n        const location =\n            typeof item.location === 'string'\n                ? item.location\n                : item.location.join(',');\n        const link = `${this.kiosk_url}/#/explore?level=${encodeURIComponent(\n            item.level_id\n        )}&locate=${encodeURIComponent(location)}`;\n        item.qr_link = link;\n        item.qr_code = generateQRCode(link);\n    }\n\n    public loadPublicQrCode(item: PointOfInterest) {\n        const link = `${location.origin}/r/${item.short_link_id.split('-')[1]}`;\n        item.qr_link = link;\n        item.qr_code = generateQRCode(link);\n    }\n\n    public print() {\n        window.print();\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { OrganisationService } from '@placeos/organisation';\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport { map, shareReplay, switchMap } from 'rxjs/operators';\nimport { POIModalComponent } from './poi-modal.component';\nimport { notifyError, notifySuccess, openConfirmModal } from '@placeos/common';\nimport { showMetadata, updateMetadata } from '@placeos/ts-client';\n\nexport interface POIListOptions {\n    search?: string;\n}\n\nexport interface PointOfInterest {\n    id: string;\n    name: string;\n    level_id: string;\n    location: string | [number, number];\n    short_link_id: string;\n    qr_code?: string;\n    qr_link?: string;\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class POIManagementService {\n    private _options = new BehaviorSubject<POIListOptions>({});\n    private _change = new BehaviorSubject(0);\n\n    public options = this._options.asObservable();\n\n    private _features = combineLatest([\n        this._org.active_building,\n        this._change,\n    ]).pipe(\n        switchMap(([bld]) => showMetadata(bld.id, 'map_features', {})),\n        map((_) => _.details || {}),\n        shareReplay(1)\n    );\n\n    public readonly filtered_features = combineLatest([\n        this._features,\n        this._options,\n    ]).pipe(\n        map(([features, options]) => {\n            let list = Object.values(features).reduce(\n                (acc, _) => [...acc, ..._],\n                []\n            );\n            if (options.search) {\n                list = list.filter((_) =>\n                    _.name.toLowerCase().includes(options.search.toLowerCase())\n                );\n            }\n            return list;\n        })\n    );\n\n    constructor(\n        private _org: OrganisationService,\n        private _dialog: MatDialog\n    ) {}\n\n    public setFilters(options: Partial<POIListOptions>) {\n        this._options.next({ ...this._options.getValue(), ...options });\n    }\n\n    public setSearchString(search: string) {\n        this._options.next({ ...this._options.getValue(), search });\n    }\n\n    public editPointOfInterest(poi?: PointOfInterest) {\n        const ref = this._dialog.open(POIModalComponent, {\n            data: poi,\n        });\n        ref.afterClosed().subscribe(() => this._change.next(Date.now()));\n    }\n\n    public async removePointOfInterest(poi: PointOfInterest) {\n        const ref = await openConfirmModal(\n            {\n                title: 'Remove Point of Interest',\n                content: `Are you sure you want to remove the point of interest \"${poi.name}\"?`,\n                icon: { content: 'delete_forever' },\n                confirm_text: 'Remove',\n            },\n            this._dialog\n        );\n        if (ref.reason !== 'done') return ref.close();\n        ref.loading('Removing point of interest...');\n        const old_metadata = await showMetadata(\n            this._org.building.id,\n            'map_features',\n            {}\n        ).toPromise();\n        const metadata = old_metadata.details || {};\n        if (metadata[poi.level_id]) {\n            metadata[poi.level_id] = metadata[poi.level_id].filter(\n                (_) => _.id !== poi.id\n            );\n        }\n        await updateMetadata(this._org.building.id, {\n            name: 'map_features',\n            details: metadata,\n            description: '',\n        })\n            .toPromise()\n            .catch((e) => {\n                notifyError(e);\n                ref.close();\n                throw e;\n            });\n        notifySuccess('Successfully removed point of interest.');\n        ref.close();\n        this._change.next(Date.now());\n    }\n}\n","import { Component, Inject } from '@angular/core';\nimport { POIManagementService } from './poi-management.service';\nimport { Building, OrganisationService } from '@placeos/organisation';\nimport { SettingsService } from '@placeos/common';\n\n@Component({\n    selector: '[app-poi-manager]',\n    template: `\n        <app-topbar></app-topbar>\n        <div class=\"flex flex-1 h-px\">\n            <app-sidebar></app-sidebar>\n            <main class=\"flex flex-col flex-1 w-1/2 h-full\">\n                <header\n                    class=\"flex items-center justify-between px-4 py-8\"\n                    [class.mb-2]=\"\n                        !use_region || (buildings | async)?.length <= 1\n                    \"\n                >\n                    <h2 class=\"text-2xl font-medium\">\n                        Point of Interest Management\n                    </h2>\n                    <button btn matRipple (click)=\"new()\">\n                        Add Point of Interest\n                    </button>\n                </header>\n                <div\n                    class=\"flex items-center justify-between mb-2 px-4\"\n                    *ngIf=\"use_region && (buildings | async)?.length > 1\"\n                >\n                    <mat-form-field appearance=\"outline\" class=\"w-64\">\n                        <mat-select\n                            name=\"building\"\n                            [ngModel]=\"building\"\n                            (ngModelChange)=\"building = $event\"\n                            [ngModelOptions]=\"{ standalone: true }\"\n                            [placeholder]=\"\n                                building?.display_name || building?.name\n                            \"\n                        >\n                            <mat-option\n                                *ngFor=\"let bld of buildings | async\"\n                                [value]=\"bld\"\n                            >\n                                {{ bld.display_name || bld.name }}\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                </div>\n                <poi-list class=\"block w-full relative flex-1 h-1/2\"></poi-list>\n            </main>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n                background-color: var(--b1);\n            }\n\n            sidebar {\n                height: 100%;\n            }\n\n            main {\n                display: flex;\n                flex-direction: column;\n                flex: 1;\n                min-width: 50%;\n                height: 100%;\n            }\n        `,\n    ],\n})\nexport class POIManagerComponent {\n    public readonly new = () => this._state.editPointOfInterest();\n\n    public readonly buildings = this._org.active_buildings;\n\n    public get building() {\n        return this._org.building;\n    }\n\n    public set building(bld: Building) {\n        this._org.building = bld;\n    }\n\n    public get use_region() {\n        return !!this._settings.get('app.use_region');\n    }\n\n    constructor(\n        private _org: OrganisationService,\n        private _state: POIManagementService,\n        private _settings: SettingsService\n    ) {}\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Route } from '@angular/router';\n\nimport { UIModule } from '../ui/ui.module';\n\nimport { SharedSpacesModule } from '@placeos/spaces';\nimport { SharedUsersModule } from '@placeos/users';\n\nimport { POIManagerComponent } from './poi-manager.component';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { POIListComponent } from './poi-list.component';\nimport { POIModalComponent } from './poi-modal.component';\nimport { SelectPOIMapModalComponent } from './select-poi-map-modal.component';\nimport { MapShowElementComponent } from './map-show-element.component';\n\nconst ROUTES: Route[] = [\n    { path: '', component: POIManagerComponent },\n    { path: 'new', component: POIManagerComponent },\n];\n\n@NgModule({\n    declarations: [\n        POIManagerComponent,\n        POIListComponent,\n        POIModalComponent,\n        SelectPOIMapModalComponent,\n        MapShowElementComponent,\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        UIModule,\n        SharedSpacesModule,\n        SharedUsersModule,\n        MatChipsModule,\n        RouterModule.forChild(ROUTES),\n    ],\n})\nexport class POIManagerModule {}\n","import { Component, Inject } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport {\n    MAT_DIALOG_DATA,\n    MatDialog,\n    MatDialogRef,\n} from '@angular/material/dialog';\nimport {\n    AsyncHandler,\n    SettingsService,\n    createShortURL,\n    getInvalidFields,\n    notifyError,\n    randomString,\n    updateShortURL,\n} from '@placeos/common';\nimport { OrganisationService, Building } from '@placeos/organisation';\nimport { showMetadata, updateMetadata } from '@placeos/ts-client';\nimport { PointOfInterest } from './poi-management.service';\nimport { take } from 'rxjs/operators';\nimport { SelectPOIMapModalComponent } from './select-poi-map-modal.component';\n\n@Component({\n    selector: 'poi-modal',\n    template: `\n        <header>\n            <h2>{{ form.value.id ? 'Edit' : 'Add' }} Point Of Interest</h2>\n            <button btn icon mat-dialog-close *ngIf=\"!loading\">\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main\n            class=\"max-h-[65vh] overflow-y-auto overflow-x-hidden p-4\"\n            *ngIf=\"!loading; else load_state\"\n        >\n            <form\n                system\n                class=\"flex flex-col w-[28rem] max-w-[calc(100vw-4rem)]\"\n                *ngIf=\"form\"\n                [formGroup]=\"form\"\n            >\n                <div class=\"flex flex-col\" *ngIf=\"form.controls.name\">\n                    <label for=\"name\" i18n=\"@@nameLabel\">\n                        Name<span>*</span>:\n                    </label>\n                    <mat-form-field appearance=\"outline\">\n                        <input\n                            matInput\n                            name=\"name\"\n                            placeholder=\"Name\"\n                            i18n-placeholder=\"@@namePlaceholder\"\n                            formControlName=\"name\"\n                        />\n                    </mat-form-field>\n                </div>\n                <div\n                    class=\"flex flex-col\"\n                    *ngIf=\"(building_list | async)?.length > 1\"\n                >\n                    <label for=\"name\" i18n=\"@@nameLabel\">\n                        Building<span>*</span>:\n                    </label>\n                    <mat-form-field appearance=\"outline\">\n                        <mat-select\n                            [(ngModel)]=\"building\"\n                            [ngModelOptions]=\"{ standalone: true }\"\n                            placeholder=\"Select Building\"\n                        >\n                            <mat-option\n                                *ngFor=\"let bld of building_list | async\"\n                                [value]=\"bld\"\n                            >\n                                {{ bld.display_name }}\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                </div>\n                <div class=\"flex flex-col\" *ngIf=\"form.controls.level_id\">\n                    <label for=\"name\" i18n=\"@@nameLabel\">\n                        Level<span>*</span>:\n                    </label>\n                    <mat-form-field appearance=\"outline\">\n                        <mat-select\n                            formControlName=\"level_id\"\n                            placeholder=\"Select Level\"\n                        >\n                            <mat-option\n                                *ngFor=\"let level of level_list | async\"\n                                [value]=\"level.id\"\n                            >\n                                {{ level.display_name }}\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                </div>\n                <div class=\"flex flex-col\">\n                    <label for=\"name\" i18n=\"@@nameLabel\">\n                        Location<span>*</span>:\n                    </label>\n                    <mat-form-field appearance=\"outline\">\n                        <mat-select\n                            [(ngModel)]=\"location_type\"\n                            [ngModelOptions]=\"{ standalone: true }\"\n                            placeholder=\"Location Type\"\n                        >\n                            <mat-option value=\"map_id\">Map ID</mat-option>\n                            <mat-option value=\"coordinates\"\n                                >Coordinates</mat-option\n                            >\n                        </mat-select>\n                    </mat-form-field>\n                    <div\n                        class=\"flex items-center space-x-2 pb-2\"\n                        *ngIf=\"location_type === 'map_id'\"\n                    >\n                        <mat-form-field\n                            class=\"no-subscript\"\n                            appearance=\"outline\"\n                        >\n                            <input\n                                matInput\n                                name=\"location\"\n                                placeholder=\"Location\"\n                                i18n-placeholder=\"@@locationPlaceholder\"\n                                formControlName=\"location\"\n                            />\n                        </mat-form-field>\n                        <button\n                            icon\n                            matRipple\n                            class=\"rounded border border-base-300 h-12 w-12\"\n                            (click)=\"selectPOIfromMap()\"\n                        >\n                            <app-icon>place</app-icon>\n                        </button>\n                    </div>\n                    <div\n                        class=\"flex items-center space-x-2\"\n                        *ngIf=\"location_type === 'coordinates'\"\n                    >\n                        <mat-form-field appearance=\"outline\" class=\"flex-1\">\n                            <input\n                                matInput\n                                name=\"latitude\"\n                                [ngModel]=\"form.value.location[0]\"\n                                (ngModelChange)=\"\n                                    form.patchValue({\n                                        location: [\n                                            $event,\n                                            form.value.location[1]\n                                        ]\n                                    })\n                                \"\n                                [ngModelOptions]=\"{ standalone: true }\"\n                            />\n                        </mat-form-field>\n                        <mat-form-field appearance=\"outline\" class=\"flex-1\">\n                            <input\n                                matInput\n                                name=\"longitude\"\n                                [ngModel]=\"form.value.location[1]\"\n                                (ngModelChange)=\"\n                                    form.patchValue({\n                                        location: [\n                                            form.value.location[0],\n                                            $event\n                                        ]\n                                    })\n                                \"\n                                [ngModelOptions]=\"{ standalone: true }\"\n                            />\n                        </mat-form-field>\n                    </div>\n                </div>\n            </form>\n        </main>\n        <footer\n            class=\"p-2 flex justify-end border-t border-base-200\"\n            *ngIf=\"!loading\"\n        >\n            <button btn class=\"w-32\" (click)=\"save()\">Save</button>\n        </footer>\n        <ng-template #load_state>\n            <div class=\"flex flex-col items-center justify-center w-64 h-64\">\n                <mat-spinner diameter=\"32\"></mat-spinner>\n                <p class=\"mt-4\">Saving Point Of Interest...</p>\n            </div>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class POIModalComponent extends AsyncHandler {\n    public loading = false;\n    public location_type =\n        this._data?.location instanceof Array ? 'coordinates' : 'map_id';\n    public readonly building_list = this._org.building_list;\n    public readonly level_list = this._org.active_levels;\n\n    public get building() {\n        return this._org.building;\n    }\n\n    public set building(value: Building) {\n        this._org.building = value;\n    }\n\n    public readonly form = new FormGroup({\n        id: new FormControl(this._data?.id || ''),\n        name: new FormControl(this._data?.name || '', [Validators.required]),\n        level_id: new FormControl(this._data?.level_id || '', [\n            Validators.required,\n        ]),\n        location: new FormControl(this._data?.location || '', [\n            Validators.required,\n        ]),\n    });\n\n    constructor(\n        private _org: OrganisationService,\n        @Inject(MAT_DIALOG_DATA) private _data: PointOfInterest | undefined,\n        private _dialog_ref: MatDialogRef<POIModalComponent>,\n        private _settings: SettingsService,\n        private _dialog: MatDialog\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        if (!this.form.value.level_id) {\n            const levels = await this.level_list.pipe(take(1)).toPromise();\n            if (levels.length) this.form.patchValue({ level_id: levels[0].id });\n        }\n    }\n\n    public selectPOIfromMap() {\n        const ref = this._dialog.open(SelectPOIMapModalComponent, {\n            data: this._data,\n        });\n        ref.afterClosed().subscribe((d) => {\n            if (!d) return;\n            this.form.patchValue({ location: d });\n        });\n    }\n\n    public async save() {\n        if (!this.form.valid) {\n            return notifyError(\n                `Some form fields are invalid. [${getInvalidFields(\n                    this.form\n                ).join(', ')}]`\n            );\n        }\n        const data: any = this.form.getRawValue();\n        if (!data.id) data.id = `POI-${randomString(8)}`;\n        data.short_link_id = this._data?.short_link_id;\n        const path = this._settings.get('app.kiosk_url_path') || '/map-kiosk';\n        const public_key = this._settings.get('app.short_url_public_key');\n        const location =\n            typeof data.location === 'string'\n                ? data.location\n                : data.location.join(',');\n        let uri = `${path}/#/explore?level=${data.level_id}&locate=${location}&public=true`;\n        if (public_key) uri += `&x-api-key=${public_key}`;\n        if (!data.short_link_id) {\n            const { id } = await createShortURL({\n                name: data.name,\n                description: `Point of Interest: ${data.name}`,\n                uri: `${\n                    window.location.origin\n                }/auth/login?continue=${encodeURIComponent(uri)}`,\n            } as any).toPromise();\n            data.short_link_id = id;\n        } else {\n            await updateShortURL(data.short_link_id, {\n                id: data.short_link_id,\n                name: data.name,\n                description: `Point of Interest: ${data.name}`,\n                uri: `${\n                    window.location.origin\n                }/auth/login?continue=${encodeURIComponent(uri)}`,\n            } as any).toPromise();\n        }\n        this.loading = true;\n        const old_metadata = await showMetadata(\n            this._org.building.id,\n            'map_features',\n            {}\n        ).toPromise();\n        const metadata = old_metadata.details || {};\n        if (!metadata[data.level_id]) metadata[data.level_id] = [];\n        metadata[data.level_id] = [\n            ...metadata[data.level_id].filter((_) => _.id !== data.id),\n            data,\n        ].sort((a, b) => a.name.localeCompare(b.name));\n        const resp = await updateMetadata(this._org.building.id, {\n            name: 'map_features',\n            details: metadata,\n            description: '',\n        })\n            .toPromise()\n            .catch((e) => notifyError(e));\n        if ((resp as any).id) this._dialog_ref.close(resp);\n        this.loading = false;\n    }\n}\n","import { Component } from '@angular/core';\nimport { AsyncHandler, MapsPeopleService } from '@placeos/common';\nimport { BuildingLevel, OrganisationService } from '@placeos/organisation';\nimport { Rect } from '@placeos/svg-viewer/dist/types';\nimport { BehaviorSubject, combineLatest, of } from 'rxjs';\nimport {\n    debounceTime,\n    map,\n    shareReplay,\n    switchMap,\n    take,\n    tap,\n} from 'rxjs/operators';\nimport { MapShowElementComponent } from './map-show-element.component';\n\ntype BoundsMap = Record<string, Rect>;\n\ndeclare let mapsindoors: any;\n\n@Component({\n    selector: 'select-poi-map-modal',\n    template: `\n        <header>\n            <h2>Select Point of Interest from Map</h2>\n            <button icon matRipple mat-dialog-close>\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main\n            class=\"flex min-w-[80vw] max-w-[calc(100vw-2rem)] sm:max-w-[64rem] max-h-[75vh] h-[75vh] overflow-hidden\"\n        >\n            <div map class=\"relative h-full flex-1 w-1/2 bg-base-200\">\n                <interactive-map\n                    [src]=\"level?.map_id\"\n                    [actions]=\"actions\"\n                    [features]=\"features | async\"\n                    [options]=\"{ controls: true }\"\n                    [focus]=\"selected.value\"\n                    (mapInfo)=\"setMapInfo($event)\"\n                ></interactive-map>\n            </div>\n            <div\n                poi-list\n                class=\"relative flex flex-col h-full w-[20rem] border-l border-base-300 shadow\"\n            >\n                <div search class=\"flex flex-col border-b border-base-200 p-2\">\n                    <mat-form-field\n                        class=\"w-full no-subscript mb-2\"\n                        appearance=\"outline\"\n                    >\n                        <mat-select\n                            name=\"level\"\n                            [(ngModel)]=\"level\"\n                            (ngModelChange)=\"onChange()\"\n                        >\n                            <mat-option\n                                *ngFor=\"let lvl of level_list | async\"\n                                [value]=\"lvl\"\n                            >\n                                {{ lvl.display_name || lvl.name }}\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                    <mat-form-field\n                        class=\"w-full no-subscript\"\n                        appearance=\"outline\"\n                    >\n                        <input\n                            matInput\n                            name=\"search\"\n                            placeholder=\"Search\"\n                            [ngModel]=\"search | async\"\n                            (ngModelChange)=\"search.next($event)\"\n                            i18n-placeholder=\"@@searchPlaceholder\"\n                        />\n                        <app-icon matPrefix class=\"text-2xl\">search</app-icon>\n                    </mat-form-field>\n                </div>\n                <div list class=\"flex flex-col flex-1 h-1/2 overflow-auto\">\n                    <div class=\"sticky top-0 w-full bg-base-100 p-3 z-10\">\n                        Results ({{ (search_results | async)?.length || 0 }})\n                        <span *ngIf=\"last_page\">\n                            {{ page * 100 + 1 }} -\n                            {{\n                                (search_results | async)?.length >\n                                page * 100 + 100\n                                    ? page * 100 + 100\n                                    : (search_results | async)?.length\n                            }}\n                        </span>\n                    </div>\n                    <ng-container\n                        *ngIf=\"\n                            (search_results | async)?.length;\n                            else empty_state\n                        \"\n                    >\n                        <button\n                            matRipple\n                            *ngFor=\"\n                                let poi of search_results\n                                    | async\n                                    | slice: page * 100:page * 100 + 100\n                            \"\n                            class=\"flex items-center text-left w-[calc(100%-1rem)] mx-2 my-1 p-2 rounded odd:border odd:border-base-200 even:bg-base-200 hover:bg-base-300 h-16 min-h-16\"\n                            [class.!bg-primary]=\"poi.id === selected.value\"\n                            [class.!text-primary-content]=\"\n                                poi.id === selected.value\n                            \"\n                            (click)=\"selected.next(poi.id)\"\n                            (mouseover)=\"hovered.next(poi.id)\"\n                        >\n                            <div class=\"flex flex-col\">\n                                <div class=\"\">{{ poi.name || poi.id }}</div>\n                                <div\n                                    class=\"text-xs opacity-30\"\n                                    *ngIf=\"poi.location\"\n                                >\n                                    {{ poi.location }}\n                                </div>\n                            </div>\n                        </button>\n                    </ng-container>\n                    <div\n                        pagination\n                        *ngIf=\"last_page > 0\"\n                        class=\"sticky flex items-center justify-center bottom-0 w-full bg-base-100 p-2 z-10 space-x-1\"\n                    >\n                        <button\n                            icon\n                            matRipple\n                            class=\"border border-base-200 rounded\"\n                            [disabled]=\"page === 0\"\n                            (click)=\"page = page - 1\"\n                        >\n                            <app-icon>chevron_left</app-icon>\n                        </button>\n                        <button\n                            icon\n                            matRipple\n                            [class.!bg-secondary]=\"page === 0\"\n                            [class.text-secondary-content]=\"page === 0\"\n                            [class.!rounded-full]=\"page === 0\"\n                            (click)=\"page = 0\"\n                        >\n                            1\n                        </button>\n                        <button icon [class.opacity-0]=\"page < 1\">\n                            <app-icon>more_horiz</app-icon>\n                        </button>\n                        <button\n                            icon\n                            matRipple\n                            class=\"!bg-secondary text-secondary-content\"\n                            [class.opacity-0]=\"page < 1 || page > last_page - 2\"\n                        >\n                            {{ page + 1 }}\n                        </button>\n                        <button icon [class.opacity-0]=\"page > last_page - 1\">\n                            <app-icon>more_horiz</app-icon>\n                        </button>\n                        <button\n                            icon\n                            matRipple\n                            class=\"border border-base-200 rounded\"\n                            [class.!bg-secondary]=\"page === last_page\"\n                            [class.text-secondary-content]=\"page === last_page\"\n                            [class.!rounded-full]=\"page === last_page\"\n                            (click)=\"page = last_page\"\n                        >\n                            {{\n                                (search_results | async)?.length / 100\n                                    | number: '1.0-0'\n                            }}\n                        </button>\n                        <button\n                            icon\n                            matRipple\n                            class=\"border border-base-200 rounded\"\n                            [disabled]=\"page === last_page\"\n                            (click)=\"page = page + 1\"\n                        >\n                            <app-icon>chevron_right</app-icon>\n                        </button>\n                    </div>\n                    <ng-template #empty_state>\n                        <div\n                            class=\"flex flex-col items-center justify-center h-full flex-1 space-y-4\"\n                        >\n                            <img\n                                src=\"assets/icons/no-results.svg\"\n                                class=\"w-36\"\n                            />\n                            <div class=\"text-center opacity-30\">\n                                No results found\n                            </div>\n                        </div>\n                    </ng-template>\n                </div>\n                <div actions class=\"p-2 border-t border-base-200\">\n                    <button\n                        btn\n                        matRipple\n                        [disabled]=\"!selected.value\"\n                        class=\"w-full\"\n                        [mat-dialog-close]=\"selected.value\"\n                    >\n                        Save\n                    </button>\n                </div>\n            </div>\n        </main>\n    `,\n    styles: [``],\n})\nexport class SelectPOIMapModalComponent extends AsyncHandler {\n    public selected_item: any;\n    public level: BuildingLevel = new BuildingLevel();\n    public map_info: BoundsMap = {};\n    public page = 0;\n    public last_page = 0;\n    public readonly selected = new BehaviorSubject<string>('');\n    public readonly hovered = new BehaviorSubject<string>('');\n    public readonly search = new BehaviorSubject('');\n    public readonly changed = new BehaviorSubject(0);\n    public readonly level_list = this._org.active_levels;\n    public readonly actions = [\n        { id: '*', action: 'click', callback: (e, p) => this.selectID(p || e) },\n    ];\n    public readonly features = combineLatest([\n        this.selected,\n        this.hovered,\n    ]).pipe(\n        map(([s_id, h_id]) =>\n            [\n                {\n                    location: s_id,\n                    content: MapShowElementComponent,\n                    full_size: true,\n                    no_scale: true,\n                },\n                {\n                    location: h_id,\n                    content: MapShowElementComponent,\n                    data: { hover: true },\n                    full_size: true,\n                    no_scale: true,\n                },\n            ].filter((_) => _.location)\n        )\n    );\n\n    public poiItemFromMapsIndoorsItem(item: any) {\n        return {\n            id: item.properties.externalId || item.properties.roomId || item.id,\n            name: item.properties.name,\n            location: item.properties.building\n                ? `${item.properties.building}, Level ${item.properties.floorName}`\n                : '',\n            area:\n                Math.abs(item.geometry.bbox[0] - item.geometry.bbox[2]) *\n                Math.abs(item.geometry.bbox[1] - item.geometry.bbox[3]),\n        };\n    }\n\n    public readonly search_results = combineLatest([\n        this.search,\n        this._maps_people.available$,\n        this.changed,\n    ]).pipe(\n        debounceTime(300),\n        switchMap(([q, available]) => {\n            console.log('Search:', q, available);\n            return available\n                ? q.length > 2\n                    ? mapsindoors?.services.LocationsService.getLocations({\n                          q,\n                      }).then((l) => {\n                          const list = l.map((i) =>\n                              this.poiItemFromMapsIndoorsItem(i)\n                          );\n                          if (this.selected_item) {\n                              list.unshift(\n                                  this.poiItemFromMapsIndoorsItem(\n                                      this.selected_item\n                                  )\n                              );\n                          }\n                          return list;\n                      })\n                    : of(\n                          this.selected_item\n                              ? [\n                                    this.poiItemFromMapsIndoorsItem(\n                                        this.selected_item\n                                    ),\n                                ]\n                              : []\n                      )\n                : of(\n                      Object.entries(this.map_info)\n                          .map(([id, bbox]) => ({\n                              id,\n                              area: bbox.w * bbox.h,\n                          }))\n                          .filter(\n                              ({ id, area }) =>\n                                  id.toLowerCase().includes(q.toLowerCase()) &&\n                                  area < 0.5\n                          )\n                          .sort((a, b) => b.area - a.area)\n                  );\n        }),\n        tap((l: any[]) => {\n            this.page = 0;\n            this.last_page = Math.floor(l.length / 100);\n        }),\n        shareReplay(1)\n    );\n\n    public readonly setMapInfo = (info: BoundsMap) => (this.map_info = info);\n\n    constructor(\n        private _org: OrganisationService,\n        private _maps_people: MapsPeopleService\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        const levels = await this.level_list.pipe(take(1)).toPromise();\n        if (levels.length) this.level = levels[0];\n    }\n\n    public onChange() {\n        this.changed.next(Date.now());\n    }\n\n    public selectID(e: any) {\n        this.timeout('select_id', async () => {\n            const use_maps_indoors = await this._maps_people.available$\n                .pipe(take(1))\n                .toPromise();\n            if (!use_maps_indoors) {\n                const pos: { x: number; y: number } = e;\n                const short_list: [string, number][] = [];\n                for (const [id, bbox] of Object.entries(this.map_info)) {\n                    if (\n                        bbox.x <= pos.x &&\n                        pos.x <= bbox.x + bbox.w &&\n                        bbox.y <= pos.y &&\n                        pos.y <= bbox.y + bbox.h\n                    ) {\n                        short_list.push([id, bbox.h * bbox.w]);\n                    }\n                }\n                short_list.sort((a, b) => a[1] - b[1]);\n                short_list.filter(([_, a]) => a <= 0.5);\n                if (short_list.length) {\n                    console.log('Selected ID:', short_list[0][0]);\n                    this.selected.next(short_list[0][0]);\n                }\n            } else {\n                console.log('Item:', e);\n                const id =\n                    e.properties?.externalId || e.properties?.roomId || e.id;\n                console.log('Selected ID:', id);\n                this.selected_item = e;\n                if (id) this.selected.next(id);\n                this.changed.next(Date.now());\n            }\n        });\n    }\n}\n","export * from './lib/users.module';\nexport * from './lib/new-user-modal.component';\nexport * from './lib/find-availability-modal/find-availability-modal.component';\nexport * from './lib/user-form.component';\nexport * from './lib/location.class';\nexport * from './lib/user.class';\nexport * from './lib/user.utilities';\nexport * from './lib/users.module';\nexport * from './lib/guests.fn';\nexport * from './lib/staff.fn';\n","import { HashMap } from '@placeos/common';\nimport { getUnixTime } from 'date-fns';\n\nexport class MapLocation {\n    /** Source that the location was generated */\n    public type: 'desk' | 'wireless' | 'meeting' | 'other';\n    /** Details of the location */\n    public position: string | { x: number, y: number };\n    /** Accuracy of the location data */\n    public variance: number;\n    /** Unix epoch in seconds that the data was last updated */\n    public last_seen: number;\n    /** ID of the level associated with the location */\n    public level: string;\n    /** ID of the building associated with the location */\n    public building: string;\n    /** Whether user is currently at the location if fixed */\n    public at_location: boolean;\n    /**  */\n    public coordinates_from:\n        | 'top-left'\n        | 'top-right'\n        | 'bottom-left'\n        | 'bottom-right';\n\n    constructor(_data: HashMap = {}) {\n        this.type = _data.type || _data.location || 'other';\n        this.position = _data.position ||\n            _data.map_id || _data.asset_id || {\n                x: _data.x / _data.map_width || 0,\n                y: _data.y / _data.map_height || 0,\n            };\n        this.variance = _data.variance || 0;\n        this.last_seen = _data.last_seen || getUnixTime(new Date());\n        this.level = _data.level;\n        this.building = _data.building;\n        this.at_location = !!_data.at_location;\n        this.coordinates_from = _data.coordinates_from || 'top-left';\n    }\n}\n"],"names":["MAP_FEATURE_DATA","MapShowElementComponent","constructor","_data","hover","_","i0","ɵɵdirectiveInject","_2","selectors","decls","vars","consts","template","MapShowElementComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵclassProp","ɵɵadvance","POIManagementService","SettingsService","generateQRCode","ɵɵtext","ɵɵtextInterpolate1","tmp_4_0","ɵɵpipeBind1","row_r1","level_id","display_name","ɵɵlistener","POIListComponent_ng_template_4_ng_template_9_Template_button_click_7_listener","ɵɵrestoreView","_r5","ctx_r3","ɵɵnextContext","ɵɵresetView","print","ɵɵproperty","ɵɵpipeBind2","row_r3","qr_link","ɵɵsanitizeUrl","qr_code","name","id","POIListComponent_ng_template_4_Template_button_click_2_listener","_r2","row","loadQrCode","POIListComponent_ng_template_4_Template_button_click_6_listener","loadPublicQrCode","ɵɵtemplate","POIListComponent_ng_template_4_ng_template_9_Template","ɵɵtemplateRefExtractor","POIListComponent_ng_template_4_Template_button_click_16_listener","edit","POIListComponent_ng_template_4_Template_button_click_22_listener","remove","qr_menu_r6","short_link_id","menu_r7","POIListComponent","kiosk_url","path","_settings","get","window","location","origin","_manager","features","filtered_features","region","editPointOfInterest","removePointOfInterest","item","join","link","encodeURIComponent","split","i1","i2","POIListComponent_Template","POIListComponent_ng_template_2_Template","POIListComponent_ng_template_4_Template","ɵɵpureFunction0","_c0","_c1","_c2","ɵɵpureFunction2","_c3","level_template_r8","action_template_r9","MatDialog","OrganisationService","BehaviorSubject","combineLatest","map","shareReplay","switchMap","POIModalComponent","notifyError","notifySuccess","openConfirmModal","showMetadata","updateMetadata","_org","_dialog","_options","_change","options","asObservable","_features","active_building","pipe","bld","details","list","Object","values","reduce","acc","search","filter","toLowerCase","includes","setFilters","next","getValue","setSearchString","poi","ref","open","data","afterClosed","subscribe","Date","now","_this","_asyncToGenerator","title","content","icon","confirm_text","reason","close","loading","old_metadata","building","toPromise","metadata","description","catch","e","ɵɵinject","factory","ɵfac","providedIn","bld_r3","POIManagerComponent_div_10_Template_mat_select_ngModelChange_2_listener","$event","_r1","ctx_r1","POIManagerComponent_div_10_mat_option_3_Template","buildings","POIManagerComponent","use_region","_state","new","active_buildings","i3","attrs","POIManagerComponent_Template","POIManagerComponent_Template_button_click_8_listener","POIManagerComponent_div_10_Template","tmp_0_0","length","tmp_1_0","CommonModule","FormsModule","RouterModule","UIModule","SharedSpacesModule","SharedUsersModule","MatChipsModule","SelectPOIMapModalComponent","ROUTES","component","POIManagerModule","_3","forChild","declarations","imports","FormControl","FormGroup","Validators","MAT_DIALOG_DATA","MatDialogRef","AsyncHandler","createShortURL","getInvalidFields","randomString","updateShortURL","take","ɵɵi18nStart","ɵɵi18nEnd","bld_r4","ɵɵtwoWayListener","POIModalComponent_main_4_form_1_div_2_Template_mat_select_ngModelChange_5_listener","ctx_r2","ɵɵtwoWayBindingSet","POIModalComponent_main_4_form_1_div_2_mat_option_6_Template","ɵɵtwoWayProperty","building_list","level_r5","POIModalComponent_main_4_form_1_div_4_mat_option_6_Template","level_list","POIModalComponent_main_4_form_1_div_15_Template_button_click_3_listener","_r6","selectPOIfromMap","POIModalComponent_main_4_form_1_div_16_Template_input_ngModelChange_2_listener","_r7","form","patchValue","value","POIModalComponent_main_4_form_1_div_16_Template_input_ngModelChange_4_listener","POIModalComponent_main_4_form_1_div_1_Template","POIModalComponent_main_4_form_1_div_2_Template","POIModalComponent_main_4_form_1_div_4_Template","POIModalComponent_main_4_form_1_Template_mat_select_ngModelChange_10_listener","location_type","POIModalComponent_main_4_form_1_div_15_Template","POIModalComponent_main_4_form_1_div_16_Template","controls","tmp_5_0","POIModalComponent_main_4_form_1_Template","POIModalComponent_footer_5_Template_button_click_1_listener","_r8","save","_dialog_ref","Array","active_levels","required","ngOnInit","levels","d","_this2","valid","getRawValue","public_key","uri","sort","a","b","localeCompare","resp","ɵɵInheritDefinitionFeature","i18n_0","ngI18nClosureMode","$localize","POIModalComponent_button_3_Template","POIModalComponent_main_4_Template","POIModalComponent_footer_5_Template","POIModalComponent_ng_template_6_Template","load_state_r9","MapsPeopleService","BuildingLevel","of","debounceTime","tap","lvl_r2","ɵɵtextInterpolate2","page","tmp_2_0","search_results","poi_r5","SelectPOIMapModalComponent_ng_container_26_button_1_Template_button_click_0_listener","_r4","$implicit","selected","SelectPOIMapModalComponent_ng_container_26_button_1_Template_button_mouseover_0_listener","hovered","SelectPOIMapModalComponent_ng_container_26_button_1_div_4_Template","ɵɵtextInterpolate","ɵɵelementContainerStart","SelectPOIMapModalComponent_ng_container_26_button_1_Template","ɵɵpipeBind3","SelectPOIMapModalComponent_div_28_Template_button_click_1_listener","SelectPOIMapModalComponent_div_28_Template_button_click_4_listener","SelectPOIMapModalComponent_div_28_Template_button_click_14_listener","last_page","SelectPOIMapModalComponent_div_28_Template_button_click_18_listener","tmp_13_0","poiItemFromMapsIndoorsItem","properties","externalId","roomId","floorName","area","Math","abs","geometry","bbox","_maps_people","level","map_info","changed","actions","action","callback","p","selectID","s_id","h_id","full_size","no_scale","available$","q","available","console","log","mapsindoors","services","LocationsService","getLocations","then","l","i","selected_item","unshift","entries","w","h","floor","setMapInfo","info","onChange","timeout","use_maps_indoors","pos","short_list","x","y","push","SelectPOIMapModalComponent_Template_interactive_map_mapInfo_8_listener","SelectPOIMapModalComponent_Template_mat_select_ngModelChange_13_listener","SelectPOIMapModalComponent_mat_option_14_Template","SelectPOIMapModalComponent_Template_input_ngModelChange_17_listener","SelectPOIMapModalComponent_span_25_Template","SelectPOIMapModalComponent_ng_container_26_Template","SelectPOIMapModalComponent_div_28_Template","SelectPOIMapModalComponent_ng_template_29_Template","map_id","tmp_9_0","tmp_11_0","empty_state_r7","getUnixTime","MapLocation","type","position","asset_id","map_width","map_height","variance","last_seen","at_location","coordinates_from"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}